
<!DOCTYPE HTML>
<html lang="us-en" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>Modules Api Ref · Redis 英文文档</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.3">
        
        
        
    
    <link rel="stylesheet" href="../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-prism/prism-solarizedlight.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="modules-blocking-ops.html" />
    
    
    <link rel="prev" href="memory-optimization.html" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    
    
        
        <li>
            <a href="https://docs.khs1994.com" target="_blank" class="custom-link">Home</a>
        </li>
    
    

    
    <li class="divider"></li>
    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="../">
            
                <a href="../">
            
                    
                    Introduction
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" >
            
                <span>
            
                    
                    Commands
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.1" data-path="../commands/acl-cat.html">
            
                <a href="../commands/acl-cat.html">
            
                    
                    Acl Cat
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.2" data-path="../commands/acl-deluser.html">
            
                <a href="../commands/acl-deluser.html">
            
                    
                    Acl Deluser
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.3" data-path="../commands/acl-genpass.html">
            
                <a href="../commands/acl-genpass.html">
            
                    
                    Acl Genpass
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.4" data-path="../commands/acl-getuser.html">
            
                <a href="../commands/acl-getuser.html">
            
                    
                    Acl Getuser
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.5" data-path="../commands/acl-help.html">
            
                <a href="../commands/acl-help.html">
            
                    
                    Acl Help
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.6" data-path="../commands/acl-list.html">
            
                <a href="../commands/acl-list.html">
            
                    
                    Acl List
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.7" data-path="../commands/acl-load.html">
            
                <a href="../commands/acl-load.html">
            
                    
                    Acl Load
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.8" data-path="../commands/acl-log.html">
            
                <a href="../commands/acl-log.html">
            
                    
                    Acl Log
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.9" data-path="../commands/acl-save.html">
            
                <a href="../commands/acl-save.html">
            
                    
                    Acl Save
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.10" data-path="../commands/acl-setuser.html">
            
                <a href="../commands/acl-setuser.html">
            
                    
                    Acl Setuser
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.11" data-path="../commands/acl-users.html">
            
                <a href="../commands/acl-users.html">
            
                    
                    Acl Users
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.12" data-path="../commands/acl-whoami.html">
            
                <a href="../commands/acl-whoami.html">
            
                    
                    Acl Whoami
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.13" data-path="../commands/append.html">
            
                <a href="../commands/append.html">
            
                    
                    Append
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.14" data-path="../commands/auth.html">
            
                <a href="../commands/auth.html">
            
                    
                    Auth
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.15" data-path="../commands/bgrewriteaof.html">
            
                <a href="../commands/bgrewriteaof.html">
            
                    
                    Bgrewriteaof
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.16" data-path="../commands/bgsave.html">
            
                <a href="../commands/bgsave.html">
            
                    
                    Bgsave
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.17" data-path="../commands/bitcount.html">
            
                <a href="../commands/bitcount.html">
            
                    
                    Bitcount
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.18" data-path="../commands/bitfield.html">
            
                <a href="../commands/bitfield.html">
            
                    
                    Bitfield
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.19" data-path="../commands/bitop.html">
            
                <a href="../commands/bitop.html">
            
                    
                    Bitop
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.20" data-path="../commands/bitpos.html">
            
                <a href="../commands/bitpos.html">
            
                    
                    Bitpos
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.21" data-path="../commands/blmove.html">
            
                <a href="../commands/blmove.html">
            
                    
                    Blmove
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.22" data-path="../commands/blpop.html">
            
                <a href="../commands/blpop.html">
            
                    
                    Blpop
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.23" data-path="../commands/brpop.html">
            
                <a href="../commands/brpop.html">
            
                    
                    Brpop
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.24" data-path="../commands/brpoplpush.html">
            
                <a href="../commands/brpoplpush.html">
            
                    
                    Brpoplpush
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.25" data-path="../commands/bzpopmax.html">
            
                <a href="../commands/bzpopmax.html">
            
                    
                    Bzpopmax
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.26" data-path="../commands/bzpopmin.html">
            
                <a href="../commands/bzpopmin.html">
            
                    
                    Bzpopmin
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.27" data-path="../commands/client-caching.html">
            
                <a href="../commands/client-caching.html">
            
                    
                    Client Caching
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.28" data-path="../commands/client-getname.html">
            
                <a href="../commands/client-getname.html">
            
                    
                    Client Getname
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.29" data-path="../commands/client-getredir.html">
            
                <a href="../commands/client-getredir.html">
            
                    
                    Client Getredir
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.30" data-path="../commands/client-id.html">
            
                <a href="../commands/client-id.html">
            
                    
                    Client Id
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.31" data-path="../commands/client-info.html">
            
                <a href="../commands/client-info.html">
            
                    
                    Client Info
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.32" data-path="../commands/client-kill.html">
            
                <a href="../commands/client-kill.html">
            
                    
                    Client Kill
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.33" data-path="../commands/client-list.html">
            
                <a href="../commands/client-list.html">
            
                    
                    Client List
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.34" data-path="../commands/client-pause.html">
            
                <a href="../commands/client-pause.html">
            
                    
                    Client Pause
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.35" data-path="../commands/client-reply.html">
            
                <a href="../commands/client-reply.html">
            
                    
                    Client Reply
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.36" data-path="../commands/client-setname.html">
            
                <a href="../commands/client-setname.html">
            
                    
                    Client Setname
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.37" data-path="../commands/client-tracking.html">
            
                <a href="../commands/client-tracking.html">
            
                    
                    Client Tracking
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.38" data-path="../commands/client-trackinginfo.html">
            
                <a href="../commands/client-trackinginfo.html">
            
                    
                    Client Trackinginfo
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.39" data-path="../commands/client-unblock.html">
            
                <a href="../commands/client-unblock.html">
            
                    
                    Client Unblock
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.40" data-path="../commands/client-unpause.html">
            
                <a href="../commands/client-unpause.html">
            
                    
                    Client Unpause
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.41" data-path="../commands/cluster-addslots.html">
            
                <a href="../commands/cluster-addslots.html">
            
                    
                    Cluster Addslots
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.42" data-path="../commands/cluster-bumpepoch.html">
            
                <a href="../commands/cluster-bumpepoch.html">
            
                    
                    Cluster Bumpepoch
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.43" data-path="../commands/cluster-count-failure-reports.html">
            
                <a href="../commands/cluster-count-failure-reports.html">
            
                    
                    Cluster Count Failure Reports
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.44" data-path="../commands/cluster-countkeysinslot.html">
            
                <a href="../commands/cluster-countkeysinslot.html">
            
                    
                    Cluster Countkeysinslot
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.45" data-path="../commands/cluster-delslots.html">
            
                <a href="../commands/cluster-delslots.html">
            
                    
                    Cluster Delslots
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.46" data-path="../commands/cluster-failover.html">
            
                <a href="../commands/cluster-failover.html">
            
                    
                    Cluster Failover
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.47" data-path="../commands/cluster-flushslots.html">
            
                <a href="../commands/cluster-flushslots.html">
            
                    
                    Cluster Flushslots
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.48" data-path="../commands/cluster-forget.html">
            
                <a href="../commands/cluster-forget.html">
            
                    
                    Cluster Forget
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.49" data-path="../commands/cluster-getkeysinslot.html">
            
                <a href="../commands/cluster-getkeysinslot.html">
            
                    
                    Cluster Getkeysinslot
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.50" data-path="../commands/cluster-info.html">
            
                <a href="../commands/cluster-info.html">
            
                    
                    Cluster Info
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.51" data-path="../commands/cluster-keyslot.html">
            
                <a href="../commands/cluster-keyslot.html">
            
                    
                    Cluster Keyslot
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.52" data-path="../commands/cluster-meet.html">
            
                <a href="../commands/cluster-meet.html">
            
                    
                    Cluster Meet
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.53" data-path="../commands/cluster-myid.html">
            
                <a href="../commands/cluster-myid.html">
            
                    
                    Cluster Myid
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.54" data-path="../commands/cluster-nodes.html">
            
                <a href="../commands/cluster-nodes.html">
            
                    
                    Cluster Nodes
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.55" data-path="../commands/cluster-replicas.html">
            
                <a href="../commands/cluster-replicas.html">
            
                    
                    Cluster Replicas
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.56" data-path="../commands/cluster-replicate.html">
            
                <a href="../commands/cluster-replicate.html">
            
                    
                    Cluster Replicate
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.57" data-path="../commands/cluster-reset.html">
            
                <a href="../commands/cluster-reset.html">
            
                    
                    Cluster Reset
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.58" data-path="../commands/cluster-saveconfig.html">
            
                <a href="../commands/cluster-saveconfig.html">
            
                    
                    Cluster Saveconfig
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.59" data-path="../commands/cluster-set-config-epoch.html">
            
                <a href="../commands/cluster-set-config-epoch.html">
            
                    
                    Cluster Set Config Epoch
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.60" data-path="../commands/cluster-setslot.html">
            
                <a href="../commands/cluster-setslot.html">
            
                    
                    Cluster Setslot
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.61" data-path="../commands/cluster-slaves.html">
            
                <a href="../commands/cluster-slaves.html">
            
                    
                    Cluster Slaves
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.62" data-path="../commands/cluster-slots.html">
            
                <a href="../commands/cluster-slots.html">
            
                    
                    Cluster Slots
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.63" data-path="../commands/command-count.html">
            
                <a href="../commands/command-count.html">
            
                    
                    Command Count
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.64" data-path="../commands/command-getkeys.html">
            
                <a href="../commands/command-getkeys.html">
            
                    
                    Command Getkeys
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.65" data-path="../commands/command-info.html">
            
                <a href="../commands/command-info.html">
            
                    
                    Command Info
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.66" data-path="../commands/command.html">
            
                <a href="../commands/command.html">
            
                    
                    Command
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.67" data-path="../commands/config-get.html">
            
                <a href="../commands/config-get.html">
            
                    
                    Config Get
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.68" data-path="../commands/config-resetstat.html">
            
                <a href="../commands/config-resetstat.html">
            
                    
                    Config Resetstat
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.69" data-path="../commands/config-rewrite.html">
            
                <a href="../commands/config-rewrite.html">
            
                    
                    Config Rewrite
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.70" data-path="../commands/config-set.html">
            
                <a href="../commands/config-set.html">
            
                    
                    Config Set
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.71" data-path="../commands/copy.html">
            
                <a href="../commands/copy.html">
            
                    
                    Copy
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.72" data-path="../commands/dbsize.html">
            
                <a href="../commands/dbsize.html">
            
                    
                    Dbsize
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.73" data-path="../commands/debug-object.html">
            
                <a href="../commands/debug-object.html">
            
                    
                    Debug Object
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.74" data-path="../commands/debug-segfault.html">
            
                <a href="../commands/debug-segfault.html">
            
                    
                    Debug Segfault
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.75" data-path="../commands/decr.html">
            
                <a href="../commands/decr.html">
            
                    
                    Decr
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.76" data-path="../commands/decrby.html">
            
                <a href="../commands/decrby.html">
            
                    
                    Decrby
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.77" data-path="../commands/del.html">
            
                <a href="../commands/del.html">
            
                    
                    Del
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.78" data-path="../commands/discard.html">
            
                <a href="../commands/discard.html">
            
                    
                    Discard
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.79" data-path="../commands/dump.html">
            
                <a href="../commands/dump.html">
            
                    
                    Dump
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.80" data-path="../commands/echo.html">
            
                <a href="../commands/echo.html">
            
                    
                    Echo
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.81" data-path="../commands/eval.html">
            
                <a href="../commands/eval.html">
            
                    
                    Eval
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.82" data-path="../commands/evalsha.html">
            
                <a href="../commands/evalsha.html">
            
                    
                    Evalsha
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.83" data-path="../commands/exec.html">
            
                <a href="../commands/exec.html">
            
                    
                    Exec
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.84" data-path="../commands/exists.html">
            
                <a href="../commands/exists.html">
            
                    
                    Exists
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.85" data-path="../commands/expire.html">
            
                <a href="../commands/expire.html">
            
                    
                    Expire
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.86" data-path="../commands/expireat.html">
            
                <a href="../commands/expireat.html">
            
                    
                    Expireat
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.87" data-path="../commands/failover.html">
            
                <a href="../commands/failover.html">
            
                    
                    Failover
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.88" data-path="../commands/flushall.html">
            
                <a href="../commands/flushall.html">
            
                    
                    Flushall
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.89" data-path="../commands/flushdb.html">
            
                <a href="../commands/flushdb.html">
            
                    
                    Flushdb
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.90" data-path="../commands/geoadd.html">
            
                <a href="../commands/geoadd.html">
            
                    
                    Geoadd
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.91" data-path="../commands/geodecode.html">
            
                <a href="../commands/geodecode.html">
            
                    
                    Geodecode
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.92" data-path="../commands/geodist.html">
            
                <a href="../commands/geodist.html">
            
                    
                    Geodist
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.93" data-path="../commands/geoencode.html">
            
                <a href="../commands/geoencode.html">
            
                    
                    Geoencode
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.94" data-path="../commands/geohash.html">
            
                <a href="../commands/geohash.html">
            
                    
                    Geohash
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.95" data-path="../commands/geopos.html">
            
                <a href="../commands/geopos.html">
            
                    
                    Geopos
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.96" data-path="../commands/georadius.html">
            
                <a href="../commands/georadius.html">
            
                    
                    Georadius
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.97" data-path="../commands/georadiusbymember.html">
            
                <a href="../commands/georadiusbymember.html">
            
                    
                    Georadiusbymember
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.98" data-path="../commands/geosearch.html">
            
                <a href="../commands/geosearch.html">
            
                    
                    Geosearch
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.99" data-path="../commands/geosearchstore.html">
            
                <a href="../commands/geosearchstore.html">
            
                    
                    Geosearchstore
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.100" data-path="../commands/get.html">
            
                <a href="../commands/get.html">
            
                    
                    Get
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.101" data-path="../commands/getbit.html">
            
                <a href="../commands/getbit.html">
            
                    
                    Getbit
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.102" data-path="../commands/getdel.html">
            
                <a href="../commands/getdel.html">
            
                    
                    Getdel
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.103" data-path="../commands/getex.html">
            
                <a href="../commands/getex.html">
            
                    
                    Getex
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.104" data-path="../commands/getrange.html">
            
                <a href="../commands/getrange.html">
            
                    
                    Getrange
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.105" data-path="../commands/getset.html">
            
                <a href="../commands/getset.html">
            
                    
                    Getset
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.106" data-path="../commands/hdel.html">
            
                <a href="../commands/hdel.html">
            
                    
                    Hdel
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.107" data-path="../commands/hello.html">
            
                <a href="../commands/hello.html">
            
                    
                    Hello
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.108" data-path="../commands/hexists.html">
            
                <a href="../commands/hexists.html">
            
                    
                    Hexists
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.109" data-path="../commands/hget.html">
            
                <a href="../commands/hget.html">
            
                    
                    Hget
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.110" data-path="../commands/hgetall.html">
            
                <a href="../commands/hgetall.html">
            
                    
                    Hgetall
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.111" data-path="../commands/hincrby.html">
            
                <a href="../commands/hincrby.html">
            
                    
                    Hincrby
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.112" data-path="../commands/hincrbyfloat.html">
            
                <a href="../commands/hincrbyfloat.html">
            
                    
                    Hincrbyfloat
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.113" data-path="../commands/hkeys.html">
            
                <a href="../commands/hkeys.html">
            
                    
                    Hkeys
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.114" data-path="../commands/hlen.html">
            
                <a href="../commands/hlen.html">
            
                    
                    Hlen
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.115" data-path="../commands/hmget.html">
            
                <a href="../commands/hmget.html">
            
                    
                    Hmget
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.116" data-path="../commands/hmset.html">
            
                <a href="../commands/hmset.html">
            
                    
                    Hmset
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.117" data-path="../commands/hrandfield.html">
            
                <a href="../commands/hrandfield.html">
            
                    
                    Hrandfield
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.118" data-path="../commands/hscan.html">
            
                <a href="../commands/hscan.html">
            
                    
                    Hscan
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.119" data-path="../commands/hset.html">
            
                <a href="../commands/hset.html">
            
                    
                    Hset
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.120" data-path="../commands/hsetnx.html">
            
                <a href="../commands/hsetnx.html">
            
                    
                    Hsetnx
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.121" data-path="../commands/hstrlen.html">
            
                <a href="../commands/hstrlen.html">
            
                    
                    Hstrlen
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.122" data-path="../commands/hvals.html">
            
                <a href="../commands/hvals.html">
            
                    
                    Hvals
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.123" data-path="../commands/incr.html">
            
                <a href="../commands/incr.html">
            
                    
                    Incr
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.124" data-path="../commands/incrby.html">
            
                <a href="../commands/incrby.html">
            
                    
                    Incrby
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.125" data-path="../commands/incrbyfloat.html">
            
                <a href="../commands/incrbyfloat.html">
            
                    
                    Incrbyfloat
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.126" data-path="../commands/info.html">
            
                <a href="../commands/info.html">
            
                    
                    Info
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.127" data-path="../commands/keys.html">
            
                <a href="../commands/keys.html">
            
                    
                    Keys
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.128" data-path="../commands/lastsave.html">
            
                <a href="../commands/lastsave.html">
            
                    
                    Lastsave
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.129" data-path="../commands/latency-doctor.html">
            
                <a href="../commands/latency-doctor.html">
            
                    
                    Latency Doctor
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.130" data-path="../commands/latency-graph.html">
            
                <a href="../commands/latency-graph.html">
            
                    
                    Latency Graph
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.131" data-path="../commands/latency-help.html">
            
                <a href="../commands/latency-help.html">
            
                    
                    Latency Help
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.132" data-path="../commands/latency-history.html">
            
                <a href="../commands/latency-history.html">
            
                    
                    Latency History
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.133" data-path="../commands/latency-latest.html">
            
                <a href="../commands/latency-latest.html">
            
                    
                    Latency Latest
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.134" data-path="../commands/latency-reset.html">
            
                <a href="../commands/latency-reset.html">
            
                    
                    Latency Reset
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.135" data-path="../commands/lindex.html">
            
                <a href="../commands/lindex.html">
            
                    
                    Lindex
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.136" data-path="../commands/linsert.html">
            
                <a href="../commands/linsert.html">
            
                    
                    Linsert
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.137" data-path="../commands/llen.html">
            
                <a href="../commands/llen.html">
            
                    
                    Llen
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.138" data-path="../commands/lmove.html">
            
                <a href="../commands/lmove.html">
            
                    
                    Lmove
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.139" data-path="../commands/lolwut.html">
            
                <a href="../commands/lolwut.html">
            
                    
                    Lolwut
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.140" data-path="../commands/lpop.html">
            
                <a href="../commands/lpop.html">
            
                    
                    Lpop
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.141" data-path="../commands/lpos.html">
            
                <a href="../commands/lpos.html">
            
                    
                    Lpos
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.142" data-path="../commands/lpush.html">
            
                <a href="../commands/lpush.html">
            
                    
                    Lpush
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.143" data-path="../commands/lpushx.html">
            
                <a href="../commands/lpushx.html">
            
                    
                    Lpushx
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.144" data-path="../commands/lrange.html">
            
                <a href="../commands/lrange.html">
            
                    
                    Lrange
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.145" data-path="../commands/lrem.html">
            
                <a href="../commands/lrem.html">
            
                    
                    Lrem
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.146" data-path="../commands/lset.html">
            
                <a href="../commands/lset.html">
            
                    
                    Lset
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.147" data-path="../commands/ltrim.html">
            
                <a href="../commands/ltrim.html">
            
                    
                    Ltrim
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.148" data-path="../commands/memory-doctor.html">
            
                <a href="../commands/memory-doctor.html">
            
                    
                    Memory Doctor
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.149" data-path="../commands/memory-help.html">
            
                <a href="../commands/memory-help.html">
            
                    
                    Memory Help
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.150" data-path="../commands/memory-malloc-stats.html">
            
                <a href="../commands/memory-malloc-stats.html">
            
                    
                    Memory Malloc Stats
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.151" data-path="../commands/memory-purge.html">
            
                <a href="../commands/memory-purge.html">
            
                    
                    Memory Purge
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.152" data-path="../commands/memory-stats.html">
            
                <a href="../commands/memory-stats.html">
            
                    
                    Memory Stats
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.153" data-path="../commands/memory-usage.html">
            
                <a href="../commands/memory-usage.html">
            
                    
                    Memory Usage
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.154" data-path="../commands/mget.html">
            
                <a href="../commands/mget.html">
            
                    
                    Mget
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.155" data-path="../commands/migrate.html">
            
                <a href="../commands/migrate.html">
            
                    
                    Migrate
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.156" data-path="../commands/module-list.html">
            
                <a href="../commands/module-list.html">
            
                    
                    Module List
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.157" data-path="../commands/module-load.html">
            
                <a href="../commands/module-load.html">
            
                    
                    Module Load
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.158" data-path="../commands/module-unload.html">
            
                <a href="../commands/module-unload.html">
            
                    
                    Module Unload
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.159" data-path="../commands/monitor.html">
            
                <a href="../commands/monitor.html">
            
                    
                    Monitor
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.160" data-path="../commands/move.html">
            
                <a href="../commands/move.html">
            
                    
                    Move
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.161" data-path="../commands/mset.html">
            
                <a href="../commands/mset.html">
            
                    
                    Mset
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.162" data-path="../commands/msetnx.html">
            
                <a href="../commands/msetnx.html">
            
                    
                    Msetnx
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.163" data-path="../commands/multi.html">
            
                <a href="../commands/multi.html">
            
                    
                    Multi
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.164" data-path="../commands/object.html">
            
                <a href="../commands/object.html">
            
                    
                    Object
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.165" data-path="../commands/persist.html">
            
                <a href="../commands/persist.html">
            
                    
                    Persist
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.166" data-path="../commands/pexpire.html">
            
                <a href="../commands/pexpire.html">
            
                    
                    Pexpire
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.167" data-path="../commands/pexpireat.html">
            
                <a href="../commands/pexpireat.html">
            
                    
                    Pexpireat
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.168" data-path="../commands/pfadd.html">
            
                <a href="../commands/pfadd.html">
            
                    
                    Pfadd
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.169" data-path="../commands/pfcount.html">
            
                <a href="../commands/pfcount.html">
            
                    
                    Pfcount
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.170" data-path="../commands/pfmerge.html">
            
                <a href="../commands/pfmerge.html">
            
                    
                    Pfmerge
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.171" data-path="../commands/ping.html">
            
                <a href="../commands/ping.html">
            
                    
                    Ping
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.172" data-path="../commands/psetex.html">
            
                <a href="../commands/psetex.html">
            
                    
                    Psetex
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.173" data-path="../commands/psubscribe.html">
            
                <a href="../commands/psubscribe.html">
            
                    
                    Psubscribe
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.174" data-path="../commands/psync.html">
            
                <a href="../commands/psync.html">
            
                    
                    Psync
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.175" data-path="../commands/pttl.html">
            
                <a href="../commands/pttl.html">
            
                    
                    Pttl
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.176" data-path="../commands/publish.html">
            
                <a href="../commands/publish.html">
            
                    
                    Publish
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.177" data-path="../commands/pubsub.html">
            
                <a href="../commands/pubsub.html">
            
                    
                    Pubsub
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.178" data-path="../commands/punsubscribe.html">
            
                <a href="../commands/punsubscribe.html">
            
                    
                    Punsubscribe
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.179" data-path="../commands/quit.html">
            
                <a href="../commands/quit.html">
            
                    
                    Quit
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.180" data-path="../commands/randomkey.html">
            
                <a href="../commands/randomkey.html">
            
                    
                    Randomkey
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.181" data-path="../commands/readonly.html">
            
                <a href="../commands/readonly.html">
            
                    
                    Readonly
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.182" data-path="../commands/readwrite.html">
            
                <a href="../commands/readwrite.html">
            
                    
                    Readwrite
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.183" data-path="../commands/rename.html">
            
                <a href="../commands/rename.html">
            
                    
                    Rename
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.184" data-path="../commands/renamenx.html">
            
                <a href="../commands/renamenx.html">
            
                    
                    Renamenx
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.185" data-path="../commands/replicaof.html">
            
                <a href="../commands/replicaof.html">
            
                    
                    Replicaof
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.186" data-path="../commands/reset.html">
            
                <a href="../commands/reset.html">
            
                    
                    Reset
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.187" data-path="../commands/restore.html">
            
                <a href="../commands/restore.html">
            
                    
                    Restore
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.188" data-path="../commands/role.html">
            
                <a href="../commands/role.html">
            
                    
                    Role
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.189" data-path="../commands/rpop.html">
            
                <a href="../commands/rpop.html">
            
                    
                    Rpop
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.190" data-path="../commands/rpoplpush.html">
            
                <a href="../commands/rpoplpush.html">
            
                    
                    Rpoplpush
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.191" data-path="../commands/rpush.html">
            
                <a href="../commands/rpush.html">
            
                    
                    Rpush
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.192" data-path="../commands/rpushx.html">
            
                <a href="../commands/rpushx.html">
            
                    
                    Rpushx
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.193" data-path="../commands/sadd.html">
            
                <a href="../commands/sadd.html">
            
                    
                    Sadd
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.194" data-path="../commands/save.html">
            
                <a href="../commands/save.html">
            
                    
                    Save
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.195" data-path="../commands/scan.html">
            
                <a href="../commands/scan.html">
            
                    
                    Scan
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.196" data-path="../commands/scard.html">
            
                <a href="../commands/scard.html">
            
                    
                    Scard
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.197" data-path="../commands/script-debug.html">
            
                <a href="../commands/script-debug.html">
            
                    
                    Script Debug
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.198" data-path="../commands/script-exists.html">
            
                <a href="../commands/script-exists.html">
            
                    
                    Script Exists
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.199" data-path="../commands/script-flush.html">
            
                <a href="../commands/script-flush.html">
            
                    
                    Script Flush
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.200" data-path="../commands/script-kill.html">
            
                <a href="../commands/script-kill.html">
            
                    
                    Script Kill
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.201" data-path="../commands/script-load.html">
            
                <a href="../commands/script-load.html">
            
                    
                    Script Load
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.202" data-path="../commands/sdiff.html">
            
                <a href="../commands/sdiff.html">
            
                    
                    Sdiff
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.203" data-path="../commands/sdiffstore.html">
            
                <a href="../commands/sdiffstore.html">
            
                    
                    Sdiffstore
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.204" data-path="../commands/select.html">
            
                <a href="../commands/select.html">
            
                    
                    Select
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.205" data-path="../commands/set.html">
            
                <a href="../commands/set.html">
            
                    
                    Set
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.206" data-path="../commands/setbit.html">
            
                <a href="../commands/setbit.html">
            
                    
                    Setbit
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.207" data-path="../commands/setex.html">
            
                <a href="../commands/setex.html">
            
                    
                    Setex
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.208" data-path="../commands/setnx.html">
            
                <a href="../commands/setnx.html">
            
                    
                    Setnx
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.209" data-path="../commands/setrange.html">
            
                <a href="../commands/setrange.html">
            
                    
                    Setrange
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.210" data-path="../commands/shutdown.html">
            
                <a href="../commands/shutdown.html">
            
                    
                    Shutdown
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.211" data-path="../commands/sinter.html">
            
                <a href="../commands/sinter.html">
            
                    
                    Sinter
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.212" data-path="../commands/sinterstore.html">
            
                <a href="../commands/sinterstore.html">
            
                    
                    Sinterstore
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.213" data-path="../commands/sismember.html">
            
                <a href="../commands/sismember.html">
            
                    
                    Sismember
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.214" data-path="../commands/slaveof.html">
            
                <a href="../commands/slaveof.html">
            
                    
                    Slaveof
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.215" data-path="../commands/slowlog.html">
            
                <a href="../commands/slowlog.html">
            
                    
                    Slowlog
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.216" data-path="../commands/smembers.html">
            
                <a href="../commands/smembers.html">
            
                    
                    Smembers
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.217" data-path="../commands/smismember.html">
            
                <a href="../commands/smismember.html">
            
                    
                    Smismember
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.218" data-path="../commands/smove.html">
            
                <a href="../commands/smove.html">
            
                    
                    Smove
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.219" data-path="../commands/sort.html">
            
                <a href="../commands/sort.html">
            
                    
                    Sort
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.220" data-path="../commands/spop.html">
            
                <a href="../commands/spop.html">
            
                    
                    Spop
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.221" data-path="../commands/srandmember.html">
            
                <a href="../commands/srandmember.html">
            
                    
                    Srandmember
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.222" data-path="../commands/srem.html">
            
                <a href="../commands/srem.html">
            
                    
                    Srem
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.223" data-path="../commands/sscan.html">
            
                <a href="../commands/sscan.html">
            
                    
                    Sscan
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.224" data-path="../commands/stralgo.html">
            
                <a href="../commands/stralgo.html">
            
                    
                    Stralgo
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.225" data-path="../commands/strlen.html">
            
                <a href="../commands/strlen.html">
            
                    
                    Strlen
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.226" data-path="../commands/subscribe.html">
            
                <a href="../commands/subscribe.html">
            
                    
                    Subscribe
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.227" data-path="../commands/sunion.html">
            
                <a href="../commands/sunion.html">
            
                    
                    Sunion
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.228" data-path="../commands/sunionstore.html">
            
                <a href="../commands/sunionstore.html">
            
                    
                    Sunionstore
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.229" data-path="../commands/swapdb.html">
            
                <a href="../commands/swapdb.html">
            
                    
                    Swapdb
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.230" data-path="../commands/sync.html">
            
                <a href="../commands/sync.html">
            
                    
                    Sync
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.231" data-path="../commands/time.html">
            
                <a href="../commands/time.html">
            
                    
                    Time
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.232" data-path="../commands/touch.html">
            
                <a href="../commands/touch.html">
            
                    
                    Touch
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.233" data-path="../commands/ttl.html">
            
                <a href="../commands/ttl.html">
            
                    
                    Ttl
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.234" data-path="../commands/type.html">
            
                <a href="../commands/type.html">
            
                    
                    Type
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.235" data-path="../commands/unlink.html">
            
                <a href="../commands/unlink.html">
            
                    
                    Unlink
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.236" data-path="../commands/unsubscribe.html">
            
                <a href="../commands/unsubscribe.html">
            
                    
                    Unsubscribe
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.237" data-path="../commands/unwatch.html">
            
                <a href="../commands/unwatch.html">
            
                    
                    Unwatch
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.238" data-path="../commands/wait.html">
            
                <a href="../commands/wait.html">
            
                    
                    Wait
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.239" data-path="../commands/watch.html">
            
                <a href="../commands/watch.html">
            
                    
                    Watch
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.240" data-path="../commands/xack.html">
            
                <a href="../commands/xack.html">
            
                    
                    Xack
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.241" data-path="../commands/xadd.html">
            
                <a href="../commands/xadd.html">
            
                    
                    Xadd
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.242" data-path="../commands/xautoclaim.html">
            
                <a href="../commands/xautoclaim.html">
            
                    
                    Xautoclaim
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.243" data-path="../commands/xclaim.html">
            
                <a href="../commands/xclaim.html">
            
                    
                    Xclaim
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.244" data-path="../commands/xdel.html">
            
                <a href="../commands/xdel.html">
            
                    
                    Xdel
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.245" data-path="../commands/xgroup.html">
            
                <a href="../commands/xgroup.html">
            
                    
                    Xgroup
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.246" data-path="../commands/xinfo.html">
            
                <a href="../commands/xinfo.html">
            
                    
                    Xinfo
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.247" data-path="../commands/xlen.html">
            
                <a href="../commands/xlen.html">
            
                    
                    Xlen
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.248" data-path="../commands/xpending.html">
            
                <a href="../commands/xpending.html">
            
                    
                    Xpending
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.249" data-path="../commands/xrange.html">
            
                <a href="../commands/xrange.html">
            
                    
                    Xrange
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.250" data-path="../commands/xread.html">
            
                <a href="../commands/xread.html">
            
                    
                    Xread
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.251" data-path="../commands/xreadgroup.html">
            
                <a href="../commands/xreadgroup.html">
            
                    
                    Xreadgroup
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.252" data-path="../commands/xrevrange.html">
            
                <a href="../commands/xrevrange.html">
            
                    
                    Xrevrange
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.253" data-path="../commands/xtrim.html">
            
                <a href="../commands/xtrim.html">
            
                    
                    Xtrim
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.254" data-path="../commands/zadd.html">
            
                <a href="../commands/zadd.html">
            
                    
                    Zadd
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.255" data-path="../commands/zcard.html">
            
                <a href="../commands/zcard.html">
            
                    
                    Zcard
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.256" data-path="../commands/zcount.html">
            
                <a href="../commands/zcount.html">
            
                    
                    Zcount
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.257" data-path="../commands/zdiff.html">
            
                <a href="../commands/zdiff.html">
            
                    
                    Zdiff
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.258" data-path="../commands/zdiffstore.html">
            
                <a href="../commands/zdiffstore.html">
            
                    
                    Zdiffstore
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.259" data-path="../commands/zincrby.html">
            
                <a href="../commands/zincrby.html">
            
                    
                    Zincrby
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.260" data-path="../commands/zinter.html">
            
                <a href="../commands/zinter.html">
            
                    
                    Zinter
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.261" data-path="../commands/zinterstore.html">
            
                <a href="../commands/zinterstore.html">
            
                    
                    Zinterstore
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.262" data-path="../commands/zlexcount.html">
            
                <a href="../commands/zlexcount.html">
            
                    
                    Zlexcount
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.263" data-path="../commands/zmscore.html">
            
                <a href="../commands/zmscore.html">
            
                    
                    Zmscore
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.264" data-path="../commands/zpopmax.html">
            
                <a href="../commands/zpopmax.html">
            
                    
                    Zpopmax
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.265" data-path="../commands/zpopmin.html">
            
                <a href="../commands/zpopmin.html">
            
                    
                    Zpopmin
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.266" data-path="../commands/zrandmember.html">
            
                <a href="../commands/zrandmember.html">
            
                    
                    Zrandmember
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.267" data-path="../commands/zrange.html">
            
                <a href="../commands/zrange.html">
            
                    
                    Zrange
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.268" data-path="../commands/zrangebylex.html">
            
                <a href="../commands/zrangebylex.html">
            
                    
                    Zrangebylex
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.269" data-path="../commands/zrangebyscore.html">
            
                <a href="../commands/zrangebyscore.html">
            
                    
                    Zrangebyscore
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.270" data-path="../commands/zrangestore.html">
            
                <a href="../commands/zrangestore.html">
            
                    
                    Zrangestore
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.271" data-path="../commands/zrank.html">
            
                <a href="../commands/zrank.html">
            
                    
                    Zrank
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.272" data-path="../commands/zrem.html">
            
                <a href="../commands/zrem.html">
            
                    
                    Zrem
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.273" data-path="../commands/zremrangebylex.html">
            
                <a href="../commands/zremrangebylex.html">
            
                    
                    Zremrangebylex
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.274" data-path="../commands/zremrangebyrank.html">
            
                <a href="../commands/zremrangebyrank.html">
            
                    
                    Zremrangebyrank
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.275" data-path="../commands/zremrangebyscore.html">
            
                <a href="../commands/zremrangebyscore.html">
            
                    
                    Zremrangebyscore
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.276" data-path="../commands/zrevrange.html">
            
                <a href="../commands/zrevrange.html">
            
                    
                    Zrevrange
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.277" data-path="../commands/zrevrangebylex.html">
            
                <a href="../commands/zrevrangebylex.html">
            
                    
                    Zrevrangebylex
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.278" data-path="../commands/zrevrangebyscore.html">
            
                <a href="../commands/zrevrangebyscore.html">
            
                    
                    Zrevrangebyscore
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.279" data-path="../commands/zrevrank.html">
            
                <a href="../commands/zrevrank.html">
            
                    
                    Zrevrank
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.280" data-path="../commands/zscan.html">
            
                <a href="../commands/zscan.html">
            
                    
                    Zscan
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.281" data-path="../commands/zscore.html">
            
                <a href="../commands/zscore.html">
            
                    
                    Zscore
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.282" data-path="../commands/zunion.html">
            
                <a href="../commands/zunion.html">
            
                    
                    Zunion
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.283" data-path="../commands/zunionstore.html">
            
                <a href="../commands/zunionstore.html">
            
                    
                    Zunionstore
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3" >
            
                <span>
            
                    
                    Topics
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.1" data-path="acl.html">
            
                <a href="acl.html">
            
                    
                    Acl
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.2" data-path="admin.html">
            
                <a href="admin.html">
            
                    
                    Admin
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.3" data-path="ARM.html">
            
                <a href="ARM.html">
            
                    
                    ARM
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.4" data-path="benchmarks.html">
            
                <a href="benchmarks.html">
            
                    
                    Benchmarks
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.5" data-path="client-side-caching.html">
            
                <a href="client-side-caching.html">
            
                    
                    Client Side Caching
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.6" data-path="clients.html">
            
                <a href="clients.html">
            
                    
                    Clients
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.7" data-path="cluster-spec.html">
            
                <a href="cluster-spec.html">
            
                    
                    Cluster Spec
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.8" data-path="cluster-tutorial.html">
            
                <a href="cluster-tutorial.html">
            
                    
                    Cluster Tutorial
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.9" data-path="config.html">
            
                <a href="config.html">
            
                    
                    Config
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.10" data-path="data-types-intro.html">
            
                <a href="data-types-intro.html">
            
                    
                    Data Types Intro
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.11" data-path="data-types.html">
            
                <a href="data-types.html">
            
                    
                    Data Types
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.12" data-path="debugging.html">
            
                <a href="debugging.html">
            
                    
                    Debugging
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.13" data-path="distlock.html">
            
                <a href="distlock.html">
            
                    
                    Distlock
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.14" data-path="encryption.html">
            
                <a href="encryption.html">
            
                    
                    Encryption
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.15" data-path="faq.html">
            
                <a href="faq.html">
            
                    
                    Faq
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.16" data-path="gopher.html">
            
                <a href="gopher.html">
            
                    
                    Gopher
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.17" data-path="governance.html">
            
                <a href="governance.html">
            
                    
                    Governance
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.18" data-path="indexes.html">
            
                <a href="indexes.html">
            
                    
                    Indexes
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.19" data-path="internals-eventlib.html">
            
                <a href="internals-eventlib.html">
            
                    
                    Internals Eventlib
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.20" data-path="internals-rediseventlib.html">
            
                <a href="internals-rediseventlib.html">
            
                    
                    Internals Rediseventlib
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.21" data-path="internals-sds.html">
            
                <a href="internals-sds.html">
            
                    
                    Internals Sds
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.22" data-path="internals-vm.html">
            
                <a href="internals-vm.html">
            
                    
                    Internals Vm
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.23" data-path="internals.html">
            
                <a href="internals.html">
            
                    
                    Internals
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.24" data-path="latency-monitor.html">
            
                <a href="latency-monitor.html">
            
                    
                    Latency Monitor
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.25" data-path="latency.html">
            
                <a href="latency.html">
            
                    
                    Latency
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.26" data-path="ldb.html">
            
                <a href="ldb.html">
            
                    
                    Ldb
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.27" data-path="license.html">
            
                <a href="license.html">
            
                    
                    License
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.28" data-path="lru-cache.html">
            
                <a href="lru-cache.html">
            
                    
                    Lru Cache
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.29" data-path="mass-insert.html">
            
                <a href="mass-insert.html">
            
                    
                    Mass Insert
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.30" data-path="memory-optimization.html">
            
                <a href="memory-optimization.html">
            
                    
                    Memory Optimization
            
                </a>
            

            
        </li>
    
        <li class="chapter active" data-level="1.3.31" data-path="modules-api-ref.html">
            
                <a href="modules-api-ref.html">
            
                    
                    Modules Api Ref
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.32" data-path="modules-blocking-ops.html">
            
                <a href="modules-blocking-ops.html">
            
                    
                    Modules Blocking Ops
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.33" data-path="modules-intro.html">
            
                <a href="modules-intro.html">
            
                    
                    Modules Intro
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.34" data-path="modules-native-types.html">
            
                <a href="modules-native-types.html">
            
                    
                    Modules Native Types
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.35" data-path="notifications.html">
            
                <a href="notifications.html">
            
                    
                    Notifications
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.36" data-path="partitioning.html">
            
                <a href="partitioning.html">
            
                    
                    Partitioning
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.37" data-path="persistence.html">
            
                <a href="persistence.html">
            
                    
                    Persistence
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.38" data-path="pipelining.html">
            
                <a href="pipelining.html">
            
                    
                    Pipelining
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.39" data-path="problems.html">
            
                <a href="problems.html">
            
                    
                    Problems
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.40" data-path="protocol.html">
            
                <a href="protocol.html">
            
                    
                    Protocol
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.41" data-path="pubsub.html">
            
                <a href="pubsub.html">
            
                    
                    Pubsub
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.42" data-path="quickstart.html">
            
                <a href="quickstart.html">
            
                    
                    Quickstart
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.43" data-path="rdd-1.html">
            
                <a href="rdd-1.html">
            
                    
                    Rdd 1
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.44" data-path="rdd-2.html">
            
                <a href="rdd-2.html">
            
                    
                    Rdd 2
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.45" data-path="rdd.html">
            
                <a href="rdd.html">
            
                    
                    Rdd
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.46" data-path="rediscli.html">
            
                <a href="rediscli.html">
            
                    
                    Rediscli
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.47" data-path="releases.html">
            
                <a href="releases.html">
            
                    
                    Releases
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.48" data-path="replication.html">
            
                <a href="replication.html">
            
                    
                    Replication
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.49" data-path="security.html">
            
                <a href="security.html">
            
                    
                    Security
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.50" data-path="sentinel-clients.html">
            
                <a href="sentinel-clients.html">
            
                    
                    Sentinel Clients
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.51" data-path="sentinel.html">
            
                <a href="sentinel.html">
            
                    
                    Sentinel
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.52" data-path="signals.html">
            
                <a href="signals.html">
            
                    
                    Signals
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.53" data-path="sponsors.html">
            
                <a href="sponsors.html">
            
                    
                    Sponsors
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.54" data-path="streams-intro.html">
            
                <a href="streams-intro.html">
            
                    
                    Streams Intro
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.55" data-path="trademark.html">
            
                <a href="trademark.html">
            
                    
                    Trademark
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.56" data-path="transactions.html">
            
                <a href="transactions.html">
            
                    
                    Transactions
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.57" data-path="twitter-clone.html">
            
                <a href="twitter-clone.html">
            
                    
                    Twitter Clone
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.58" data-path="virtual-memory.html">
            
                <a href="virtual-memory.html">
            
                    
                    Virtual Memory
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.59" data-path="whos-using-redis.html">
            
                <a href="whos-using-redis.html">
            
                    
                    Whos Using Redis
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href=".." >Modules Api Ref</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h1 id="modules-api-reference">Modules API reference</h1>
<!-- This file is generated from module.c using gendoc.rb -->
<h2 id="redismodulealloc"><code>RedisModule_Alloc</code></h2>
<pre class="language-"><code>void *RedisModule_Alloc(size_t bytes);
</code></pre><p>Use like <code>malloc()</code>. Memory allocated with this function is reported in
Redis INFO memory, used for keys eviction according to maxmemory settings
and in general is taken into account as memory allocated by Redis.
You should avoid using <code>malloc()</code>.</p>
<h2 id="redismodulecalloc"><code>RedisModule_Calloc</code></h2>
<pre class="language-"><code>void *RedisModule_Calloc(size_t nmemb, size_t size);
</code></pre><p>Use like <code>calloc()</code>. Memory allocated with this function is reported in
Redis INFO memory, used for keys eviction according to maxmemory settings
and in general is taken into account as memory allocated by Redis.
You should avoid using <code>calloc()</code> directly.</p>
<h2 id="redismodulerealloc"><code>RedisModule_Realloc</code></h2>
<pre class="language-"><code>void* RedisModule_Realloc(void *ptr, size_t bytes);
</code></pre><p>Use like <code>realloc()</code> for memory obtained with <code>RedisModule_Alloc()</code>.</p>
<h2 id="redismodulefree"><code>RedisModule_Free</code></h2>
<pre class="language-"><code>void RedisModule_Free(void *ptr);
</code></pre><p>Use like <code>free()</code> for memory obtained by <code>RedisModule_Alloc()</code> and
<code>RedisModule_Realloc()</code>. However you should never try to free with
<code>RedisModule_Free()</code> memory allocated with <code>malloc()</code> inside your module.</p>
<h2 id="redismodulestrdup"><code>RedisModule_Strdup</code></h2>
<pre class="language-"><code>char *RedisModule_Strdup(const char *str);
</code></pre><p>Like <code>strdup()</code> but returns memory allocated with <code>RedisModule_Alloc()</code>.</p>
<h2 id="redismodulepoolalloc"><code>RedisModule_PoolAlloc</code></h2>
<pre class="language-"><code>void *RedisModule_PoolAlloc(RedisModuleCtx *ctx, size_t bytes);
</code></pre><p>Return heap allocated memory that will be freed automatically when the
module callback function returns. Mostly suitable for small allocations
that are short living and must be released when the callback returns
anyway. The returned memory is aligned to the architecture word size
if at least word size bytes are requested, otherwise it is just
aligned to the next power of two, so for example a 3 bytes request is
4 bytes aligned while a 2 bytes request is 2 bytes aligned.</p>
<p>There is no realloc style function since when this is needed to use the
pool allocator is not a good idea.</p>
<p>The function returns NULL if <code>bytes</code> is 0.</p>
<h2 id="redismodulegetapi"><code>RedisModule_GetApi</code></h2>
<pre class="language-"><code>int RedisModule_GetApi(const char *funcname, void **targetPtrPtr);
</code></pre><p>Lookup the requested module API and store the function pointer into the
target pointer. The function returns <code>REDISMODULE_ERR</code> if there is no such
named API, otherwise <code>REDISMODULE_OK</code>.</p>
<p>This function is not meant to be used by modules developer, it is only
used implicitly by including redismodule.h.</p>
<h2 id="redismoduleiskeyspositionrequest"><code>RedisModule_IsKeysPositionRequest</code></h2>
<pre class="language-"><code>int RedisModule_IsKeysPositionRequest(RedisModuleCtx *ctx);
</code></pre><p>Return non-zero if a module command, that was declared with the
flag &quot;getkeys-api&quot;, is called in a special way to get the keys positions
and not to get executed. Otherwise zero is returned.</p>
<h2 id="redismodulekeyatpos"><code>RedisModule_KeyAtPos</code></h2>
<pre class="language-"><code>void RedisModule_KeyAtPos(RedisModuleCtx *ctx, int pos);
</code></pre><p>When a module command is called in order to obtain the position of
keys, since it was flagged as &quot;getkeys-api&quot; during the registration,
the command implementation checks for this special call using the
<code>RedisModule_IsKeysPositionRequest()</code> API and uses this function in
order to report keys, like in the following example:</p>
<pre class="language-"><code>if (RedisModule_IsKeysPositionRequest(ctx)) {
    RedisModule_KeyAtPos(ctx,1);
    RedisModule_KeyAtPos(ctx,2);
}
</code></pre><p> Note: in the example below the get keys API would not be needed since
 keys are at fixed positions. This interface is only used for commands
 with a more complex structure.</p>
<h2 id="redismodulecreatecommand"><code>RedisModule_CreateCommand</code></h2>
<pre class="language-"><code>int RedisModule_CreateCommand(RedisModuleCtx *ctx, const char *name, RedisModuleCmdFunc cmdfunc, const char *strflags, int firstkey, int lastkey, int keystep);
</code></pre><p>Register a new command in the Redis server, that will be handled by
calling the function pointer &apos;func&apos; using the RedisModule calling
convention. The function returns <code>REDISMODULE_ERR</code> if the specified command
name is already busy or a set of invalid flags were passed, otherwise
<code>REDISMODULE_OK</code> is returned and the new command is registered.</p>
<p>This function must be called during the initialization of the module
inside the <code>RedisModule_OnLoad()</code> function. Calling this function outside
of the initialization function is not defined.</p>
<p>The command function type is the following:</p>
<pre class="language-"><code> int MyCommand_RedisCommand(RedisModuleCtx *ctx, RedisModuleString **argv, int argc);
</code></pre><p>And is supposed to always return <code>REDISMODULE_OK</code>.</p>
<p>The set of flags &apos;strflags&apos; specify the behavior of the command, and should
be passed as a C string composed of space separated words, like for
example &quot;write deny-oom&quot;. The set of flags are:</p>
<ul>
<li><strong>&quot;write&quot;</strong>:     The command may modify the data set (it may also read<pre class="language-"><code>             from it).
</code></pre></li>
<li><strong>&quot;readonly&quot;</strong>:  The command returns data from keys but never writes.</li>
<li><strong>&quot;admin&quot;</strong>:     The command is an administrative command (may change<pre class="language-"><code>             replication or perform similar tasks).
</code></pre></li>
<li><strong>&quot;deny-oom&quot;</strong>:  The command may use additional memory and should be<pre class="language-"><code>             denied during out of memory conditions.
</code></pre></li>
<li><strong>&quot;deny-script&quot;</strong>:   Don&apos;t allow this command in Lua scripts.</li>
<li><strong>&quot;allow-loading&quot;</strong>: Allow this command while the server is loading data.<pre class="language-"><code>                 Only commands not interacting with the data set
                 should be allowed to run in this mode. If not sure
                 don&apos;t use this flag.
</code></pre></li>
<li><strong>&quot;pubsub&quot;</strong>:    The command publishes things on Pub/Sub channels.</li>
<li><strong>&quot;random&quot;</strong>:    The command may have different outputs even starting<pre class="language-"><code>             from the same input arguments and key values.
</code></pre></li>
<li><strong>&quot;allow-stale&quot;</strong>: The command is allowed to run on slaves that don&apos;t<pre class="language-"><code>               serve stale data. Don&apos;t use if you don&apos;t know what
               this means.
</code></pre></li>
<li><strong>&quot;no-monitor&quot;</strong>: Don&apos;t propagate the command on monitor. Use this if<pre class="language-"><code>              the command has sensible data among the arguments.
</code></pre></li>
<li><strong>&quot;no-slowlog&quot;</strong>: Don&apos;t log this command in the slowlog. Use this if<pre class="language-"><code>              the command has sensible data among the arguments.
</code></pre></li>
<li><strong>&quot;fast&quot;</strong>:      The command time complexity is not greater<pre class="language-"><code>             than O(log(N)) where N is the size of the collection or
             anything else representing the normal scalability
             issue with the command.
</code></pre></li>
<li><strong>&quot;getkeys-api&quot;</strong>: The command implements the interface to return<pre class="language-"><code>               the arguments that are keys. Used when start/stop/step
               is not enough because of the command syntax.
</code></pre></li>
<li><strong>&quot;no-cluster&quot;</strong>: The command should not register in Redis Cluster<pre class="language-"><code>              since is not designed to work with it because, for
              example, is unable to report the position of the
              keys, programmatically creates key names, or any
              other reason.
</code></pre></li>
<li><strong>&quot;no-auth&quot;</strong>:    This command can be run by an un-authenticated client.<pre class="language-"><code>              Normally this is used by a command that is used
              to authenticate a client. 
</code></pre></li>
<li><strong>&quot;may-replicate&quot;</strong>: This command may generate replication traffic, even<pre class="language-"><code>                 though it&apos;s not a write command.
</code></pre></li>
</ul>
<h2 id="redismodulesetmoduleattribs"><code>RedisModule_SetModuleAttribs</code></h2>
<pre class="language-"><code>void RedisModule_SetModuleAttribs(RedisModuleCtx *ctx, const char *name, int ver, int apiver);
</code></pre><p>Called by <code>RedisModule_Init()</code> to setup the <code>ctx-&gt;module</code> structure.</p>
<p>This is an internal function, Redis modules developers don&apos;t need
to use it.</p>
<h2 id="redismoduleismodulenamebusy"><code>RedisModule_IsModuleNameBusy</code></h2>
<pre class="language-"><code>int RedisModule_IsModuleNameBusy(const char *name);
</code></pre><p>Return non-zero if the module name is busy.
Otherwise zero is returned.</p>
<h2 id="redismodulemilliseconds"><code>RedisModule_Milliseconds</code></h2>
<pre class="language-"><code>long long RedisModule_Milliseconds(void);
</code></pre><p>Return the current UNIX time in milliseconds.</p>
<h2 id="redismoduleblockedclientmeasuretimestart"><code>RedisModule_BlockedClientMeasureTimeStart</code></h2>
<pre class="language-"><code>int RedisModule_BlockedClientMeasureTimeStart(RedisModuleBlockedClient *bc);
</code></pre><p>Mark a point in time that will be used as the start time to calculate
the elapsed execution time when <code>RedisModule_BlockedClientMeasureTimeEnd()</code> is called.
Within the same command, you can call multiple times
<code>RedisModule_BlockedClientMeasureTimeStart()</code> and <code>RedisModule_BlockedClientMeasureTimeEnd()</code>
to accummulate indepedent time intervals to the background duration.
This method always return <code>REDISMODULE_OK</code>.</p>
<h2 id="redismoduleblockedclientmeasuretimeend"><code>RedisModule_BlockedClientMeasureTimeEnd</code></h2>
<pre class="language-"><code>int RedisModule_BlockedClientMeasureTimeEnd(RedisModuleBlockedClient *bc);
</code></pre><p>Mark a point in time that will be used as the end time
to calculate the elapsed execution time.
On success <code>REDISMODULE_OK</code> is returned.
This method only returns <code>REDISMODULE_ERR</code> if no start time was
previously defined ( meaning <code>RedisModule_BlockedClientMeasureTimeStart</code> was not called ).</p>
<h2 id="redismodulesetmoduleoptions"><code>RedisModule_SetModuleOptions</code></h2>
<pre class="language-"><code>void RedisModule_SetModuleOptions(RedisModuleCtx *ctx, int options);
</code></pre><p>Set flags defining capabilities or behavior bit flags.</p>
<p><code>REDISMODULE_OPTIONS_HANDLE_IO_ERRORS</code>:
Generally, modules don&apos;t need to bother with this, as the process will just
terminate if a read error happens, however, setting this flag would allow
repl-diskless-load to work if enabled.
The module should use <code>RedisModule_IsIOError</code> after reads, before using the
data that was read, and in case of error, propagate it upwards, and also be
able to release the partially populated value and all it&apos;s allocations.</p>
<h2 id="redismodulesignalmodifiedkey"><code>RedisModule_SignalModifiedKey</code></h2>
<pre class="language-"><code>int RedisModule_SignalModifiedKey(RedisModuleCtx *ctx, RedisModuleString *keyname);
</code></pre><p>Signals that the key is modified from user&apos;s perspective (i.e. invalidate WATCH
and client side caching).</p>
<h2 id="redismoduleautomemory"><code>RedisModule_AutoMemory</code></h2>
<pre class="language-"><code>void RedisModule_AutoMemory(RedisModuleCtx *ctx);
</code></pre><p>Enable automatic memory management.</p>
<p>The function must be called as the first function of a command implementation
that wants to use automatic memory.</p>
<p>When enabled, automatic memory management tracks and automatically frees
keys, call replies and Redis string objects once the command returns. In most
cases this eliminates the need of calling the following functions:</p>
<ol>
<li><code>RedisModule_CloseKey()</code></li>
<li><code>RedisModule_FreeCallReply()</code></li>
<li><code>RedisModule_FreeString()</code></li>
</ol>
<p>These functions can still be used with automatic memory management enabled,
to optimize loops that make numerous allocations for example.</p>
<h2 id="redismodulecreatestring"><code>RedisModule_CreateString</code></h2>
<pre class="language-"><code>RedisModuleString *RedisModule_CreateString(RedisModuleCtx *ctx, const char *ptr, size_t len);
</code></pre><p>Create a new module string object. The returned string must be freed
with <code>RedisModule_FreeString()</code>, unless automatic memory is enabled.</p>
<p>The string is created by copying the <code>len</code> bytes starting
at <code>ptr</code>. No reference is retained to the passed buffer.</p>
<p>The module context &apos;ctx&apos; is optional and may be NULL if you want to create
a string out of the context scope. However in that case, the automatic
memory management will not be available, and the string memory must be
managed manually.</p>
<h2 id="redismodulecreatestringprintf"><code>RedisModule_CreateStringPrintf</code></h2>
<pre class="language-"><code>RedisModuleString *RedisModule_CreateStringPrintf(RedisModuleCtx *ctx, const char *fmt, ...);
</code></pre><p>Create a new module string object from a printf format and arguments.
The returned string must be freed with <code>RedisModule_FreeString()</code>, unless
automatic memory is enabled.</p>
<p>The string is created using the sds formatter function <code>sdscatvprintf()</code>.</p>
<p>The passed context &apos;ctx&apos; may be NULL if necessary, see the
<code>RedisModule_CreateString()</code> documentation for more info.</p>
<h2 id="redismodulecreatestringfromlonglong"><code>RedisModule_CreateStringFromLongLong</code></h2>
<pre class="language-"><code>RedisModuleString *RedisModule_CreateStringFromLongLong(RedisModuleCtx *ctx, long long ll);
</code></pre><p>Like <code>RedisModule_CreatString()</code>, but creates a string starting from a long long
integer instead of taking a buffer and its length.</p>
<p>The returned string must be released with <code>RedisModule_FreeString()</code> or by
enabling automatic memory management.</p>
<p>The passed context &apos;ctx&apos; may be NULL if necessary, see the
<code>RedisModule_CreateString()</code> documentation for more info.</p>
<h2 id="redismodulecreatestringfromdouble"><code>RedisModule_CreateStringFromDouble</code></h2>
<pre class="language-"><code>RedisModuleString *RedisModule_CreateStringFromDouble(RedisModuleCtx *ctx, double d);
</code></pre><p>Like <code>RedisModule_CreatString()</code>, but creates a string starting from a double
instead of taking a buffer and its length.</p>
<p>The returned string must be released with <code>RedisModule_FreeString()</code> or by
enabling automatic memory management.</p>
<h2 id="redismodulecreatestringfromlongdouble"><code>RedisModule_CreateStringFromLongDouble</code></h2>
<pre class="language-"><code>RedisModuleString *RedisModule_CreateStringFromLongDouble(RedisModuleCtx *ctx, long double ld, int humanfriendly);
</code></pre><p>Like <code>RedisModule_CreatString()</code>, but creates a string starting from a long
double.</p>
<p>The returned string must be released with <code>RedisModule_FreeString()</code> or by
enabling automatic memory management.</p>
<p>The passed context &apos;ctx&apos; may be NULL if necessary, see the
<code>RedisModule_CreateString()</code> documentation for more info.</p>
<h2 id="redismodulecreatestringfromstring"><code>RedisModule_CreateStringFromString</code></h2>
<pre class="language-"><code>RedisModuleString *RedisModule_CreateStringFromString(RedisModuleCtx *ctx, const RedisModuleString *str);
</code></pre><p>Like <code>RedisModule_CreatString()</code>, but creates a string starting from another
<code>RedisModuleString</code>.</p>
<p>The returned string must be released with <code>RedisModule_FreeString()</code> or by
enabling automatic memory management.</p>
<p>The passed context &apos;ctx&apos; may be NULL if necessary, see the
<code>RedisModule_CreateString()</code> documentation for more info.</p>
<h2 id="redismodulecreatestringfromstreamid"><code>RedisModule_CreateStringFromStreamID</code></h2>
<pre class="language-"><code>RedisModuleString *RedisModule_CreateStringFromStreamID(RedisModuleCtx *ctx, const RedisModuleStreamID *id);
</code></pre><p>Creates a string from a stream ID. The returned string must be released with
<code>RedisModule_FreeString()</code>, unless automatic memory is enabled.</p>
<p>The passed context <code>ctx</code> may be NULL if necessary. See the
<code>RedisModule_CreateString()</code> documentation for more info.</p>
<h2 id="redismodulefreestring"><code>RedisModule_FreeString</code></h2>
<pre class="language-"><code>void RedisModule_FreeString(RedisModuleCtx *ctx, RedisModuleString *str);
</code></pre><p>Free a module string object obtained with one of the Redis modules API calls
that return new string objects.</p>
<p>It is possible to call this function even when automatic memory management
is enabled. In that case the string will be released ASAP and removed
from the pool of string to release at the end.</p>
<p>If the string was created with a NULL context &apos;ctx&apos;, it is also possible to
pass ctx as NULL when releasing the string (but passing a context will not
create any issue). Strings created with a context should be freed also passing
the context, so if you want to free a string out of context later, make sure
to create it using a NULL context.</p>
<h2 id="redismoduleretainstring"><code>RedisModule_RetainString</code></h2>
<pre class="language-"><code>void RedisModule_RetainString(RedisModuleCtx *ctx, RedisModuleString *str);
</code></pre><p>Every call to this function, will make the string &apos;str&apos; requiring
an additional call to <code>RedisModule_FreeString()</code> in order to really
free the string. Note that the automatic freeing of the string obtained
enabling modules automatic memory management counts for one
<code>RedisModule_FreeString()</code> call (it is just executed automatically).</p>
<p>Normally you want to call this function when, at the same time
the following conditions are true:</p>
<ol>
<li>You have automatic memory management enabled.</li>
<li>You want to create string objects.</li>
<li>Those string objects you create need to live <em>after</em> the callback
function(for example a command implementation) creating them returns.</li>
</ol>
<p>Usually you want this in order to store the created string object
into your own data structure, for example when implementing a new data
type.</p>
<p>Note that when memory management is turned off, you don&apos;t need
any call to RetainString() since creating a string will always result
into a string that lives after the callback function returns, if
no FreeString() call is performed.</p>
<p>It is possible to call this function with a NULL context.</p>
<h2 id="redismoduleholdstring"><code>RedisModule_HoldString</code></h2>
<pre class="language-"><code>RedisModuleString* RedisModule_HoldString(RedisModuleCtx *ctx, RedisModuleString *str);
</code></pre><p>This function can be used instead of <code>RedisModule_RetainString()</code>.
The main difference between the two is that this function will always
succeed, whereas <code>RedisModule_RetainString()</code> may fail because of an
assertion.</p>
<p>The function returns a pointer to <code>RedisModuleString</code>, which is owned
by the caller. It requires a call to <code>RedisModule_FreeString()</code> to free
the string when automatic memory management is disabled for the context.
When automatic memory management is enabled, you can either call
<code>RedisModule_FreeString()</code> or let the automation free it.</p>
<p>This function is more efficient than <code>RedisModule_CreateStringFromString()</code>
because whenever possible, it avoids copying the underlying
<code>RedisModuleString</code>. The disadvantage of using this function is that it
might not be possible to use <code>RedisModule_StringAppendBuffer()</code> on the
returned <code>RedisModuleString</code>.</p>
<p>It is possible to call this function with a NULL context.</p>
<h2 id="redismodulestringptrlen"><code>RedisModule_StringPtrLen</code></h2>
<pre class="language-"><code>const char *RedisModule_StringPtrLen(const RedisModuleString *str, size_t *len);
</code></pre><p>Given a string module object, this function returns the string pointer
and length of the string. The returned pointer and length should only
be used for read only accesses and never modified.</p>
<h2 id="redismodulestringtolonglong"><code>RedisModule_StringToLongLong</code></h2>
<pre class="language-"><code>int RedisModule_StringToLongLong(const RedisModuleString *str, long long *ll);
</code></pre><p>Convert the string into a long long integer, storing it at <code>*ll</code>.
Returns <code>REDISMODULE_OK</code> on success. If the string can&apos;t be parsed
as a valid, strict long long (no spaces before/after), <code>REDISMODULE_ERR</code>
is returned.</p>
<h2 id="redismodulestringtodouble"><code>RedisModule_StringToDouble</code></h2>
<pre class="language-"><code>int RedisModule_StringToDouble(const RedisModuleString *str, double *d);
</code></pre><p>Convert the string into a double, storing it at <code>*d</code>.
Returns <code>REDISMODULE_OK</code> on success or <code>REDISMODULE_ERR</code> if the string is
not a valid string representation of a double value.</p>
<h2 id="redismodulestringtolongdouble"><code>RedisModule_StringToLongDouble</code></h2>
<pre class="language-"><code>int RedisModule_StringToLongDouble(const RedisModuleString *str, long double *ld);
</code></pre><p>Convert the string into a long double, storing it at <code>*ld</code>.
Returns <code>REDISMODULE_OK</code> on success or <code>REDISMODULE_ERR</code> if the string is
not a valid string representation of a double value.</p>
<h2 id="redismodulestringtostreamid"><code>RedisModule_StringToStreamID</code></h2>
<pre class="language-"><code>int RedisModule_StringToStreamID(const RedisModuleString *str, RedisModuleStreamID *id);
</code></pre><p>Convert the string into a stream ID, storing it at <code>*id</code>.
Returns <code>REDISMODULE_OK</code> on success and returns <code>REDISMODULE_ERR</code> if the string
is not a valid string representation of a stream ID. The special IDs &quot;+&quot; and
&quot;-&quot; are allowed.</p>
<p><code>RedisModuleStreamID</code> is a struct with two 64-bit fields, which is used in
stream functions and defined as</p>
<pre class="language-"><code>typedef struct RedisModuleStreamID {
    uint64_t ms;
    uint64_t seq;
} RedisModuleStreamID;
</code></pre><h2 id="redismodulestringcompare"><code>RedisModule_StringCompare</code></h2>
<pre class="language-"><code>int RedisModule_StringCompare(RedisModuleString *a, RedisModuleString *b);
</code></pre><p>Compare two string objects, returning -1, 0 or 1 respectively if
a &lt; b, a == b, a &gt; b. Strings are compared byte by byte as two
binary blobs without any encoding care / collation attempt.</p>
<h2 id="redismodulestringappendbuffer"><code>RedisModule_StringAppendBuffer</code></h2>
<pre class="language-"><code>int RedisModule_StringAppendBuffer(RedisModuleCtx *ctx, RedisModuleString *str, const char *buf, size_t len);
</code></pre><p>Append the specified buffer to the string &apos;str&apos;. The string must be a
string created by the user that is referenced only a single time, otherwise
<code>REDISMODULE_ERR</code> is returned and the operation is not performed.</p>
<h2 id="redismodulewrongarity"><code>RedisModule_WrongArity</code></h2>
<pre class="language-"><code>int RedisModule_WrongArity(RedisModuleCtx *ctx);
</code></pre><p>Send an error about the number of arguments given to the command,
citing the command name in the error message. Returns <code>REDISMODULE_OK</code>.</p>
<p>Example:</p>
<pre class="language-"><code>if (argc != 3) return RedisModule_WrongArity(ctx);
</code></pre><h2 id="redismodulereplywithlonglong"><code>RedisModule_ReplyWithLongLong</code></h2>
<pre class="language-"><code>int RedisModule_ReplyWithLongLong(RedisModuleCtx *ctx, long long ll);
</code></pre><p>Send an integer reply to the client, with the specified long long value.
The function always returns <code>REDISMODULE_OK</code>.</p>
<h2 id="redismodulereplywitherror"><code>RedisModule_ReplyWithError</code></h2>
<pre class="language-"><code>int RedisModule_ReplyWithError(RedisModuleCtx *ctx, const char *err);
</code></pre><p>Reply with the error &apos;err&apos;.</p>
<p>Note that &apos;err&apos; must contain all the error, including
the initial error code. The function only provides the initial &quot;-&quot;, so
the usage is, for example:</p>
<pre class="language-"><code>RedisModule_ReplyWithError(ctx,&quot;ERR Wrong Type&quot;);
</code></pre><p>and not just:</p>
<pre class="language-"><code>RedisModule_ReplyWithError(ctx,&quot;Wrong Type&quot;);
</code></pre><p>The function always returns <code>REDISMODULE_OK</code>.</p>
<h2 id="redismodulereplywithsimplestring"><code>RedisModule_ReplyWithSimpleString</code></h2>
<pre class="language-"><code>int RedisModule_ReplyWithSimpleString(RedisModuleCtx *ctx, const char *msg);
</code></pre><p>Reply with a simple string (<code>+... \r\n</code> in RESP protocol). This replies
are suitable only when sending a small non-binary string with small
overhead, like &quot;OK&quot; or similar replies.</p>
<p>The function always returns <code>REDISMODULE_OK</code>.</p>
<h2 id="redismodulereplywitharray"><code>RedisModule_ReplyWithArray</code></h2>
<pre class="language-"><code>int RedisModule_ReplyWithArray(RedisModuleCtx *ctx, long len);
</code></pre><p>Reply with an array type of &apos;len&apos; elements. However &apos;len&apos; other calls
to <code>ReplyWith*</code> style functions must follow in order to emit the elements
of the array.</p>
<p>When producing arrays with a number of element that is not known beforehand
the function can be called with the special count
<code>REDISMODULE_POSTPONED_ARRAY_LEN</code>, and the actual number of elements can be
later set with <code>RedisModule_ReplySetArrayLength()</code> (which will set the
latest &quot;open&quot; count if there are multiple ones).</p>
<p>The function always returns <code>REDISMODULE_OK</code>.</p>
<h2 id="redismodulereplywithnullarray"><code>RedisModule_ReplyWithNullArray</code></h2>
<pre class="language-"><code>int RedisModule_ReplyWithNullArray(RedisModuleCtx *ctx);
</code></pre><p>Reply to the client with a null array, simply null in RESP3 
null array in RESP2.</p>
<p>The function always returns <code>REDISMODULE_OK</code>.</p>
<h2 id="redismodulereplywithemptyarray"><code>RedisModule_ReplyWithEmptyArray</code></h2>
<pre class="language-"><code>int RedisModule_ReplyWithEmptyArray(RedisModuleCtx *ctx);
</code></pre><p>Reply to the client with an empty array. </p>
<p>The function always returns <code>REDISMODULE_OK</code>.</p>
<h2 id="redismodulereplysetarraylength"><code>RedisModule_ReplySetArrayLength</code></h2>
<pre class="language-"><code>void RedisModule_ReplySetArrayLength(RedisModuleCtx *ctx, long len);
</code></pre><p>When <code>RedisModule_ReplyWithArray()</code> is used with the argument
<code>REDISMODULE_POSTPONED_ARRAY_LEN</code>, because we don&apos;t know beforehand the number
of items we are going to output as elements of the array, this function
will take care to set the array length.</p>
<p>Since it is possible to have multiple array replies pending with unknown
length, this function guarantees to always set the latest array length
that was created in a postponed way.</p>
<p>For example in order to output an array like [1,[10,20,30]] we
could write:</p>
<pre class="language-"><code> RedisModule_ReplyWithArray(ctx,REDISMODULE_POSTPONED_ARRAY_LEN);
 RedisModule_ReplyWithLongLong(ctx,1);
 RedisModule_ReplyWithArray(ctx,REDISMODULE_POSTPONED_ARRAY_LEN);
 RedisModule_ReplyWithLongLong(ctx,10);
 RedisModule_ReplyWithLongLong(ctx,20);
 RedisModule_ReplyWithLongLong(ctx,30);
 RedisModule_ReplySetArrayLength(ctx,3); // Set len of 10,20,30 array.
 RedisModule_ReplySetArrayLength(ctx,2); // Set len of top array
</code></pre><p>Note that in the above example there is no reason to postpone the array
length, since we produce a fixed number of elements, but in the practice
the code may use an iterator or other ways of creating the output so
that is not easy to calculate in advance the number of elements.</p>
<h2 id="redismodulereplywithstringbuffer"><code>RedisModule_ReplyWithStringBuffer</code></h2>
<pre class="language-"><code>int RedisModule_ReplyWithStringBuffer(RedisModuleCtx *ctx, const char *buf, size_t len);
</code></pre><p>Reply with a bulk string, taking in input a C buffer pointer and length.</p>
<p>The function always returns <code>REDISMODULE_OK</code>.</p>
<h2 id="redismodulereplywithcstring"><code>RedisModule_ReplyWithCString</code></h2>
<pre class="language-"><code>int RedisModule_ReplyWithCString(RedisModuleCtx *ctx, const char *buf);
</code></pre><p>Reply with a bulk string, taking in input a C buffer pointer that is
assumed to be null-terminated.</p>
<p>The function always returns <code>REDISMODULE_OK</code>.</p>
<h2 id="redismodulereplywithstring"><code>RedisModule_ReplyWithString</code></h2>
<pre class="language-"><code>int RedisModule_ReplyWithString(RedisModuleCtx *ctx, RedisModuleString *str);
</code></pre><p>Reply with a bulk string, taking in input a <code>RedisModuleString</code> object.</p>
<p>The function always returns <code>REDISMODULE_OK</code>.</p>
<h2 id="redismodulereplywithemptystring"><code>RedisModule_ReplyWithEmptyString</code></h2>
<pre class="language-"><code>int RedisModule_ReplyWithEmptyString(RedisModuleCtx *ctx);
</code></pre><p>Reply with an empty string.</p>
<p>The function always returns <code>REDISMODULE_OK</code>.</p>
<h2 id="redismodulereplywithverbatimstring"><code>RedisModule_ReplyWithVerbatimString</code></h2>
<pre class="language-"><code>int RedisModule_ReplyWithVerbatimString(RedisModuleCtx *ctx, const char *buf, size_t len);
</code></pre><p>Reply with a binary safe string, which should not be escaped or filtered 
taking in input a C buffer pointer and length.</p>
<p>The function always returns <code>REDISMODULE_OK</code>.</p>
<h2 id="redismodulereplywithnull"><code>RedisModule_ReplyWithNull</code></h2>
<pre class="language-"><code>int RedisModule_ReplyWithNull(RedisModuleCtx *ctx);
</code></pre><p>Reply to the client with a NULL.</p>
<p>The function always returns <code>REDISMODULE_OK</code>.</p>
<h2 id="redismodulereplywithcallreply"><code>RedisModule_ReplyWithCallReply</code></h2>
<pre class="language-"><code>int RedisModule_ReplyWithCallReply(RedisModuleCtx *ctx, RedisModuleCallReply *reply);
</code></pre><p>Reply exactly what a Redis command returned us with <code>RedisModule_Call()</code>.
This function is useful when we use <code>RedisModule_Call()</code> in order to
execute some command, as we want to reply to the client exactly the
same reply we obtained by the command.</p>
<p>The function always returns <code>REDISMODULE_OK</code>.</p>
<h2 id="redismodulereplywithdouble"><code>RedisModule_ReplyWithDouble</code></h2>
<pre class="language-"><code>int RedisModule_ReplyWithDouble(RedisModuleCtx *ctx, double d);
</code></pre><p>Send a string reply obtained converting the double &apos;d&apos; into a bulk string.
This function is basically equivalent to converting a double into
a string into a C buffer, and then calling the function
<code>RedisModule_ReplyWithStringBuffer()</code> with the buffer and length.</p>
<p>The function always returns <code>REDISMODULE_OK</code>.</p>
<h2 id="redismodulereplywithlongdouble"><code>RedisModule_ReplyWithLongDouble</code></h2>
<pre class="language-"><code>int RedisModule_ReplyWithLongDouble(RedisModuleCtx *ctx, long double ld);
</code></pre><p>Send a string reply obtained converting the long double &apos;ld&apos; into a bulk
string. This function is basically equivalent to converting a long double
into a string into a C buffer, and then calling the function
<code>RedisModule_ReplyWithStringBuffer()</code> with the buffer and length.
The double string uses human readable formatting (see
<code>addReplyHumanLongDouble</code> in networking.c).</p>
<p>The function always returns <code>REDISMODULE_OK</code>.</p>
<h2 id="redismodulereplicate"><code>RedisModule_Replicate</code></h2>
<pre class="language-"><code>int RedisModule_Replicate(RedisModuleCtx *ctx, const char *cmdname, const char *fmt, ...);
</code></pre><p>Replicate the specified command and arguments to slaves and AOF, as effect
of execution of the calling command implementation.</p>
<p>The replicated commands are always wrapped into the MULTI/EXEC that
contains all the commands replicated in a given module command
execution. However the commands replicated with <code>RedisModule_Call()</code>
are the first items, the ones replicated with <code>RedisModule_Replicate()</code>
will all follow before the EXEC.</p>
<p>Modules should try to use one interface or the other.</p>
<p>This command follows exactly the same interface of <code>RedisModule_Call()</code>,
so a set of format specifiers must be passed, followed by arguments
matching the provided format specifiers.</p>
<p>Please refer to <code>RedisModule_Call()</code> for more information.</p>
<p>Using the special &quot;A&quot; and &quot;R&quot; modifiers, the caller can exclude either
the AOF or the replicas from the propagation of the specified command.
Otherwise, by default, the command will be propagated in both channels.</p>
<h2 id="note-about-calling-this-function-from-a-thread-safe-context">Note about calling this function from a thread safe context:</h2>
<p>Normally when you call this function from the callback implementing a
module command, or any other callback provided by the Redis Module API,
Redis will accumulate all the calls to this function in the context of
the callback, and will propagate all the commands wrapped in a MULTI/EXEC
transaction. However when calling this function from a threaded safe context
that can live an undefined amount of time, and can be locked/unlocked in
at will, the behavior is different: MULTI/EXEC wrapper is not emitted
and the command specified is inserted in the AOF and replication stream
immediately.</p>
<h2 id="return-value">Return value</h2>
<p>The command returns <code>REDISMODULE_ERR</code> if the format specifiers are invalid
or the command name does not belong to a known command.</p>
<h2 id="redismodulereplicateverbatim"><code>RedisModule_ReplicateVerbatim</code></h2>
<pre class="language-"><code>int RedisModule_ReplicateVerbatim(RedisModuleCtx *ctx);
</code></pre><p>This function will replicate the command exactly as it was invoked
by the client. Note that this function will not wrap the command into
a MULTI/EXEC stanza, so it should not be mixed with other replication
commands.</p>
<p>Basically this form of replication is useful when you want to propagate
the command to the slaves and AOF file exactly as it was called, since
the command can just be re-executed to deterministically re-create the
new state starting from the old one.</p>
<p>The function always returns <code>REDISMODULE_OK</code>.</p>
<h2 id="redismodulegetclientid"><code>RedisModule_GetClientId</code></h2>
<pre class="language-"><code>unsigned long long RedisModule_GetClientId(RedisModuleCtx *ctx);
</code></pre><p>Return the ID of the current client calling the currently active module
command. The returned ID has a few guarantees:</p>
<ol>
<li>The ID is different for each different client, so if the same client
executes a module command multiple times, it can be recognized as
having the same ID, otherwise the ID will be different.</li>
<li>The ID increases monotonically. Clients connecting to the server later
are guaranteed to get IDs greater than any past ID previously seen.</li>
</ol>
<p>Valid IDs are from 1 to 2^64 - 1. If 0 is returned it means there is no way
to fetch the ID in the context the function was currently called.</p>
<p>After obtaining the ID, it is possible to check if the command execution
is actually happening in the context of AOF loading, using this macro:</p>
<pre class="language-"><code> if (RedisModule_IsAOFClient(RedisModule_GetClientId(ctx)) {
     // Handle it differently.
 }
</code></pre><h2 id="redismodulegetclientusernamebyid"><code>RedisModule_GetClientUserNameById</code></h2>
<pre class="language-"><code>RedisModuleString *RedisModule_GetClientUserNameById(RedisModuleCtx *ctx, uint64_t id);
</code></pre><p>Return the ACL user name used by the client with the specified client ID.
Client ID can be obtained with <code>RedisModule_GetClientId()</code> API. If the client does not
exist, NULL is returned and errno is set to ENOENT. If the client isn&apos;t 
using an ACL user, NULL is returned and errno is set to ENOTSUP</p>
<h2 id="redismodulegetclientinfobyid"><code>RedisModule_GetClientInfoById</code></h2>
<pre class="language-"><code>int RedisModule_GetClientInfoById(void *ci, uint64_t id);
</code></pre><p>Return information about the client with the specified ID (that was
previously obtained via the <code>RedisModule_GetClientId()</code> API). If the
client exists, <code>REDISMODULE_OK</code> is returned, otherwise <code>REDISMODULE_ERR</code>
is returned.</p>
<p>When the client exist and the <code>ci</code> pointer is not NULL, but points to
a structure of type <code>RedisModuleClientInfo</code>, previously initialized with
the correct <code>REDISMODULE_CLIENTINFO_INITIALIZER</code>, the structure is populated
with the following fields:</p>
<pre class="language-"><code> uint64_t flags;         // REDISMODULE_CLIENTINFO_FLAG_*
 uint64_t id;            // Client ID
 char addr[46];          // IPv4 or IPv6 address.
 uint16_t port;          // TCP port.
 uint16_t db;            // Selected DB.
</code></pre><p>Note: the client ID is useless in the context of this call, since we
      already know, however the same structure could be used in other
      contexts where we don&apos;t know the client ID, yet the same structure
      is returned.</p>
<p>With flags having the following meaning:</p>
<pre class="language-"><code>REDISMODULE_CLIENTINFO_FLAG_SSL          Client using SSL connection.
REDISMODULE_CLIENTINFO_FLAG_PUBSUB       Client in Pub/Sub mode.
REDISMODULE_CLIENTINFO_FLAG_BLOCKED      Client blocked in command.
REDISMODULE_CLIENTINFO_FLAG_TRACKING     Client with keys tracking on.
REDISMODULE_CLIENTINFO_FLAG_UNIXSOCKET   Client using unix domain socket.
REDISMODULE_CLIENTINFO_FLAG_MULTI        Client in MULTI state.
</code></pre><p>However passing NULL is a way to just check if the client exists in case
we are not interested in any additional information.</p>
<p>This is the correct usage when we want the client info structure
returned:</p>
<pre class="language-"><code> RedisModuleClientInfo ci = REDISMODULE_CLIENTINFO_INITIALIZER;
 int retval = RedisModule_GetClientInfoById(&amp;ci,client_id);
 if (retval == REDISMODULE_OK) {
     printf(&quot;Address: %s\n&quot;, ci.addr);
 }
</code></pre><h2 id="redismodulepublishmessage"><code>RedisModule_PublishMessage</code></h2>
<pre class="language-"><code>int RedisModule_PublishMessage(RedisModuleCtx *ctx, RedisModuleString *channel, RedisModuleString *message);
</code></pre><p>Publish a message to subscribers (see PUBLISH command).</p>
<h2 id="redismodulegetselecteddb"><code>RedisModule_GetSelectedDb</code></h2>
<pre class="language-"><code>int RedisModule_GetSelectedDb(RedisModuleCtx *ctx);
</code></pre><p>Return the currently selected DB.</p>
<h2 id="redismodulegetcontextflags"><code>RedisModule_GetContextFlags</code></h2>
<pre class="language-"><code>int RedisModule_GetContextFlags(RedisModuleCtx *ctx);
</code></pre><p>Return the current context&apos;s flags. The flags provide information on the
current request context (whether the client is a Lua script or in a MULTI),
and about the Redis instance in general, i.e replication and persistence.</p>
<p>It is possible to call this function even with a NULL context, however
in this case the following flags will not be reported:</p>
<ul>
<li>LUA, MULTI, REPLICATED, DIRTY (see below for more info).</li>
</ul>
<p>Available flags and their meaning:</p>
<ul>
<li><p><code>REDISMODULE_CTX_FLAGS_LUA</code>: The command is running in a Lua script</p>
</li>
<li><p><code>REDISMODULE_CTX_FLAGS_MULTI</code>: The command is running inside a transaction</p>
</li>
<li><p><code>REDISMODULE_CTX_FLAGS_REPLICATED</code>: The command was sent over the replication
link by the MASTER</p>
</li>
<li><p><code>REDISMODULE_CTX_FLAGS_MASTER</code>: The Redis instance is a master</p>
</li>
<li><p><code>REDISMODULE_CTX_FLAGS_SLAVE</code>: The Redis instance is a slave</p>
</li>
<li><p><code>REDISMODULE_CTX_FLAGS_READONLY</code>: The Redis instance is read-only</p>
</li>
<li><p><code>REDISMODULE_CTX_FLAGS_CLUSTER</code>: The Redis instance is in cluster mode</p>
</li>
<li><p><code>REDISMODULE_CTX_FLAGS_AOF</code>: The Redis instance has AOF enabled</p>
</li>
<li><p><code>REDISMODULE_CTX_FLAGS_RDB</code>: The instance has RDB enabled</p>
</li>
<li><p><code>REDISMODULE_CTX_FLAGS_MAXMEMORY</code>:  The instance has Maxmemory set</p>
</li>
<li><p><code>REDISMODULE_CTX_FLAGS_EVICT</code>:  Maxmemory is set and has an eviction
policy that may delete keys</p>
</li>
<li><p><code>REDISMODULE_CTX_FLAGS_OOM</code>: Redis is out of memory according to the
maxmemory setting.</p>
</li>
<li><p><code>REDISMODULE_CTX_FLAGS_OOM_WARNING</code>: Less than 25% of memory remains before</p>
<pre class="language-"><code>                               reaching the maxmemory level.
</code></pre></li>
<li><p><code>REDISMODULE_CTX_FLAGS_LOADING</code>: Server is loading RDB/AOF</p>
</li>
<li><p><code>REDISMODULE_CTX_FLAGS_REPLICA_IS_STALE</code>: No active link with the master.</p>
</li>
<li><p><code>REDISMODULE_CTX_FLAGS_REPLICA_IS_CONNECTING</code>: The replica is trying to</p>
<pre class="language-"><code>                                         connect with the master.
</code></pre></li>
<li><p><code>REDISMODULE_CTX_FLAGS_REPLICA_IS_TRANSFERRING</code>: Master -&gt; Replica RDB</p>
<pre class="language-"><code>                                           transfer is in progress.
</code></pre></li>
<li><p><code>REDISMODULE_CTX_FLAGS_REPLICA_IS_ONLINE</code>: The replica has an active link</p>
<pre class="language-"><code>                                     with its master. This is the
                                     contrary of STALE state.
</code></pre></li>
<li><p><code>REDISMODULE_CTX_FLAGS_ACTIVE_CHILD</code>: There is currently some background</p>
<pre class="language-"><code>                                process active (RDB, AUX or module).
</code></pre></li>
<li><p><code>REDISMODULE_CTX_FLAGS_MULTI_DIRTY</code>: The next EXEC will fail due to dirty</p>
<pre class="language-"><code>                               CAS (touched keys).
</code></pre></li>
<li><p><code>REDISMODULE_CTX_FLAGS_IS_CHILD</code>: Redis is currently running inside</p>
<pre class="language-"><code>                            background child process.
</code></pre></li>
</ul>
<h2 id="redismoduleavoidreplicatraffic"><code>RedisModule_AvoidReplicaTraffic</code></h2>
<pre class="language-"><code>int RedisModule_AvoidReplicaTraffic();
</code></pre><p>Returns true if some client sent the CLIENT PAUSE command to the server or
if Redis Cluster is doing a manual failover, and paused tue clients.
This is needed when we have a master with replicas, and want to write,
without adding further data to the replication channel, that the replicas
replication offset, match the one of the master. When this happens, it is
safe to failover the master without data loss.</p>
<p>However modules may generate traffic by calling <code>RedisModule_Call()</code> with
the &quot;!&quot; flag, or by calling <code>RedisModule_Replicate()</code>, in a context outside
commands execution, for instance in timeout callbacks, threads safe
contexts, and so forth. When modules will generate too much traffic, it
will be hard for the master and replicas offset to match, because there
is more data to send in the replication channel.</p>
<p>So modules may want to try to avoid very heavy background work that has
the effect of creating data to the replication channel, when this function
returns true. This is mostly useful for modules that have background
garbage collection tasks, or that do writes and replicate such writes
periodically in timer callbacks or other periodic callbacks.</p>
<h2 id="redismoduleselectdb"><code>RedisModule_SelectDb</code></h2>
<pre class="language-"><code>int RedisModule_SelectDb(RedisModuleCtx *ctx, int newid);
</code></pre><p>Change the currently selected DB. Returns an error if the id
is out of range.</p>
<p>Note that the client will retain the currently selected DB even after
the Redis command implemented by the module calling this function
returns.</p>
<p>If the module command wishes to change something in a different DB and
returns back to the original one, it should call <code>RedisModule_GetSelectedDb()</code>
before in order to restore the old DB number before returning.</p>
<h2 id="redismoduleopenkey"><code>RedisModule_OpenKey</code></h2>
<pre class="language-"><code>void *RedisModule_OpenKey(RedisModuleCtx *ctx, robj *keyname, int mode);
</code></pre><p>Return an handle representing a Redis key, so that it is possible
to call other APIs with the key handle as argument to perform
operations on the key.</p>
<p>The return value is the handle representing the key, that must be
closed with <code>RedisModule_CloseKey()</code>.</p>
<p>If the key does not exist and WRITE mode is requested, the handle
is still returned, since it is possible to perform operations on
a yet not existing key (that will be created, for example, after
a list push operation). If the mode is just READ instead, and the
key does not exist, NULL is returned. However it is still safe to
call <code>RedisModule_CloseKey()</code> and <code>RedisModule_KeyType()</code> on a NULL
value.</p>
<h2 id="redismoduleclosekey"><code>RedisModule_CloseKey</code></h2>
<pre class="language-"><code>void RedisModule_CloseKey(RedisModuleKey *key);
</code></pre><p>Close a key handle.</p>
<h2 id="redismodulekeytype"><code>RedisModule_KeyType</code></h2>
<pre class="language-"><code>int RedisModule_KeyType(RedisModuleKey *key);
</code></pre><p>Return the type of the key. If the key pointer is NULL then
<code>REDISMODULE_KEYTYPE_EMPTY</code> is returned.</p>
<h2 id="redismodulevaluelength"><code>RedisModule_ValueLength</code></h2>
<pre class="language-"><code>size_t RedisModule_ValueLength(RedisModuleKey *key);
</code></pre><p>Return the length of the value associated with the key.
For strings this is the length of the string. For all the other types
is the number of elements (just counting keys for hashes).</p>
<p>If the key pointer is NULL or the key is empty, zero is returned.</p>
<h2 id="redismoduledeletekey"><code>RedisModule_DeleteKey</code></h2>
<pre class="language-"><code>int RedisModule_DeleteKey(RedisModuleKey *key);
</code></pre><p>If the key is open for writing, remove it, and setup the key to
accept new writes as an empty key (that will be created on demand).
On success <code>REDISMODULE_OK</code> is returned. If the key is not open for
writing <code>REDISMODULE_ERR</code> is returned.</p>
<h2 id="redismoduleunlinkkey"><code>RedisModule_UnlinkKey</code></h2>
<pre class="language-"><code>int RedisModule_UnlinkKey(RedisModuleKey *key);
</code></pre><p>If the key is open for writing, unlink it (that is delete it in a
non-blocking way, not reclaiming memory immediately) and setup the key to
accept new writes as an empty key (that will be created on demand).
On success <code>REDISMODULE_OK</code> is returned. If the key is not open for
writing <code>REDISMODULE_ERR</code> is returned.</p>
<h2 id="redismodulegetexpire"><code>RedisModule_GetExpire</code></h2>
<pre class="language-"><code>mstime_t RedisModule_GetExpire(RedisModuleKey *key);
</code></pre><p>Return the key expire value, as milliseconds of remaining TTL.
If no TTL is associated with the key or if the key is empty,
<code>REDISMODULE_NO_EXPIRE</code> is returned.</p>
<h2 id="redismodulesetexpire"><code>RedisModule_SetExpire</code></h2>
<pre class="language-"><code>int RedisModule_SetExpire(RedisModuleKey *key, mstime_t expire);
</code></pre><p>Set a new expire for the key. If the special expire
<code>REDISMODULE_NO_EXPIRE</code> is set, the expire is cancelled if there was
one (the same as the PERSIST command).</p>
<p>Note that the expire must be provided as a positive integer representing
the number of milliseconds of TTL the key should have.</p>
<p>The function returns <code>REDISMODULE_OK</code> on success or <code>REDISMODULE_ERR</code> if
the key was not open for writing or is an empty key.</p>
<h2 id="redismoduleresetdataset"><code>RedisModule_ResetDataset</code></h2>
<pre class="language-"><code>void RedisModule_ResetDataset(int restart_aof, int async);
</code></pre><p>Performs similar operation to FLUSHALL, and optionally start a new AOF file (if enabled)
If <code>restart_aof</code> is true, you must make sure the command that triggered this call is not
propagated to the AOF file.
When async is set to true, db contents will be freed by a background thread.</p>
<h2 id="redismoduledbsize"><code>RedisModule_DbSize</code></h2>
<pre class="language-"><code>unsigned long long RedisModule_DbSize(RedisModuleCtx *ctx);
</code></pre><p>Returns the number of keys in the current db.</p>
<h2 id="redismodulerandomkey"><code>RedisModule_RandomKey</code></h2>
<pre class="language-"><code>RedisModuleString *RedisModule_RandomKey(RedisModuleCtx *ctx);
</code></pre><p>Returns a name of a random key, or NULL if current db is empty.</p>
<h2 id="redismodulestringset"><code>RedisModule_StringSet</code></h2>
<pre class="language-"><code>int RedisModule_StringSet(RedisModuleKey *key, RedisModuleString *str);
</code></pre><p>If the key is open for writing, set the specified string &apos;str&apos; as the
value of the key, deleting the old value if any.
On success <code>REDISMODULE_OK</code> is returned. If the key is not open for
writing or there is an active iterator, <code>REDISMODULE_ERR</code> is returned.</p>
<h2 id="redismodulestringdma"><code>RedisModule_StringDMA</code></h2>
<pre class="language-"><code>char *RedisModule_StringDMA(RedisModuleKey *key, size_t *len, int mode);
</code></pre><p>Prepare the key associated string value for DMA access, and returns
a pointer and size (by reference), that the user can use to read or
modify the string in-place accessing it directly via pointer.</p>
<p>The &apos;mode&apos; is composed by bitwise OR-ing the following flags:</p>
<pre class="language-"><code>REDISMODULE_READ -- Read access
REDISMODULE_WRITE -- Write access
</code></pre><p>If the DMA is not requested for writing, the pointer returned should
only be accessed in a read-only fashion.</p>
<p>On error (wrong type) NULL is returned.</p>
<p>DMA access rules:</p>
<ol>
<li><p>No other key writing function should be called since the moment
the pointer is obtained, for all the time we want to use DMA access
to read or modify the string.</p>
</li>
<li><p>Each time <code>RedisModule_StringTruncate()</code> is called, to continue with the DMA
access, <code>RedisModule_StringDMA()</code> should be called again to re-obtain
a new pointer and length.</p>
</li>
<li><p>If the returned pointer is not NULL, but the length is zero, no
byte can be touched (the string is empty, or the key itself is empty)
so a <code>RedisModule_StringTruncate()</code> call should be used if there is to enlarge
the string, and later call StringDMA() again to get the pointer.</p>
</li>
</ol>
<h2 id="redismodulestringtruncate"><code>RedisModule_StringTruncate</code></h2>
<pre class="language-"><code>int RedisModule_StringTruncate(RedisModuleKey *key, size_t newlen);
</code></pre><p>If the string is open for writing and is of string type, resize it, padding
with zero bytes if the new length is greater than the old one.</p>
<p>After this call, <code>RedisModule_StringDMA()</code> must be called again to continue
DMA access with the new pointer.</p>
<p>The function returns <code>REDISMODULE_OK</code> on success, and <code>REDISMODULE_ERR</code> on
error, that is, the key is not open for writing, is not a string
or resizing for more than 512 MB is requested.</p>
<p>If the key is empty, a string key is created with the new string value
unless the new length value requested is zero.</p>
<h2 id="redismodulelistpush"><code>RedisModule_ListPush</code></h2>
<pre class="language-"><code>int RedisModule_ListPush(RedisModuleKey *key, int where, RedisModuleString *ele);
</code></pre><p>Push an element into a list, on head or tail depending on &apos;where&apos; argument.
If the key pointer is about an empty key opened for writing, the key
is created. On error (key opened for read-only operations or of the wrong
type) <code>REDISMODULE_ERR</code> is returned, otherwise <code>REDISMODULE_OK</code> is returned.</p>
<h2 id="redismodulelistpop"><code>RedisModule_ListPop</code></h2>
<pre class="language-"><code>RedisModuleString *RedisModule_ListPop(RedisModuleKey *key, int where);
</code></pre><p>Pop an element from the list, and returns it as a module string object
that the user should be free with <code>RedisModule_FreeString()</code> or by enabling
automatic memory. &apos;where&apos; specifies if the element should be popped from
head or tail. The command returns NULL if:</p>
<ol>
<li>The list is empty.</li>
<li>The key was not open for writing.</li>
<li>The key is not a list.</li>
</ol>
<h2 id="redismodulezsetadd"><code>RedisModule_ZsetAdd</code></h2>
<pre class="language-"><code>int RedisModule_ZsetAdd(RedisModuleKey *key, double score, RedisModuleString *ele, int *flagsptr);
</code></pre><p>Add a new element into a sorted set, with the specified &apos;score&apos;.
If the element already exists, the score is updated.</p>
<p>A new sorted set is created at value if the key is an empty open key
setup for writing.</p>
<p>Additional flags can be passed to the function via a pointer, the flags
are both used to receive input and to communicate state when the function
returns. &apos;flagsptr&apos; can be NULL if no special flags are used.</p>
<p>The input flags are:</p>
<pre class="language-"><code>REDISMODULE_ZADD_XX: Element must already exist. Do nothing otherwise.
REDISMODULE_ZADD_NX: Element must not exist. Do nothing otherwise.
REDISMODULE_ZADD_GT: If element exists, new score must be greater than the current score. 
                     Do nothing otherwise. Can optionally be combined with XX.
REDISMODULE_ZADD_LT: If element exists, new score must be less than the current score.
                     Do nothing otherwise. Can optionally be combined with XX.
</code></pre><p>The output flags are:</p>
<pre class="language-"><code>REDISMODULE_ZADD_ADDED: The new element was added to the sorted set.
REDISMODULE_ZADD_UPDATED: The score of the element was updated.
REDISMODULE_ZADD_NOP: No operation was performed because XX or NX flags.
</code></pre><p>On success the function returns <code>REDISMODULE_OK</code>. On the following errors
<code>REDISMODULE_ERR</code> is returned:</p>
<ul>
<li>The key was not opened for writing.</li>
<li>The key is of the wrong type.</li>
<li>&apos;score&apos; double value is not a number (NaN).</li>
</ul>
<h2 id="redismodulezsetincrby"><code>RedisModule_ZsetIncrby</code></h2>
<pre class="language-"><code>int RedisModule_ZsetIncrby(RedisModuleKey *key, double score, RedisModuleString *ele, int *flagsptr, double *newscore);
</code></pre><p>This function works exactly like <code>RedisModule_ZsetAdd()</code>, but instead of setting
a new score, the score of the existing element is incremented, or if the
element does not already exist, it is added assuming the old score was
zero.</p>
<p>The input and output flags, and the return value, have the same exact
meaning, with the only difference that this function will return
<code>REDISMODULE_ERR</code> even when &apos;score&apos; is a valid double number, but adding it
to the existing score results into a NaN (not a number) condition.</p>
<p>This function has an additional field &apos;newscore&apos;, if not NULL is filled
with the new score of the element after the increment, if no error
is returned.</p>
<h2 id="redismodulezsetrem"><code>RedisModule_ZsetRem</code></h2>
<pre class="language-"><code>int RedisModule_ZsetRem(RedisModuleKey *key, RedisModuleString *ele, int *deleted);
</code></pre><p>Remove the specified element from the sorted set.
The function returns <code>REDISMODULE_OK</code> on success, and <code>REDISMODULE_ERR</code>
on one of the following conditions:</p>
<ul>
<li>The key was not opened for writing.</li>
<li>The key is of the wrong type.</li>
</ul>
<p>The return value does NOT indicate the fact the element was really
removed (since it existed) or not, just if the function was executed
with success.</p>
<p>In order to know if the element was removed, the additional argument
&apos;deleted&apos; must be passed, that populates the integer by reference
setting it to 1 or 0 depending on the outcome of the operation.
The &apos;deleted&apos; argument can be NULL if the caller is not interested
to know if the element was really removed.</p>
<p>Empty keys will be handled correctly by doing nothing.</p>
<h2 id="redismodulezsetscore"><code>RedisModule_ZsetScore</code></h2>
<pre class="language-"><code>int RedisModule_ZsetScore(RedisModuleKey *key, RedisModuleString *ele, double *score);
</code></pre><p>On success retrieve the double score associated at the sorted set element
&apos;ele&apos; and returns <code>REDISMODULE_OK</code>. Otherwise <code>REDISMODULE_ERR</code> is returned
to signal one of the following conditions:</p>
<ul>
<li>There is no such element &apos;ele&apos; in the sorted set.</li>
<li>The key is not a sorted set.</li>
<li>The key is an open empty key.</li>
</ul>
<h2 id="redismodulezsetrangestop"><code>RedisModule_ZsetRangeStop</code></h2>
<pre class="language-"><code>void RedisModule_ZsetRangeStop(RedisModuleKey *key);
</code></pre><p>Stop a sorted set iteration.</p>
<h2 id="redismodulezsetrangeendreached"><code>RedisModule_ZsetRangeEndReached</code></h2>
<pre class="language-"><code>int RedisModule_ZsetRangeEndReached(RedisModuleKey *key);
</code></pre><p>Return the &quot;End of range&quot; flag value to signal the end of the iteration.</p>
<h2 id="redismodulezsetfirstinscorerange"><code>RedisModule_ZsetFirstInScoreRange</code></h2>
<pre class="language-"><code>int RedisModule_ZsetFirstInScoreRange(RedisModuleKey *key, double min, double max, int minex, int maxex);
</code></pre><p>Setup a sorted set iterator seeking the first element in the specified
range. Returns <code>REDISMODULE_OK</code> if the iterator was correctly initialized
otherwise <code>REDISMODULE_ERR</code> is returned in the following conditions:</p>
<ol>
<li>The value stored at key is not a sorted set or the key is empty.</li>
</ol>
<p>The range is specified according to the two double values &apos;min&apos; and &apos;max&apos;.
Both can be infinite using the following two macros:</p>
<ul>
<li><code>REDISMODULE_POSITIVE_INFINITE</code> for positive infinite value</li>
<li><code>REDISMODULE_NEGATIVE_INFINITE</code> for negative infinite value</li>
</ul>
<p>&apos;minex&apos; and &apos;maxex&apos; parameters, if true, respectively setup a range
where the min and max value are exclusive (not included) instead of
inclusive.</p>
<h2 id="redismodulezsetlastinscorerange"><code>RedisModule_ZsetLastInScoreRange</code></h2>
<pre class="language-"><code>int RedisModule_ZsetLastInScoreRange(RedisModuleKey *key, double min, double max, int minex, int maxex);
</code></pre><p>Exactly like <code>RedisModule_ZsetFirstInScoreRange()</code> but the last element of
the range is selected for the start of the iteration instead.</p>
<h2 id="redismodulezsetfirstinlexrange"><code>RedisModule_ZsetFirstInLexRange</code></h2>
<pre class="language-"><code>int RedisModule_ZsetFirstInLexRange(RedisModuleKey *key, RedisModuleString *min, RedisModuleString *max);
</code></pre><p>Setup a sorted set iterator seeking the first element in the specified
lexicographical range. Returns <code>REDISMODULE_OK</code> if the iterator was correctly
initialized otherwise <code>REDISMODULE_ERR</code> is returned in the
following conditions:</p>
<ol>
<li>The value stored at key is not a sorted set or the key is empty.</li>
<li>The lexicographical range &apos;min&apos; and &apos;max&apos; format is invalid.</li>
</ol>
<p>&apos;min&apos; and &apos;max&apos; should be provided as two <code>RedisModuleString</code> objects
in the same format as the parameters passed to the ZRANGEBYLEX command.
The function does not take ownership of the objects, so they can be released
ASAP after the iterator is setup.</p>
<h2 id="redismodulezsetlastinlexrange"><code>RedisModule_ZsetLastInLexRange</code></h2>
<pre class="language-"><code>int RedisModule_ZsetLastInLexRange(RedisModuleKey *key, RedisModuleString *min, RedisModuleString *max);
</code></pre><p>Exactly like <code>RedisModule_ZsetFirstInLexRange()</code> but the last element of
the range is selected for the start of the iteration instead.</p>
<h2 id="redismodulezsetrangecurrentelement"><code>RedisModule_ZsetRangeCurrentElement</code></h2>
<pre class="language-"><code>RedisModuleString *RedisModule_ZsetRangeCurrentElement(RedisModuleKey *key, double *score);
</code></pre><p>Return the current sorted set element of an active sorted set iterator
or NULL if the range specified in the iterator does not include any
element.</p>
<h2 id="redismodulezsetrangenext"><code>RedisModule_ZsetRangeNext</code></h2>
<pre class="language-"><code>int RedisModule_ZsetRangeNext(RedisModuleKey *key);
</code></pre><p>Go to the next element of the sorted set iterator. Returns 1 if there was
a next element, 0 if we are already at the latest element or the range
does not include any item at all.</p>
<h2 id="redismodulezsetrangeprev"><code>RedisModule_ZsetRangePrev</code></h2>
<pre class="language-"><code>int RedisModule_ZsetRangePrev(RedisModuleKey *key);
</code></pre><p>Go to the previous element of the sorted set iterator. Returns 1 if there was
a previous element, 0 if we are already at the first element or the range
does not include any item at all.</p>
<h2 id="redismodulehashset"><code>RedisModule_HashSet</code></h2>
<pre class="language-"><code>int RedisModule_HashSet(RedisModuleKey *key, int flags, ...);
</code></pre><p>Set the field of the specified hash field to the specified value.
If the key is an empty key open for writing, it is created with an empty
hash value, in order to set the specified field.</p>
<p>The function is variadic and the user must specify pairs of field
names and values, both as <code>RedisModuleString</code> pointers (unless the
CFIELD option is set, see later). At the end of the field/value-ptr pairs, 
NULL must be specified as last argument to signal the end of the arguments 
in the variadic function.</p>
<p>Example to set the hash argv[1] to the value argv[2]:</p>
<pre class="language-"><code> RedisModule_HashSet(key,REDISMODULE_HASH_NONE,argv[1],argv[2],NULL);
</code></pre><p>The function can also be used in order to delete fields (if they exist)
by setting them to the specified value of <code>REDISMODULE_HASH_DELETE</code>:</p>
<pre class="language-"><code> RedisModule_HashSet(key,REDISMODULE_HASH_NONE,argv[1],
                     REDISMODULE_HASH_DELETE,NULL);
</code></pre><p>The behavior of the command changes with the specified flags, that can be
set to <code>REDISMODULE_HASH_NONE</code> if no special behavior is needed.</p>
<pre class="language-"><code>REDISMODULE_HASH_NX: The operation is performed only if the field was not
                     already existing in the hash.
REDISMODULE_HASH_XX: The operation is performed only if the field was
                     already existing, so that a new value could be
                     associated to an existing filed, but no new fields
                     are created.
REDISMODULE_HASH_CFIELDS: The field names passed are null terminated C
                          strings instead of RedisModuleString objects.
REDISMODULE_HASH_COUNT_ALL: Include the number of inserted fields in the
                            returned number, in addition to the number of
                            updated and deleted fields. (Added in Redis
                            6.2.)
</code></pre><p>Unless NX is specified, the command overwrites the old field value with
the new one.</p>
<p>When using <code>REDISMODULE_HASH_CFIELDS</code>, field names are reported using
normal C strings, so for example to delete the field &quot;foo&quot; the following
code can be used:</p>
<pre class="language-"><code> RedisModule_HashSet(key,REDISMODULE_HASH_CFIELDS,&quot;foo&quot;,
                     REDISMODULE_HASH_DELETE,NULL);
</code></pre><p>Return value:</p>
<p>The number of fields existing in the hash prior to the call, which have been
updated (its old value has been replaced by a new value) or deleted. If the
flag <code>REDISMODULE_HASH_COUNT_ALL</code> is set, insterted fields not previously
existing in the hash are also counted.</p>
<p>If the return value is zero, <code>errno</code> is set (since Redis 6.2) as follows:</p>
<ul>
<li>EINVAL if any unknown flags are set or if key is NULL.</li>
<li>ENOTSUP if the key is associated with a non Hash value.</li>
<li>EBADF if the key was not opened for writing.</li>
<li>ENOENT if no fields were counted as described under Return value above.
This is not actually an error. The return value can be zero if all fields
were just created and the <code>COUNT_ALL</code> flag was unset, or if changes were held
back due to the NX and XX flags.</li>
</ul>
<p>NOTICE: The return value semantics of this function are very different
between Redis 6.2 and older versions. Modules that use it should determine
the Redis version and handle it accordingly.</p>
<h2 id="redismodulehashget"><code>RedisModule_HashGet</code></h2>
<pre class="language-"><code>int RedisModule_HashGet(RedisModuleKey *key, int flags, ...);
</code></pre><p>Get fields from an hash value. This function is called using a variable
number of arguments, alternating a field name (as a <code>RedisModuleString</code>
pointer) with a pointer to a <code>RedisModuleString</code> pointer, that is set to the
value of the field if the field exists, or NULL if the field does not exist.
At the end of the field/value-ptr pairs, NULL must be specified as last
argument to signal the end of the arguments in the variadic function.</p>
<p>This is an example usage:</p>
<pre class="language-"><code> RedisModuleString *first, *second;
 RedisModule_HashGet(mykey,REDISMODULE_HASH_NONE,argv[1],&amp;first,
                     argv[2],&amp;second,NULL);
</code></pre><p>As with <code>RedisModule_HashSet()</code> the behavior of the command can be specified
passing flags different than <code>REDISMODULE_HASH_NONE</code>:</p>
<p><code>REDISMODULE_HASH_CFIELDS</code>: field names as null terminated C strings.</p>
<p><code>REDISMODULE_HASH_EXISTS</code>: instead of setting the value of the field
expecting a <code>RedisModuleString</code> pointer to pointer, the function just
reports if the field exists or not and expects an integer pointer
as the second element of each pair.</p>
<p>Example of <code>REDISMODULE_HASH_CFIELDS</code>:</p>
<pre class="language-"><code> RedisModuleString *username, *hashedpass;
 RedisModule_HashGet(mykey,REDISMODULE_HASH_CFIELDS,&quot;username&quot;,&amp;username,&quot;hp&quot;,&amp;hashedpass, NULL);
</code></pre><p>Example of <code>REDISMODULE_HASH_EXISTS</code>:</p>
<pre class="language-"><code> int exists;
 RedisModule_HashGet(mykey,REDISMODULE_HASH_EXISTS,argv[1],&amp;exists,NULL);
</code></pre><p>The function returns <code>REDISMODULE_OK</code> on success and <code>REDISMODULE_ERR</code> if
the key is not an hash value.</p>
<p>Memory management:</p>
<p>The returned <code>RedisModuleString</code> objects should be released with
<code>RedisModule_FreeString()</code>, or by enabling automatic memory management.</p>
<h2 id="redismodulestreamadd"><code>RedisModule_StreamAdd</code></h2>
<pre class="language-"><code>int RedisModule_StreamAdd(RedisModuleKey *key, int flags, RedisModuleStreamID *id, RedisModuleString **argv, long numfields);
</code></pre><p>Adds an entry to a stream. Like XADD without trimming.</p>
<ul>
<li><code>key</code>: The key where the stream is (or will be) stored</li>
<li><code>flags</code>: A bit field of<ul>
<li><code>REDISMODULE_STREAM_ADD_AUTOID</code>: Assign a stream ID automatically, like
<code>*</code> in the XADD command.</li>
</ul>
</li>
<li><code>id</code>: If the <code>AUTOID</code> flag is set, this is where the assigned ID is
returned. Can be NULL if <code>AUTOID</code> is set, if you don&apos;t care to receive the
ID. If <code>AUTOID</code> is not set, this is the requested ID.</li>
<li><code>argv</code>: A pointer to an array of size <code>numfields * 2</code> containing the
fields and values.</li>
<li><code>numfields</code>: The number of field-value pairs in <code>argv</code>.</li>
</ul>
<p>Returns <code>REDISMODULE_OK</code> if an entry has been added. On failure,
<code>REDISMODULE_ERR</code> is returned and <code>errno</code> is set as follows:</p>
<ul>
<li>EINVAL if called with invalid arguments</li>
<li>ENOTSUP if the key refers to a value of a type other than stream</li>
<li>EBADF if the key was not opened for writing</li>
<li>EDOM if the given ID was 0-0 or not greater than all other IDs in the
stream (only if the AUTOID flag is unset)</li>
<li>EFBIG if the stream has reached the last possible ID</li>
</ul>
<h2 id="redismodulestreamdelete"><code>RedisModule_StreamDelete</code></h2>
<pre class="language-"><code>int RedisModule_StreamDelete(RedisModuleKey *key, RedisModuleStreamID *id);
</code></pre><p>Deletes an entry from a stream.</p>
<ul>
<li><code>key</code>: A key opened for writing, with no stream iterator started.</li>
<li><code>id</code>: The stream ID of the entry to delete.</li>
</ul>
<p>Returns <code>REDISMODULE_OK</code> on success. On failure, <code>REDISMODULE_ERR</code> is returned
and <code>errno</code> is set as follows:</p>
<ul>
<li>EINVAL if called with invalid arguments</li>
<li>ENOTSUP if the key refers to a value of a type other than stream or if the
key is empty</li>
<li>EBADF if the key was not opened for writing or if a stream iterator is
associated with the key</li>
<li>ENOENT if no entry with the given stream ID exists</li>
</ul>
<p>See also <code>RedisModule_StreamIteratorDelete()</code> for deleting the current entry while
iterating using a stream iterator.</p>
<h2 id="redismodulestreamiteratorstart"><code>RedisModule_StreamIteratorStart</code></h2>
<pre class="language-"><code>int RedisModule_StreamIteratorStart(RedisModuleKey *key, int flags, RedisModuleStreamID *start, RedisModuleStreamID *end);
</code></pre><p>Sets up a stream iterator.</p>
<ul>
<li><code>key</code>: The stream key opened for reading using <code>RedisModule_OpenKey()</code>.</li>
<li><code>flags</code>:<ul>
<li><code>REDISMODULE_STREAM_ITERATOR_EXCLUSIVE</code>: Don&apos;t include <code>start</code> and <code>end</code>
in the iterated range.</li>
<li><code>REDISMODULE_STREAM_ITERATOR_REVERSE</code>: Iterate in reverse order, starting
from the <code>end</code> of the range.</li>
</ul>
</li>
<li><code>start</code>: The lower bound of the range. Use NULL for the beginning of the
stream.</li>
<li><code>end</code>: The upper bound of the range. Use NULL for the end of the stream.</li>
</ul>
<p>Returns <code>REDISMODULE_OK</code> on success. On failure, <code>REDISMODULE_ERR</code> is returned
and <code>errno</code> is set as follows:</p>
<ul>
<li>EINVAL if called with invalid arguments</li>
<li>ENOTSUP if the key refers to a value of a type other than stream or if the
key is empty</li>
<li>EBADF if the key was not opened for writing or if a stream iterator is
already associated with the key</li>
<li>EDOM if <code>start</code> or <code>end</code> is outside the valid range</li>
</ul>
<p>Returns <code>REDISMODULE_OK</code> on success and <code>REDISMODULE_ERR</code> if the key doesn&apos;t
refer to a stream or if invalid arguments were given.</p>
<p>The stream IDs are retrieved using <code>RedisModule_StreamIteratorNextID()</code> and
for each stream ID, the fields and values are retrieved using
<code>RedisModule_StreamIteratorNextField()</code>. The iterator is freed by calling
<code>RedisModule_StreamIteratorStop()</code>.</p>
<p>Example (error handling omitted):</p>
<pre class="language-"><code>RedisModule_StreamIteratorStart(key, 0, startid_ptr, endid_ptr);
RedisModuleStreamID id;
long numfields;
while (RedisModule_StreamIteratorNextID(key, &amp;id, &amp;numfields) ==
       REDISMODULE_OK) {
    RedisModuleString *field, *value;
    while (RedisModule_StreamIteratorNextField(key, &amp;field, &amp;value) ==
           REDISMODULE_OK) {
        //
        // ... Do stuff ...
        //
        RedisModule_Free(field);
        RedisModule_Free(value);
    }
}
RedisModule_StreamIteratorStop(key);
</code></pre><h2 id="redismodulestreamiteratorstop"><code>RedisModule_StreamIteratorStop</code></h2>
<pre class="language-"><code>int RedisModule_StreamIteratorStop(RedisModuleKey *key);
</code></pre><p>Stops a stream iterator created using <code>RedisModule_StreamIteratorStart()</code> and
reclaims its memory.</p>
<p>Returns <code>REDISMODULE_OK</code> on success. On failure, <code>REDISMODULE_ERR</code> is returned
and <code>errno</code> is set as follows:</p>
<ul>
<li>EINVAL if called with a NULL key</li>
<li>ENOTSUP if the key refers to a value of a type other than stream or if the
key is empty</li>
<li>EBADF if the key was not opened for writing or if no stream iterator is
associated with the key</li>
</ul>
<h2 id="redismodulestreamiteratornextid"><code>RedisModule_StreamIteratorNextID</code></h2>
<pre class="language-"><code>int RedisModule_StreamIteratorNextID(RedisModuleKey *key, RedisModuleStreamID *id, long *numfields);
</code></pre><p>Finds the next stream entry and returns its stream ID and the number of
fields.</p>
<ul>
<li><code>key</code>: Key for which a stream iterator has been started using
<code>RedisModule_StreamIteratorStart()</code>.</li>
<li><code>id</code>: The stream ID returned. NULL if you don&apos;t care.</li>
<li><code>numfields</code>: The number of fields in the found stream entry. NULL if you
don&apos;t care.</li>
</ul>
<p>Returns <code>REDISMODULE_OK</code> and sets <code>*id</code> and <code>*numfields</code> if an entry was found.
On failure, <code>REDISMODULE_ERR</code> is returned and <code>errno</code> is set as follows:</p>
<ul>
<li>EINVAL if called with a NULL key</li>
<li>ENOTSUP if the key refers to a value of a type other than stream or if the
key is empty</li>
<li>EBADF if no stream iterator is associated with the key</li>
<li>ENOENT if there are no more entries in the range of the iterator</li>
</ul>
<p>In practice, if <code>RedisModule_StreamIteratorNextID()</code> is called after a successful call
to <code>RedisModule_StreamIteratorStart()</code> and with the same key, it is safe to assume that
an <code>REDISMODULE_ERR</code> return value means that there are no more entries.</p>
<p>Use <code>RedisModule_StreamIteratorNextField()</code> to retrieve the fields and values.
See the example at <code>RedisModule_StreamIteratorStart()</code>.</p>
<h2 id="redismodulestreamiteratornextfield"><code>RedisModule_StreamIteratorNextField</code></h2>
<pre class="language-"><code>int RedisModule_StreamIteratorNextField(RedisModuleKey *key, RedisModuleString **field_ptr, RedisModuleString **value_ptr);
</code></pre><p>Retrieves the next field of the current stream ID and its corresponding value
in a stream iteration. This function should be called repeatedly after calling
<code>RedisModule_StreamIteratorNextID()</code> to fetch each field-value pair.</p>
<ul>
<li><code>key</code>: Key where a stream iterator has been started.</li>
<li><code>field_ptr</code>: This is where the field is returned.</li>
<li><code>value_ptr</code>: This is where the value is returned.</li>
</ul>
<p>Returns <code>REDISMODULE_OK</code> and points <code>*field_ptr</code> and <code>*value_ptr</code> to freshly
allocated <code>RedisModuleString</code> objects. The string objects are freed
automatically when the callback finishes if automatic memory is enabled. On
failure, <code>REDISMODULE_ERR</code> is returned and <code>errno</code> is set as follows:</p>
<ul>
<li>EINVAL if called with a NULL key</li>
<li>ENOTSUP if the key refers to a value of a type other than stream or if the
key is empty</li>
<li>EBADF if no stream iterator is associated with the key</li>
<li>ENOENT if there are no more fields in the current stream entry</li>
</ul>
<p>In practice, if <code>RedisModule_StreamIteratorNextField()</code> is called after a successful
call to <code>RedisModule_StreamIteratorNextID()</code> and with the same key, it is safe to assume
that an <code>REDISMODULE_ERR</code> return value means that there are no more fields.</p>
<p>See the example at <code>RedisModule_StreamIteratorStart()</code>.</p>
<h2 id="redismodulestreamiteratordelete"><code>RedisModule_StreamIteratorDelete</code></h2>
<pre class="language-"><code>int RedisModule_StreamIteratorDelete(RedisModuleKey *key);
</code></pre><p>Deletes the current stream entry while iterating.</p>
<p>This function can be called after <code>RedisModule_StreamIteratorNextID()</code> or after any
calls to <code>RedisModule_StreamIteratorNextField()</code>.</p>
<p>Returns <code>REDISMODULE_OK</code> on success. On failure, <code>REDISMODULE_ERR</code> is returned
and <code>errno</code> is set as follows:</p>
<ul>
<li>EINVAL if key is NULL</li>
<li>ENOTSUP if the key is empty or is of another type than stream</li>
<li>EBADF if the key is not opened for writing, if no iterator has been started</li>
<li>ENOENT if the iterator has no current stream entry</li>
</ul>
<h2 id="redismodulestreamtrimbylength"><code>RedisModule_StreamTrimByLength</code></h2>
<pre class="language-"><code>long long RedisModule_StreamTrimByLength(RedisModuleKey *key, int flags, long long length);
</code></pre><p>Trim a stream by length, similar to XTRIM with MAXLEN.</p>
<ul>
<li><code>key</code>: Key opened for writing.</li>
<li><code>flags</code>: A bitfield of<ul>
<li><code>REDISMODULE_STREAM_TRIM_APPROX</code>: Trim less if it improves performance,
like XTRIM with <code>~</code>.</li>
</ul>
</li>
<li><code>length</code>: The number of stream entries to keep after trimming.</li>
</ul>
<p>Returns the number of entries deleted. On failure, a negative value is
returned and <code>errno</code> is set as follows:</p>
<ul>
<li>EINVAL if called with invalid arguments</li>
<li>ENOTSUP if the key is empty or of a type other than stream</li>
<li>EBADF if the key is not opened for writing</li>
</ul>
<h2 id="redismodulestreamtrimbyid"><code>RedisModule_StreamTrimByID</code></h2>
<pre class="language-"><code>long long RedisModule_StreamTrimByID(RedisModuleKey *key, int flags, RedisModuleStreamID *id);
</code></pre><p>Trim a stream by ID, similar to XTRIM with MINID.</p>
<ul>
<li><code>key</code>: Key opened for writing.</li>
<li><code>flags</code>: A bitfield of<ul>
<li><code>REDISMODULE_STREAM_TRIM_APPROX</code>: Trim less if it improves performance,
like XTRIM with <code>~</code>.</li>
</ul>
</li>
<li><code>id</code>: The smallest stream ID to keep after trimming.</li>
</ul>
<p>Returns the number of entries deleted. On failure, a negative value is
returned and <code>errno</code> is set as follows:</p>
<ul>
<li>EINVAL if called with invalid arguments</li>
<li>ENOTSUP if the key is empty or of a type other than stream</li>
<li>EBADF if the key is not opened for writing</li>
</ul>
<h2 id="redismodulefreecallreply"><code>RedisModule_FreeCallReply</code></h2>
<pre class="language-"><code>void RedisModule_FreeCallReply(RedisModuleCallReply *reply);
</code></pre><p>Free a Call reply and all the nested replies it contains if it&apos;s an
array.</p>
<h2 id="redismodulecallreplytype"><code>RedisModule_CallReplyType</code></h2>
<pre class="language-"><code>int RedisModule_CallReplyType(RedisModuleCallReply *reply);
</code></pre><p>Return the reply type.</p>
<h2 id="redismodulecallreplylength"><code>RedisModule_CallReplyLength</code></h2>
<pre class="language-"><code>size_t RedisModule_CallReplyLength(RedisModuleCallReply *reply);
</code></pre><p>Return the reply type length, where applicable.</p>
<h2 id="redismodulecallreplyarrayelement"><code>RedisModule_CallReplyArrayElement</code></h2>
<pre class="language-"><code>RedisModuleCallReply *RedisModule_CallReplyArrayElement(RedisModuleCallReply *reply, size_t idx);
</code></pre><p>Return the &apos;idx&apos;-th nested call reply element of an array reply, or NULL
if the reply type is wrong or the index is out of range.</p>
<h2 id="redismodulecallreplyinteger"><code>RedisModule_CallReplyInteger</code></h2>
<pre class="language-"><code>long long RedisModule_CallReplyInteger(RedisModuleCallReply *reply);
</code></pre><p>Return the long long of an integer reply.</p>
<h2 id="redismodulecallreplystringptr"><code>RedisModule_CallReplyStringPtr</code></h2>
<pre class="language-"><code>const char *RedisModule_CallReplyStringPtr(RedisModuleCallReply *reply, size_t *len);
</code></pre><p>Return the pointer and length of a string or error reply.</p>
<h2 id="redismodulecreatestringfromcallreply"><code>RedisModule_CreateStringFromCallReply</code></h2>
<pre class="language-"><code>RedisModuleString *RedisModule_CreateStringFromCallReply(RedisModuleCallReply *reply);
</code></pre><p>Return a new string object from a call reply of type string, error or
integer. Otherwise (wrong reply type) return NULL.</p>
<h2 id="redismodulecall"><code>RedisModule_Call</code></h2>
<pre class="language-"><code>RedisModuleCallReply *RedisModule_Call(RedisModuleCtx *ctx, const char *cmdname, const char *fmt, ...);
</code></pre><p>Exported API to call any Redis command from modules.</p>
<ul>
<li><strong>cmdname</strong>: The Redis command to call.</li>
<li><p><strong>fmt</strong>: A format specifier string for the command&apos;s arguments. Each
of the arguments should be specified by a valid type specification. The
format specifier can also contain the modifiers <code>!</code>, <code>A</code> and <code>R</code> which
don&apos;t have a corresponding argument.</p>
<ul>
<li><code>b</code> -- The argument is a buffer and is immediately followed by another<pre class="language-"><code>   argument that is the buffer&apos;s length.
</code></pre></li>
<li><code>c</code> -- The argument is a pointer to a plain C string (null-terminated).</li>
<li><code>l</code> -- The argument is long long integer.</li>
<li><code>s</code> -- The argument is a RedisModuleString.</li>
<li><code>v</code> -- The argument(s) is a vector of RedisModuleString.</li>
<li><code>!</code> -- Sends the Redis command and its arguments to replicas and AOF.</li>
<li><code>A</code> -- Suppress AOF propagation, send only to replicas (requires <code>!</code>).</li>
<li><code>R</code> -- Suppress replicas propagation, send only to AOF (requires <code>!</code>).</li>
</ul>
</li>
<li><strong>...</strong>: The actual arguments to the Redis command.</li>
</ul>
<p>On success a <code>RedisModuleCallReply</code> object is returned, otherwise
NULL is returned and errno is set to the following values:</p>
<ul>
<li>EBADF: wrong format specifier.</li>
<li>EINVAL: wrong command arity.</li>
<li>ENOENT: command does not exist.</li>
<li>EPERM: operation in Cluster instance with key in non local slot.</li>
<li>EROFS: operation in Cluster instance when a write command is sent<pre class="language-"><code>   in a readonly state.
</code></pre></li>
<li>ENETDOWN: operation in Cluster instance when cluster is down.</li>
</ul>
<p>Example code fragment:</p>
<pre class="language-"><code> reply = RedisModule_Call(ctx,&quot;INCRBY&quot;,&quot;sc&quot;,argv[1],&quot;10&quot;);
 if (RedisModule_CallReplyType(reply) == REDISMODULE_REPLY_INTEGER) {
   long long myval = RedisModule_CallReplyInteger(reply);
   // Do something with myval.
 }
</code></pre><p>This API is documented here: <a href="https://redis.io/topics/modules-intro" target="_blank">https://redis.io/topics/modules-intro</a></p>
<h2 id="redismodulecallreplyproto"><code>RedisModule_CallReplyProto</code></h2>
<pre class="language-"><code>const char *RedisModule_CallReplyProto(RedisModuleCallReply *reply, size_t *len);
</code></pre><p>Return a pointer, and a length, to the protocol returned by the command
that returned the reply object.</p>
<h2 id="redismodulecreatedatatype"><code>RedisModule_CreateDataType</code></h2>
<pre class="language-"><code>moduleType *RedisModule_CreateDataType(RedisModuleCtx *ctx, const char *name, int encver, void *typemethods_ptr);
</code></pre><p>Register a new data type exported by the module. The parameters are the
following. Please for in depth documentation check the modules API
documentation, especially <a href="https://redis.io/topics/modules-native-types" target="_blank">https://redis.io/topics/modules-native-types</a>.</p>
<ul>
<li><strong>name</strong>: A 9 characters data type name that MUST be unique in the Redis
Modules ecosystem. Be creative... and there will be no collisions. Use
the charset A-Z a-z 9-0, plus the two &quot;-_&quot; characters. A good
idea is to use, for example <code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>typename</span><span class="token punctuation">&gt;</span></span>-<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>vendor</span><span class="token punctuation">&gt;</span></span></code>. For example
&quot;tree-AntZ&quot; may mean &quot;Tree data structure by @antirez&quot;. To use both
lower case and upper case letters helps in order to prevent collisions.</li>
<li><p><strong>encver</strong>: Encoding version, which is, the version of the serialization
that a module used in order to persist data. As long as the &quot;name&quot;
matches, the RDB loading will be dispatched to the type callbacks
whatever &apos;encver&apos; is used, however the module can understand if
the encoding it must load are of an older version of the module.
For example the module &quot;tree-AntZ&quot; initially used encver=0. Later
after an upgrade, it started to serialize data in a different format
and to register the type with encver=1. However this module may
still load old data produced by an older version if the <code>rdb_load</code>
callback is able to check the encver value and act accordingly.
The encver must be a positive value between 0 and 1023.</p>
</li>
<li><p><strong>typemethods_ptr</strong> is a pointer to a <code>RedisModuleTypeMethods</code> structure
that should be populated with the methods callbacks and structure
version, like in the following example:</p>
<pre class="language-"><code>  RedisModuleTypeMethods tm = {
      .version = REDISMODULE_TYPE_METHOD_VERSION,
      .rdb_load = myType_RDBLoadCallBack,
      .rdb_save = myType_RDBSaveCallBack,
      .aof_rewrite = myType_AOFRewriteCallBack,
      .free = myType_FreeCallBack,

      // Optional fields
      .digest = myType_DigestCallBack,
      .mem_usage = myType_MemUsageCallBack,
      .aux_load = myType_AuxRDBLoadCallBack,
      .aux_save = myType_AuxRDBSaveCallBack,
      .free_effort = myType_FreeEffortCallBack,
      .unlink = myType_UnlinkCallBack,
      .copy = myType_CopyCallback,
      .defrag = myType_DefragCallback
  }
</code></pre></li>
<li><p><strong>rdb_load</strong>: A callback function pointer that loads data from RDB files.</p>
</li>
<li><strong>rdb_save</strong>: A callback function pointer that saves data to RDB files.</li>
<li><strong>aof_rewrite</strong>: A callback function pointer that rewrites data as commands.</li>
<li><strong>digest</strong>: A callback function pointer that is used for <code>DEBUG DIGEST</code>.</li>
<li><strong>free</strong>: A callback function pointer that can free a type value.</li>
<li><strong>aux_save</strong>: A callback function pointer that saves out of keyspace data to RDB files.
&apos;when&apos; argument is either <code>REDISMODULE_AUX_BEFORE_RDB</code> or <code>REDISMODULE_AUX_AFTER_RDB</code>.</li>
<li><strong>aux_load</strong>: A callback function pointer that loads out of keyspace data from RDB files.
Similar to <code>aux_save</code>, returns <code>REDISMODULE_OK</code> on success, and ERR otherwise.</li>
<li><strong>free_effort</strong>: A callback function pointer that used to determine whether the module&apos;s
memory needs to be lazy reclaimed. The module should return the complexity involved by
freeing the value. for example: how many pointers are gonna be freed. Note that if it 
returns 0, we&apos;ll always do an async free.</li>
<li><strong>unlink</strong>: A callback function pointer that used to notifies the module that the key has 
been removed from the DB by redis, and may soon be freed by a background thread. Note that 
it won&apos;t be called on FLUSHALL/FLUSHDB (both sync and async), and the module can use the 
<code>RedisModuleEvent_FlushDB</code> to hook into that.</li>
<li><p><strong>copy</strong>: A callback function pointer that is used to make a copy of the specified key.
The module is expected to perform a deep copy of the specified value and return it.
In addition, hints about the names of the source and destination keys is provided.
A NULL return value is considered an error and the copy operation fails.
Note: if the target key exists and is being overwritten, the copy callback will be
called first, followed by a free callback to the value that is being replaced.</p>
</li>
<li><p><strong>defrag</strong>: A callback function pointer that is used to request the module to defrag
a key. The module should then iterate pointers and call the relevant <code>RedisModule_Defrag*()</code>
functions to defragment pointers or complex types. The module should continue
iterating as long as <code>RedisModule_DefragShouldStop()</code> returns a zero value, and return a
zero value if finished or non-zero value if more work is left to be done. If more work
needs to be done, <code>RedisModule_DefragCursorSet()</code> and <code>RedisModule_DefragCursorGet()</code> can be used to track
this work across different calls.
Normally, the defrag mechanism invokes the callback without a time limit, so
<code>RedisModule_DefragShouldStop()</code> always returns zero. The &quot;late defrag&quot; mechanism which has
a time limit and provides cursor support is used only for keys that are determined
to have significant internal complexity. To determine this, the defrag mechanism
uses the <code>free_effort</code> callback and the &apos;active-defrag-max-scan-fields&apos; config directive.
NOTE: The value is passed as a <code>void**</code> and the function is expected to update the
pointer if the top-level value pointer is defragmented and consequentially changes.</p>
</li>
</ul>
<p>Note: the module name &quot;AAAAAAAAA&quot; is reserved and produces an error, it
happens to be pretty lame as well.</p>
<p>If there is already a module registering a type with the same name,
and if the module name or encver is invalid, NULL is returned.
Otherwise the new type is registered into Redis, and a reference of
type <code>RedisModuleType</code> is returned: the caller of the function should store
this reference into a global variable to make future use of it in the
modules type API, since a single module may register multiple types.
Example code fragment:</p>
<pre class="language-"><code> static RedisModuleType *BalancedTreeType;

 int RedisModule_OnLoad(RedisModuleCtx *ctx) {
     // some code here ...
     BalancedTreeType = RM_CreateDataType(...);
 }
</code></pre><h2 id="redismodulemoduletypesetvalue"><code>RedisModule_ModuleTypeSetValue</code></h2>
<pre class="language-"><code>int RedisModule_ModuleTypeSetValue(RedisModuleKey *key, moduleType *mt, void *value);
</code></pre><p>If the key is open for writing, set the specified module type object
as the value of the key, deleting the old value if any.
On success <code>REDISMODULE_OK</code> is returned. If the key is not open for
writing or there is an active iterator, <code>REDISMODULE_ERR</code> is returned.</p>
<h2 id="redismodulemoduletypegettype"><code>RedisModule_ModuleTypeGetType</code></h2>
<pre class="language-"><code>moduleType *RedisModule_ModuleTypeGetType(RedisModuleKey *key);
</code></pre><p>Assuming <code>RedisModule_KeyType()</code> returned <code>REDISMODULE_KEYTYPE_MODULE</code> on
the key, returns the module type pointer of the value stored at key.</p>
<p>If the key is NULL, is not associated with a module type, or is empty,
then NULL is returned instead.</p>
<h2 id="redismodulemoduletypegetvalue"><code>RedisModule_ModuleTypeGetValue</code></h2>
<pre class="language-"><code>void *RedisModule_ModuleTypeGetValue(RedisModuleKey *key);
</code></pre><p>Assuming <code>RedisModule_KeyType()</code> returned <code>REDISMODULE_KEYTYPE_MODULE</code> on
the key, returns the module type low-level value stored at key, as
it was set by the user via <code>RedisModule_ModuleTypeSetValue()</code>.</p>
<p>If the key is NULL, is not associated with a module type, or is empty,
then NULL is returned instead.</p>
<h2 id="redismoduleisioerror"><code>RedisModule_IsIOError</code></h2>
<pre class="language-"><code>int RedisModule_IsIOError(RedisModuleIO *io);
</code></pre><p>Returns true if any previous IO API failed.
for <code>Load*</code> APIs the <code>REDISMODULE_OPTIONS_HANDLE_IO_ERRORS</code> flag must be set with
<code>RedisModule_SetModuleOptions</code> first.</p>
<h2 id="redismodulesaveunsigned"><code>RedisModule_SaveUnsigned</code></h2>
<pre class="language-"><code>void RedisModule_SaveUnsigned(RedisModuleIO *io, uint64_t value);
</code></pre><p>Save an unsigned 64 bit value into the RDB file. This function should only
be called in the context of the <code>rdb_save</code> method of modules implementing new
data types.</p>
<h2 id="redismoduleloadunsigned"><code>RedisModule_LoadUnsigned</code></h2>
<pre class="language-"><code>uint64_t RedisModule_LoadUnsigned(RedisModuleIO *io);
</code></pre><p>Load an unsigned 64 bit value from the RDB file. This function should only
be called in the context of the <code>rdb_load</code> method of modules implementing
new data types.</p>
<h2 id="redismodulesavesigned"><code>RedisModule_SaveSigned</code></h2>
<pre class="language-"><code>void RedisModule_SaveSigned(RedisModuleIO *io, int64_t value);
</code></pre><p>Like <code>RedisModule_SaveUnsigned()</code> but for signed 64 bit values.</p>
<h2 id="redismoduleloadsigned"><code>RedisModule_LoadSigned</code></h2>
<pre class="language-"><code>int64_t RedisModule_LoadSigned(RedisModuleIO *io);
</code></pre><p>Like <code>RedisModule_LoadUnsigned()</code> but for signed 64 bit values.</p>
<h2 id="redismodulesavestring"><code>RedisModule_SaveString</code></h2>
<pre class="language-"><code>void RedisModule_SaveString(RedisModuleIO *io, RedisModuleString *s);
</code></pre><p>In the context of the <code>rdb_save</code> method of a module type, saves a
string into the RDB file taking as input a <code>RedisModuleString</code>.</p>
<p>The string can be later loaded with <code>RedisModule_LoadString()</code> or
other Load family functions expecting a serialized string inside
the RDB file.</p>
<h2 id="redismodulesavestringbuffer"><code>RedisModule_SaveStringBuffer</code></h2>
<pre class="language-"><code>void RedisModule_SaveStringBuffer(RedisModuleIO *io, const char *str, size_t len);
</code></pre><p>Like <code>RedisModule_SaveString()</code> but takes a raw C pointer and length
as input.</p>
<h2 id="redismoduleloadstring"><code>RedisModule_LoadString</code></h2>
<pre class="language-"><code>RedisModuleString *RedisModule_LoadString(RedisModuleIO *io);
</code></pre><p>In the context of the <code>rdb_load</code> method of a module data type, loads a string
from the RDB file, that was previously saved with <code>RedisModule_SaveString()</code>
functions family.</p>
<p>The returned string is a newly allocated <code>RedisModuleString</code> object, and
the user should at some point free it with a call to <code>RedisModule_FreeString()</code>.</p>
<p>If the data structure does not store strings as <code>RedisModuleString</code> objects,
the similar function <code>RedisModule_LoadStringBuffer()</code> could be used instead.</p>
<h2 id="redismoduleloadstringbuffer"><code>RedisModule_LoadStringBuffer</code></h2>
<pre class="language-"><code>char *RedisModule_LoadStringBuffer(RedisModuleIO *io, size_t *lenptr);
</code></pre><p>Like <code>RedisModule_LoadString()</code> but returns an heap allocated string that
was allocated with <code>RedisModule_Alloc()</code>, and can be resized or freed with
<code>RedisModule_Realloc()</code> or <code>RedisModule_Free()</code>.</p>
<p>The size of the string is stored at &apos;*lenptr&apos; if not NULL.
The returned string is not automatically NULL terminated, it is loaded
exactly as it was stored inside the RDB file.</p>
<h2 id="redismodulesavedouble"><code>RedisModule_SaveDouble</code></h2>
<pre class="language-"><code>void RedisModule_SaveDouble(RedisModuleIO *io, double value);
</code></pre><p>In the context of the <code>rdb_save</code> method of a module data type, saves a double
value to the RDB file. The double can be a valid number, a NaN or infinity.
It is possible to load back the value with <code>RedisModule_LoadDouble()</code>.</p>
<h2 id="redismoduleloaddouble"><code>RedisModule_LoadDouble</code></h2>
<pre class="language-"><code>double RedisModule_LoadDouble(RedisModuleIO *io);
</code></pre><p>In the context of the <code>rdb_save</code> method of a module data type, loads back the
double value saved by <code>RedisModule_SaveDouble()</code>.</p>
<h2 id="redismodulesavefloat"><code>RedisModule_SaveFloat</code></h2>
<pre class="language-"><code>void RedisModule_SaveFloat(RedisModuleIO *io, float value);
</code></pre><p>In the context of the <code>rdb_save</code> method of a module data type, saves a float
value to the RDB file. The float can be a valid number, a NaN or infinity.
It is possible to load back the value with <code>RedisModule_LoadFloat()</code>.</p>
<h2 id="redismoduleloadfloat"><code>RedisModule_LoadFloat</code></h2>
<pre class="language-"><code>float RedisModule_LoadFloat(RedisModuleIO *io);
</code></pre><p>In the context of the <code>rdb_save</code> method of a module data type, loads back the
float value saved by <code>RedisModule_SaveFloat()</code>.</p>
<h2 id="redismodulesavelongdouble"><code>RedisModule_SaveLongDouble</code></h2>
<pre class="language-"><code>void RedisModule_SaveLongDouble(RedisModuleIO *io, long double value);
</code></pre><p>In the context of the <code>rdb_save</code> method of a module data type, saves a long double
value to the RDB file. The double can be a valid number, a NaN or infinity.
It is possible to load back the value with <code>RedisModule_LoadLongDouble()</code>.</p>
<h2 id="redismoduleloadlongdouble"><code>RedisModule_LoadLongDouble</code></h2>
<pre class="language-"><code>long double RedisModule_LoadLongDouble(RedisModuleIO *io);
</code></pre><p>In the context of the <code>rdb_save</code> method of a module data type, loads back the
long double value saved by <code>RedisModule_SaveLongDouble()</code>.</p>
<h2 id="redismoduledigestaddstringbuffer"><code>RedisModule_DigestAddStringBuffer</code></h2>
<pre class="language-"><code>void RedisModule_DigestAddStringBuffer(RedisModuleDigest *md, unsigned char *ele, size_t len);
</code></pre><p>Add a new element to the digest. This function can be called multiple times
one element after the other, for all the elements that constitute a given
data structure. The function call must be followed by the call to
<code>RedisModule_DigestEndSequence</code> eventually, when all the elements that are
always in a given order are added. See the Redis Modules data types
documentation for more info. However this is a quick example that uses Redis
data types as an example.</p>
<p>To add a sequence of unordered elements (for example in the case of a Redis
Set), the pattern to use is:</p>
<pre class="language-"><code>foreach element {
    AddElement(element);
    EndSequence();
}
</code></pre><p>Because Sets are not ordered, so every element added has a position that
does not depend from the other. However if instead our elements are
ordered in pairs, like field-value pairs of an Hash, then one should
use:</p>
<pre class="language-"><code>foreach key,value {
    AddElement(key);
    AddElement(value);
    EndSquence();
}
</code></pre><p>Because the key and value will be always in the above order, while instead
the single key-value pairs, can appear in any position into a Redis hash.</p>
<p>A list of ordered elements would be implemented with:</p>
<pre class="language-"><code>foreach element {
    AddElement(element);
}
EndSequence();
</code></pre><h2 id="redismoduledigestaddlonglong"><code>RedisModule_DigestAddLongLong</code></h2>
<pre class="language-"><code>void RedisModule_DigestAddLongLong(RedisModuleDigest *md, long long ll);
</code></pre><p>Like <code>RedisModule_DigestAddStringBuffer()</code> but takes a long long as input
that gets converted into a string before adding it to the digest.</p>
<h2 id="redismoduledigestendsequence"><code>RedisModule_DigestEndSequence</code></h2>
<pre class="language-"><code>void RedisModule_DigestEndSequence(RedisModuleDigest *md);
</code></pre><p>See the documentation for <code>RedisModule_DigestAddElement()</code>.</p>
<h2 id="redismoduleloaddatatypefromstring"><code>RedisModule_LoadDataTypeFromString</code></h2>
<pre class="language-"><code>void *RedisModule_LoadDataTypeFromString(const RedisModuleString *str, const moduleType *mt);
</code></pre><p>Decode a serialized representation of a module data type &apos;mt&apos; from string
&apos;str&apos; and return a newly allocated value, or NULL if decoding failed.</p>
<p>This call basically reuses the &apos;<code>rdb_load</code>&apos; callback which module data types
implement in order to allow a module to arbitrarily serialize/de-serialize
keys, similar to how the Redis &apos;DUMP&apos; and &apos;RESTORE&apos; commands are implemented.</p>
<p>Modules should generally use the <code>REDISMODULE_OPTIONS_HANDLE_IO_ERRORS</code> flag and
make sure the de-serialization code properly checks and handles IO errors
(freeing allocated buffers and returning a NULL).</p>
<p>If this is NOT done, Redis will handle corrupted (or just truncated) serialized
data by producing an error message and terminating the process.</p>
<h2 id="redismodulesavedatatypetostring"><code>RedisModule_SaveDataTypeToString</code></h2>
<pre class="language-"><code>RedisModuleString *RedisModule_SaveDataTypeToString(RedisModuleCtx *ctx, void *data, const moduleType *mt);
</code></pre><p>Encode a module data type &apos;mt&apos; value &apos;data&apos; into serialized form, and return it
as a newly allocated <code>RedisModuleString</code>.</p>
<p>This call basically reuses the &apos;<code>rdb_save</code>&apos; callback which module data types
implement in order to allow a module to arbitrarily serialize/de-serialize
keys, similar to how the Redis &apos;DUMP&apos; and &apos;RESTORE&apos; commands are implemented.</p>
<h2 id="redismoduleemitaof"><code>RedisModule_EmitAOF</code></h2>
<pre class="language-"><code>void RedisModule_EmitAOF(RedisModuleIO *io, const char *cmdname, const char *fmt, ...);
</code></pre><p>Emits a command into the AOF during the AOF rewriting process. This function
is only called in the context of the <code>aof_rewrite</code> method of data types exported
by a module. The command works exactly like <code>RedisModule_Call()</code> in the way
the parameters are passed, but it does not return anything as the error
handling is performed by Redis itself.</p>
<h2 id="redismodulegetkeynamefromio"><code>RedisModule_GetKeyNameFromIO</code></h2>
<pre class="language-"><code>const RedisModuleString *RedisModule_GetKeyNameFromIO(RedisModuleIO *io);
</code></pre><p>Returns a <code>RedisModuleString</code> with the name of the key currently saving or
loading, when an IO data type callback is called.  There is no guarantee
that the key name is always available, so this may return NULL.</p>
<h2 id="redismodulegetkeynamefrommodulekey"><code>RedisModule_GetKeyNameFromModuleKey</code></h2>
<pre class="language-"><code>const RedisModuleString *RedisModule_GetKeyNameFromModuleKey(RedisModuleKey *key);
</code></pre><p>Returns a <code>RedisModuleString</code> with the name of the key from <code>RedisModuleKey</code>.</p>
<h2 id="redismodulelog"><code>RedisModule_Log</code></h2>
<pre class="language-"><code>void RedisModule_Log(RedisModuleCtx *ctx, const char *levelstr, const char *fmt, ...);
</code></pre><p>Produces a log message to the standard Redis log, the format accepts
printf-alike specifiers, while level is a string describing the log
level to use when emitting the log, and must be one of the following:</p>
<ul>
<li>&quot;debug&quot;</li>
<li>&quot;verbose&quot;</li>
<li>&quot;notice&quot;</li>
<li>&quot;warning&quot;</li>
</ul>
<p>If the specified log level is invalid, verbose is used by default.
There is a fixed limit to the length of the log line this function is able
to emit, this limit is not specified but is guaranteed to be more than
a few lines of text.</p>
<p>The ctx argument may be NULL if cannot be provided in the context of the
caller for instance threads or callbacks, in which case a generic &quot;module&quot;
will be used instead of the module name.</p>
<h2 id="redismodulelogioerror"><code>RedisModule_LogIOError</code></h2>
<pre class="language-"><code>void RedisModule_LogIOError(RedisModuleIO *io, const char *levelstr, const char *fmt, ...);
</code></pre><p>Log errors from RDB / AOF serialization callbacks.</p>
<p>This function should be used when a callback is returning a critical
error to the caller since cannot load or save the data for some
critical reason.</p>
<h2 id="redismoduleassert"><code>RedisModule__Assert</code></h2>
<pre class="language-"><code>void RedisModule__Assert(const char *estr, const char *file, int line);
</code></pre><p>Redis-like assert function.</p>
<p>The macro <code>RedisModule_Assert(expression)</code> is recommended, rather than
calling this function directly.</p>
<p>A failed assertion will shut down the server and produce logging information
that looks identical to information generated by Redis itself.</p>
<h2 id="redismodulelatencyaddsample"><code>RedisModule_LatencyAddSample</code></h2>
<pre class="language-"><code>void RedisModule_LatencyAddSample(const char *event, mstime_t latency);
</code></pre><p>Allows adding event to the latency monitor to be observed by the LATENCY
command. The call is skipped if the latency is smaller than the configured
latency-monitor-threshold.</p>
<h2 id="redismoduleblockclient"><code>RedisModule_BlockClient</code></h2>
<pre class="language-"><code>RedisModuleBlockedClient *RedisModule_BlockClient(RedisModuleCtx *ctx, RedisModuleCmdFunc reply_callback, RedisModuleCmdFunc timeout_callback, void (*free_privdata)(RedisModuleCtx*,void*), long long timeout_ms);
</code></pre><p>Block a client in the context of a blocking command, returning an handle
which will be used, later, in order to unblock the client with a call to
<code>RedisModule_UnblockClient()</code>. The arguments specify callback functions
and a timeout after which the client is unblocked.</p>
<p>The callbacks are called in the following contexts:</p>
<pre class="language-"><code>reply_callback:   called after a successful RedisModule_UnblockClient()
                  call in order to reply to the client and unblock it.

timeout_callback: called when the timeout is reached in order to send an
                  error to the client.

free_privdata:    called in order to free the private data that is passed
                  by RedisModule_UnblockClient() call.
</code></pre><p>Note: <code>RedisModule_UnblockClient</code> should be called for every blocked client,
      even if client was killed, timed-out or disconnected. Failing to do so
      will result in memory leaks.</p>
<p>There are some cases where <code>RedisModule_BlockClient()</code> cannot be used:</p>
<ol>
<li>If the client is a Lua script.</li>
<li>If the client is executing a MULTI block.</li>
</ol>
<p>In these cases, a call to <code>RedisModule_BlockClient()</code> will <strong>not</strong> block the
client, but instead produce a specific error reply.</p>
<p>Measuring background time: By default the time spent in the blocked command
is not account for the total command duration. To include such time you should
use <code>RedisModule_BlockedClientMeasureTimeStart()</code> and <code>RedisModule_BlockedClientMeasureTimeEnd()</code> one,
or multiple times within the blocking command background work.</p>
<h2 id="redismoduleblockclientonkeys"><code>RedisModule_BlockClientOnKeys</code></h2>
<pre class="language-"><code>RedisModuleBlockedClient *RedisModule_BlockClientOnKeys(RedisModuleCtx *ctx, RedisModuleCmdFunc reply_callback, RedisModuleCmdFunc timeout_callback, void (*free_privdata)(RedisModuleCtx*,void*), long long timeout_ms, RedisModuleString **keys, int numkeys, void *privdata);
</code></pre><p>This call is similar to <code>RedisModule_BlockClient()</code>, however in this case we
don&apos;t just block the client, but also ask Redis to unblock it automatically
once certain keys become &quot;ready&quot;, that is, contain more data.</p>
<p>Basically this is similar to what a typical Redis command usually does,
like BLPOP or BZPOPMAX: the client blocks if it cannot be served ASAP,
and later when the key receives new data (a list push for instance), the
client is unblocked and served.</p>
<p>However in the case of this module API, when the client is unblocked?</p>
<ol>
<li>If you block on a key of a type that has blocking operations associated,
like a list, a sorted set, a stream, and so forth, the client may be
unblocked once the relevant key is targeted by an operation that normally
unblocks the native blocking operations for that type. So if we block
on a list key, an RPUSH command may unblock our client and so forth.</li>
<li>If you are implementing your native data type, or if you want to add new
unblocking conditions in addition to &quot;1&quot;, you can call the modules API
<code>RedisModule_SignalKeyAsReady()</code>.</li>
</ol>
<p>Anyway we can&apos;t be sure if the client should be unblocked just because the
key is signaled as ready: for instance a successive operation may change the
key, or a client in queue before this one can be served, modifying the key
as well and making it empty again. So when a client is blocked with
<code>RedisModule_BlockClientOnKeys()</code> the reply callback is not called after
<code>RedisModule_UnblockClient()</code> is called, but every time a key is signaled as ready:
if the reply callback can serve the client, it returns <code>REDISMODULE_OK</code>
and the client is unblocked, otherwise it will return <code>REDISMODULE_ERR</code>
and we&apos;ll try again later.</p>
<p>The reply callback can access the key that was signaled as ready by
calling the API <code>RedisModule_GetBlockedClientReadyKey()</code>, that returns
just the string name of the key as a <code>RedisModuleString</code> object.</p>
<p>Thanks to this system we can setup complex blocking scenarios, like
unblocking a client only if a list contains at least 5 items or other
more fancy logics.</p>
<p>Note that another difference with <code>RedisModule_BlockClient()</code>, is that here
we pass the private data directly when blocking the client: it will
be accessible later in the reply callback. Normally when blocking with
<code>RedisModule_BlockClient()</code> the private data to reply to the client is
passed when calling <code>RedisModule_UnblockClient()</code> but here the unblocking
is performed by Redis itself, so we need to have some private data before
hand. The private data is used to store any information about the specific
unblocking operation that you are implementing. Such information will be
freed using the <code>free_privdata</code> callback provided by the user.</p>
<p>However the reply callback will be able to access the argument vector of
the command, so the private data is often not needed.</p>
<p>Note: Under normal circumstances <code>RedisModule_UnblockClient</code> should not be
      called for clients that are blocked on keys (Either the key will
      become ready or a timeout will occur). If for some reason you do want
      to call RedisModule_UnblockClient it is possible: Client will be
      handled as if it were timed-out (You must implement the timeout
      callback in that case).</p>
<h2 id="redismodulesignalkeyasready"><code>RedisModule_SignalKeyAsReady</code></h2>
<pre class="language-"><code>void RedisModule_SignalKeyAsReady(RedisModuleCtx *ctx, RedisModuleString *key);
</code></pre><p>This function is used in order to potentially unblock a client blocked
on keys with <code>RedisModule_BlockClientOnKeys()</code>. When this function is called,
all the clients blocked for this key will get their <code>reply_callback</code> called.</p>
<p>Note: The function has no effect if the signaled key doesn&apos;t exist.</p>
<h2 id="redismoduleunblockclient"><code>RedisModule_UnblockClient</code></h2>
<pre class="language-"><code>int RedisModule_UnblockClient(RedisModuleBlockedClient *bc, void *privdata);
</code></pre><p>Unblock a client blocked by <code>RedisModule_BlockedClient</code>. This will trigger
the reply callbacks to be called in order to reply to the client.
The &apos;privdata&apos; argument will be accessible by the reply callback, so
the caller of this function can pass any value that is needed in order to
actually reply to the client.</p>
<p>A common usage for &apos;privdata&apos; is a thread that computes something that
needs to be passed to the client, included but not limited some slow
to compute reply or some reply obtained via networking.</p>
<p>Note 1: this function can be called from threads spawned by the module.</p>
<p>Note 2: when we unblock a client that is blocked for keys using the API
<code>RedisModule_BlockClientOnKeys()</code>, the privdata argument here is not used.
Unblocking a client that was blocked for keys using this API will still
require the client to get some reply, so the function will use the
&quot;timeout&quot; handler in order to do so (The privdata provided in
<code>RedisModule_BlockClientOnKeys()</code> is accessible from the timeout
callback via <code>RedisModule_GetBlockedClientPrivateData</code>).</p>
<h2 id="redismoduleabortblock"><code>RedisModule_AbortBlock</code></h2>
<pre class="language-"><code>int RedisModule_AbortBlock(RedisModuleBlockedClient *bc);
</code></pre><p>Abort a blocked client blocking operation: the client will be unblocked
without firing any callback.</p>
<h2 id="redismodulesetdisconnectcallback"><code>RedisModule_SetDisconnectCallback</code></h2>
<pre class="language-"><code>void RedisModule_SetDisconnectCallback(RedisModuleBlockedClient *bc, RedisModuleDisconnectFunc callback);
</code></pre><p>Set a callback that will be called if a blocked client disconnects
before the module has a chance to call <code>RedisModule_UnblockClient()</code></p>
<p>Usually what you want to do there, is to cleanup your module state
so that you can call <code>RedisModule_UnblockClient()</code> safely, otherwise
the client will remain blocked forever if the timeout is large.</p>
<p>Notes:</p>
<ol>
<li><p>It is not safe to call Reply* family functions here, it is also
useless since the client is gone.</p>
</li>
<li><p>This callback is not called if the client disconnects because of
a timeout. In such a case, the client is unblocked automatically
and the timeout callback is called.</p>
</li>
</ol>
<h2 id="redismoduleisblockedreplyrequest"><code>RedisModule_IsBlockedReplyRequest</code></h2>
<pre class="language-"><code>int RedisModule_IsBlockedReplyRequest(RedisModuleCtx *ctx);
</code></pre><p>Return non-zero if a module command was called in order to fill the
reply for a blocked client.</p>
<h2 id="redismoduleisblockedtimeoutrequest"><code>RedisModule_IsBlockedTimeoutRequest</code></h2>
<pre class="language-"><code>int RedisModule_IsBlockedTimeoutRequest(RedisModuleCtx *ctx);
</code></pre><p>Return non-zero if a module command was called in order to fill the
reply for a blocked client that timed out.</p>
<h2 id="redismodulegetblockedclientprivatedata"><code>RedisModule_GetBlockedClientPrivateData</code></h2>
<pre class="language-"><code>void *RedisModule_GetBlockedClientPrivateData(RedisModuleCtx *ctx);
</code></pre><p>Get the private data set by <code>RedisModule_UnblockClient()</code></p>
<h2 id="redismodulegetblockedclientreadykey"><code>RedisModule_GetBlockedClientReadyKey</code></h2>
<pre class="language-"><code>RedisModuleString *RedisModule_GetBlockedClientReadyKey(RedisModuleCtx *ctx);
</code></pre><p>Get the key that is ready when the reply callback is called in the context
of a client blocked by <code>RedisModule_BlockClientOnKeys()</code>.</p>
<h2 id="redismodulegetblockedclienthandle"><code>RedisModule_GetBlockedClientHandle</code></h2>
<pre class="language-"><code>RedisModuleBlockedClient *RedisModule_GetBlockedClientHandle(RedisModuleCtx *ctx);
</code></pre><p>Get the blocked client associated with a given context.
This is useful in the reply and timeout callbacks of blocked clients,
before sometimes the module has the blocked client handle references
around, and wants to cleanup it.</p>
<h2 id="redismoduleblockedclientdisconnected"><code>RedisModule_BlockedClientDisconnected</code></h2>
<pre class="language-"><code>int RedisModule_BlockedClientDisconnected(RedisModuleCtx *ctx);
</code></pre><p>Return true if when the free callback of a blocked client is called,
the reason for the client to be unblocked is that it disconnected
while it was blocked.</p>
<h2 id="redismodulegetthreadsafecontext"><code>RedisModule_GetThreadSafeContext</code></h2>
<pre class="language-"><code>RedisModuleCtx *RedisModule_GetThreadSafeContext(RedisModuleBlockedClient *bc);
</code></pre><p>Return a context which can be used inside threads to make Redis context
calls with certain modules APIs. If &apos;bc&apos; is not NULL then the module will
be bound to a blocked client, and it will be possible to use the
<code>RedisModule_Reply*</code> family of functions to accumulate a reply for when the
client will be unblocked. Otherwise the thread safe context will be
detached by a specific client.</p>
<p>To call non-reply APIs, the thread safe context must be prepared with:</p>
<pre class="language-"><code>RedisModule_ThreadSafeContextLock(ctx);
... make your call here ...
RedisModule_ThreadSafeContextUnlock(ctx);
</code></pre><p>This is not needed when using <code>RedisModule_Reply*</code> functions, assuming
that a blocked client was used when the context was created, otherwise
no <code>RedisModule_Reply</code>* call should be made at all.</p>
<p>NOTE: If you&apos;re creating a detached thread safe context (bc is NULL),
consider using <code>RM_GetDetachedThreadSafeContext</code> which will also retain
the module ID and thus be more useful for logging.</p>
<h2 id="redismodulegetdetachedthreadsafecontext"><code>RedisModule_GetDetachedThreadSafeContext</code></h2>
<pre class="language-"><code>RedisModuleCtx *RedisModule_GetDetachedThreadSafeContext(RedisModuleCtx *ctx);
</code></pre><p>Return a detached thread safe context that is not associated with any
specific blocked client, but is associated with the module&apos;s context.</p>
<p>This is useful for modules that wish to hold a global context over
a long term, for purposes such as logging.</p>
<h2 id="redismodulefreethreadsafecontext"><code>RedisModule_FreeThreadSafeContext</code></h2>
<pre class="language-"><code>void RedisModule_FreeThreadSafeContext(RedisModuleCtx *ctx);
</code></pre><p>Release a thread safe context.</p>
<h2 id="redismodulethreadsafecontextlock"><code>RedisModule_ThreadSafeContextLock</code></h2>
<pre class="language-"><code>void RedisModule_ThreadSafeContextLock(RedisModuleCtx *ctx);
</code></pre><p>Acquire the server lock before executing a thread safe API call.
This is not needed for <code>RedisModule_Reply*</code> calls when there is
a blocked client connected to the thread safe context.</p>
<h2 id="redismodulethreadsafecontexttrylock"><code>RedisModule_ThreadSafeContextTryLock</code></h2>
<pre class="language-"><code>int RedisModule_ThreadSafeContextTryLock(RedisModuleCtx *ctx);
</code></pre><p>Similar to <code>RedisModule_ThreadSafeContextLock</code> but this function
would not block if the server lock is already acquired.</p>
<p>If successful (lock acquired) <code>REDISMODULE_OK</code> is returned,
otherwise <code>REDISMODULE_ERR</code> is returned and errno is set
accordingly.</p>
<h2 id="redismodulethreadsafecontextunlock"><code>RedisModule_ThreadSafeContextUnlock</code></h2>
<pre class="language-"><code>void RedisModule_ThreadSafeContextUnlock(RedisModuleCtx *ctx);
</code></pre><p>Release the server lock after a thread safe API call was executed.</p>
<h2 id="redismodulesubscribetokeyspaceevents"><code>RedisModule_SubscribeToKeyspaceEvents</code></h2>
<pre class="language-"><code>int RedisModule_SubscribeToKeyspaceEvents(RedisModuleCtx *ctx, int types, RedisModuleNotificationFunc callback);
</code></pre><p>Subscribe to keyspace notifications. This is a low-level version of the
keyspace-notifications API. A module can register callbacks to be notified
when keyspace events occur.</p>
<p>Notification events are filtered by their type (string events, set events,
etc), and the subscriber callback receives only events that match a specific
mask of event types.</p>
<p>When subscribing to notifications with <code>RedisModule_SubscribeToKeyspaceEvents</code> 
the module must provide an event type-mask, denoting the events the subscriber
is interested in. This can be an ORed mask of any of the following flags:</p>
<ul>
<li><code>REDISMODULE_NOTIFY_GENERIC</code>: Generic commands like DEL, EXPIRE, RENAME</li>
<li><code>REDISMODULE_NOTIFY_STRING</code>: String events</li>
<li><code>REDISMODULE_NOTIFY_LIST</code>: List events</li>
<li><code>REDISMODULE_NOTIFY_SET</code>: Set events</li>
<li><code>REDISMODULE_NOTIFY_HASH</code>: Hash events</li>
<li><code>REDISMODULE_NOTIFY_ZSET</code>: Sorted Set events</li>
<li><code>REDISMODULE_NOTIFY_EXPIRED</code>: Expiration events</li>
<li><code>REDISMODULE_NOTIFY_EVICTED</code>: Eviction events</li>
<li><code>REDISMODULE_NOTIFY_STREAM</code>: Stream events</li>
<li><code>REDISMODULE_NOTIFY_KEYMISS</code>: Key-miss events</li>
<li><code>REDISMODULE_NOTIFY_ALL</code>: All events (Excluding <code>REDISMODULE_NOTIFY_KEYMISS</code>)</li>
<li><code>REDISMODULE_NOTIFY_LOADED</code>: A special notification available only for modules,<pre class="language-"><code>                       indicates that the key was loaded from persistence.
                       Notice, when this event fires, the given key
                       can not be retained, use RM_CreateStringFromString
                       instead.
</code></pre></li>
</ul>
<p>We do not distinguish between key events and keyspace events, and it is up
to the module to filter the actions taken based on the key.</p>
<p>The subscriber signature is:</p>
<pre class="language-"><code>int (*RedisModuleNotificationFunc) (RedisModuleCtx *ctx, int type,
                                    const char *event,
                                    RedisModuleString *key);
</code></pre><p><code>type</code> is the event type bit, that must match the mask given at registration
time. The event string is the actual command being executed, and key is the
relevant Redis key.</p>
<p>Notification callback gets executed with a redis context that can not be
used to send anything to the client, and has the db number where the event
occurred as its selected db number.</p>
<p>Notice that it is not necessary to enable notifications in redis.conf for
module notifications to work.</p>
<p>Warning: the notification callbacks are performed in a synchronous manner,
so notification callbacks must to be fast, or they would slow Redis down.
If you need to take long actions, use threads to offload them.</p>
<p>See <a href="https://redis.io/topics/notifications" target="_blank">https://redis.io/topics/notifications</a> for more information.</p>
<h2 id="redismodulegetnotifykeyspaceevents"><code>RedisModule_GetNotifyKeyspaceEvents</code></h2>
<pre class="language-"><code>int RedisModule_GetNotifyKeyspaceEvents();
</code></pre><p>Get the configured bitmap of notify-keyspace-events (Could be used
for additional filtering in <code>RedisModuleNotificationFunc</code>)</p>
<h2 id="redismodulenotifykeyspaceevent"><code>RedisModule_NotifyKeyspaceEvent</code></h2>
<pre class="language-"><code>int RedisModule_NotifyKeyspaceEvent(RedisModuleCtx *ctx, int type, const char *event, RedisModuleString *key);
</code></pre><p>Expose notifyKeyspaceEvent to modules</p>
<h2 id="redismoduleregisterclustermessagereceiver"><code>RedisModule_RegisterClusterMessageReceiver</code></h2>
<pre class="language-"><code>void RedisModule_RegisterClusterMessageReceiver(RedisModuleCtx *ctx, uint8_t type, RedisModuleClusterMessageReceiver callback);
</code></pre><p>Register a callback receiver for cluster messages of type &apos;type&apos;. If there
was already a registered callback, this will replace the callback function
with the one provided, otherwise if the callback is set to NULL and there
is already a callback for this function, the callback is unregistered
(so this API call is also used in order to delete the receiver).</p>
<h2 id="redismodulesendclustermessage"><code>RedisModule_SendClusterMessage</code></h2>
<pre class="language-"><code>int RedisModule_SendClusterMessage(RedisModuleCtx *ctx, char *target_id, uint8_t type, unsigned char *msg, uint32_t len);
</code></pre><p>Send a message to all the nodes in the cluster if <code>target</code> is NULL, otherwise
at the specified target, which is a <code>REDISMODULE_NODE_ID_LEN</code> bytes node ID, as
returned by the receiver callback or by the nodes iteration functions.</p>
<p>The function returns <code>REDISMODULE_OK</code> if the message was successfully sent,
otherwise if the node is not connected or such node ID does not map to any
known cluster node, <code>REDISMODULE_ERR</code> is returned.</p>
<h2 id="redismodulegetclusternodeslist"><code>RedisModule_GetClusterNodesList</code></h2>
<pre class="language-"><code>char **RedisModule_GetClusterNodesList(RedisModuleCtx *ctx, size_t *numnodes);
</code></pre><p>Return an array of string pointers, each string pointer points to a cluster
node ID of exactly <code>REDISMODULE_NODE_ID_SIZE</code> bytes (without any null term).
The number of returned node IDs is stored into <code>*numnodes</code>.
However if this function is called by a module not running an a Redis
instance with Redis Cluster enabled, NULL is returned instead.</p>
<p>The IDs returned can be used with <code>RedisModule_GetClusterNodeInfo()</code> in order
to get more information about single nodes.</p>
<p>The array returned by this function must be freed using the function
<code>RedisModule_FreeClusterNodesList()</code>.</p>
<p>Example:</p>
<pre class="language-"><code>size_t count, j;
char **ids = RedisModule_GetClusterNodesList(ctx,&amp;count);
for (j = 0; j &lt; count; j++) {
    RedisModule_Log(&quot;notice&quot;,&quot;Node %.*s&quot;,
        REDISMODULE_NODE_ID_LEN,ids[j]);
}
RedisModule_FreeClusterNodesList(ids);
</code></pre><h2 id="redismodulefreeclusternodeslist"><code>RedisModule_FreeClusterNodesList</code></h2>
<pre class="language-"><code>void RedisModule_FreeClusterNodesList(char **ids);
</code></pre><p>Free the node list obtained with <code>RedisModule_GetClusterNodesList</code>.</p>
<h2 id="redismodulegetmyclusterid"><code>RedisModule_GetMyClusterID</code></h2>
<pre class="language-"><code>const char *RedisModule_GetMyClusterID(void);
</code></pre><p>Return this node ID (<code>REDISMODULE_CLUSTER_ID_LEN</code> bytes) or NULL if the cluster
is disabled.</p>
<h2 id="redismodulegetclustersize"><code>RedisModule_GetClusterSize</code></h2>
<pre class="language-"><code>size_t RedisModule_GetClusterSize(void);
</code></pre><p>Return the number of nodes in the cluster, regardless of their state
(handshake, noaddress, ...) so that the number of active nodes may actually
be smaller, but not greater than this number. If the instance is not in
cluster mode, zero is returned.</p>
<h2 id="redismodulegetclusternodeinfo"><code>RedisModule_GetClusterNodeInfo</code></h2>
<pre class="language-"><code>int RedisModule_GetClusterNodeInfo(RedisModuleCtx *ctx, const char *id, char *ip, char *master_id, int *port, int *flags);
</code></pre><p>Populate the specified info for the node having as ID the specified &apos;id&apos;,
then returns <code>REDISMODULE_OK</code>. Otherwise if the node ID does not exist from
the POV of this local node, <code>REDISMODULE_ERR</code> is returned.</p>
<p>The arguments <code>ip</code>, <code>master_id</code>, <code>port</code> and <code>flags</code> can be NULL in case we don&apos;t
need to populate back certain info. If an <code>ip</code> and <code>master_id</code> (only populated
if the instance is a slave) are specified, they point to buffers holding
at least <code>REDISMODULE_NODE_ID_LEN</code> bytes. The strings written back as <code>ip</code>
and <code>master_id</code> are not null terminated.</p>
<p>The list of flags reported is the following:</p>
<ul>
<li><code>REDISMODULE_NODE_MYSELF</code>:       This node</li>
<li><code>REDISMODULE_NODE_MASTER</code>:       The node is a master</li>
<li><code>REDISMODULE_NODE_SLAVE</code>:        The node is a replica</li>
<li><code>REDISMODULE_NODE_PFAIL</code>:        We see the node as failing</li>
<li><code>REDISMODULE_NODE_FAIL</code>:         The cluster agrees the node is failing</li>
<li><code>REDISMODULE_NODE_NOFAILOVER</code>:   The slave is configured to never failover</li>
</ul>
<h2 id="redismodulesetclusterflags"><code>RedisModule_SetClusterFlags</code></h2>
<pre class="language-"><code>void RedisModule_SetClusterFlags(RedisModuleCtx *ctx, uint64_t flags);
</code></pre><p>Set Redis Cluster flags in order to change the normal behavior of
Redis Cluster, especially with the goal of disabling certain functions.
This is useful for modules that use the Cluster API in order to create
a different distributed system, but still want to use the Redis Cluster
message bus. Flags that can be set:</p>
<ul>
<li><code>CLUSTER_MODULE_FLAG_NO_FAILOVER</code></li>
<li><code>CLUSTER_MODULE_FLAG_NO_REDIRECTION</code></li>
</ul>
<p>With the following effects:</p>
<ul>
<li><p><code>NO_FAILOVER</code>: prevent Redis Cluster slaves to failover a failing master.</p>
<pre class="language-"><code>         Also disables the replica migration feature.
</code></pre></li>
<li><p><code>NO_REDIRECTION</code>: Every node will accept any key, without trying to perform</p>
<pre class="language-"><code>            partitioning according to the user Redis Cluster algorithm.
            Slots informations will still be propagated across the
            cluster, but without effects.
</code></pre></li>
</ul>
<h2 id="redismodulecreatetimer"><code>RedisModule_CreateTimer</code></h2>
<pre class="language-"><code>RedisModuleTimerID RedisModule_CreateTimer(RedisModuleCtx *ctx, mstime_t period, RedisModuleTimerProc callback, void *data);
</code></pre><p>Create a new timer that will fire after <code>period</code> milliseconds, and will call
the specified function using <code>data</code> as argument. The returned timer ID can be
used to get information from the timer or to stop it before it fires.
Note that for the common use case of a repeating timer (Re-registration
of the timer inside the <code>RedisModuleTimerProc</code> callback) it matters when
this API is called:
If it is called at the beginning of &apos;callback&apos; it means
the event will triggered every &apos;period&apos;.
If it is called at the end of &apos;callback&apos; it means
there will &apos;period&apos; milliseconds gaps between events.
(If the time it takes to execute &apos;callback&apos; is negligible the two
statements above mean the same)</p>
<h2 id="redismodulestoptimer"><code>RedisModule_StopTimer</code></h2>
<pre class="language-"><code>int RedisModule_StopTimer(RedisModuleCtx *ctx, RedisModuleTimerID id, void **data);
</code></pre><p>Stop a timer, returns <code>REDISMODULE_OK</code> if the timer was found, belonged to the
calling module, and was stopped, otherwise <code>REDISMODULE_ERR</code> is returned.
If not NULL, the data pointer is set to the value of the data argument when
the timer was created.</p>
<h2 id="redismodulegettimerinfo"><code>RedisModule_GetTimerInfo</code></h2>
<pre class="language-"><code>int RedisModule_GetTimerInfo(RedisModuleCtx *ctx, RedisModuleTimerID id, uint64_t *remaining, void **data);
</code></pre><p>Obtain information about a timer: its remaining time before firing
(in milliseconds), and the private data pointer associated with the timer.
If the timer specified does not exist or belongs to a different module
no information is returned and the function returns <code>REDISMODULE_ERR</code>, otherwise
<code>REDISMODULE_OK</code> is returned. The arguments remaining or data can be NULL if
the caller does not need certain information.</p>
<h2 id="redismodulecreatemoduleuser"><code>RedisModule_CreateModuleUser</code></h2>
<pre class="language-"><code>RedisModuleUser *RedisModule_CreateModuleUser(const char *name);
</code></pre><p>Creates a Redis ACL user that the module can use to authenticate a client.
After obtaining the user, the module should set what such user can do
using the <code>RedisModule_SetUserACL()</code> function. Once configured, the user
can be used in order to authenticate a connection, with the specified
ACL rules, using the <code>RedisModule_AuthClientWithUser()</code> function.</p>
<p>Note that:</p>
<ul>
<li>Users created here are not listed by the ACL command.</li>
<li>Users created here are not checked for duplicated name, so it&apos;s up to
the module calling this function to take care of not creating users
with the same name.</li>
<li>The created user can be used to authenticate multiple Redis connections.</li>
</ul>
<p>The caller can later free the user using the function
<code>RedisModule_FreeModuleUser()</code>. When this function is called, if there are
still clients authenticated with this user, they are disconnected.
The function to free the user should only be used when the caller really
wants to invalidate the user to define a new one with different
capabilities.</p>
<h2 id="redismodulefreemoduleuser"><code>RedisModule_FreeModuleUser</code></h2>
<pre class="language-"><code>int RedisModule_FreeModuleUser(RedisModuleUser *user);
</code></pre><p>Frees a given user and disconnects all of the clients that have been
authenticated with it. See <code>RedisModule_CreateModuleUser</code> for detailed usage.</p>
<h2 id="redismodulesetmoduleuseracl"><code>RedisModule_SetModuleUserACL</code></h2>
<pre class="language-"><code>int RedisModule_SetModuleUserACL(RedisModuleUser *user, const char* acl);
</code></pre><p>Sets the permissions of a user created through the redis module 
interface. The syntax is the same as ACL SETUSER, so refer to the 
documentation in acl.c for more information. See <code>RedisModule_CreateModuleUser</code>
for detailed usage.</p>
<p>Returns <code>REDISMODULE_OK</code> on success and <code>REDISMODULE_ERR</code> on failure
and will set an errno describing why the operation failed.</p>
<h2 id="redismoduleauthenticateclientwithuser"><code>RedisModule_AuthenticateClientWithUser</code></h2>
<pre class="language-"><code>int RedisModule_AuthenticateClientWithUser(RedisModuleCtx *ctx, RedisModuleUser *module_user, RedisModuleUserChangedFunc callback, void *privdata, uint64_t *client_id);
</code></pre><p>Authenticate the current context&apos;s user with the provided redis acl user. 
Returns <code>REDISMODULE_ERR</code> if the user is disabled.</p>
<p>See authenticateClientWithUser for information about callback, <code>client_id</code>,
and general usage for authentication.</p>
<h2 id="redismoduleauthenticateclientwithacluser"><code>RedisModule_AuthenticateClientWithACLUser</code></h2>
<pre class="language-"><code>int RedisModule_AuthenticateClientWithACLUser(RedisModuleCtx *ctx, const char *name, size_t len, RedisModuleUserChangedFunc callback, void *privdata, uint64_t *client_id);
</code></pre><p>Authenticate the current context&apos;s user with the provided redis acl user. 
Returns <code>REDISMODULE_ERR</code> if the user is disabled or the user does not exist.</p>
<p>See authenticateClientWithUser for information about callback, <code>client_id</code>,
and general usage for authentication.</p>
<h2 id="redismoduledeauthenticateandcloseclient"><code>RedisModule_DeauthenticateAndCloseClient</code></h2>
<pre class="language-"><code>int RedisModule_DeauthenticateAndCloseClient(RedisModuleCtx *ctx, uint64_t client_id);
</code></pre><p>Deauthenticate and close the client. The client resources will not be
be immediately freed, but will be cleaned up in a background job. This is 
the recommended way to deauthenicate a client since most clients can&apos;t 
handle users becoming deauthenticated. Returns <code>REDISMODULE_ERR</code> when the
client doesn&apos;t exist and <code>REDISMODULE_OK</code> when the operation was successful. </p>
<p>The client ID is returned from the <code>RedisModule_AuthenticateClientWithUser</code> and
<code>RedisModule_AuthenticateClientWithACLUser</code> APIs, but can be obtained through
the CLIENT api or through server events. </p>
<p>This function is not thread safe, and must be executed within the context
of a command or thread safe context.</p>
<h2 id="redismodulegetclientcertificate"><code>RedisModule_GetClientCertificate</code></h2>
<pre class="language-"><code>RedisModuleString *RedisModule_GetClientCertificate(RedisModuleCtx *ctx, uint64_t client_id);
</code></pre><p>Return the X.509 client-side certificate used by the client to authenticate
this connection.</p>
<p>The return value is an allocated <code>RedisModuleString</code> that is a X.509 certificate
encoded in PEM (Base64) format. It should be freed (or auto-freed) by the caller.</p>
<p>A NULL value is returned in the following conditions:</p>
<ul>
<li>Connection ID does not exist</li>
<li>Connection is not a TLS connection</li>
<li>Connection is a TLS connection but no client ceritifcate was used</li>
</ul>
<h2 id="redismodulecreatedict"><code>RedisModule_CreateDict</code></h2>
<pre class="language-"><code>RedisModuleDict *RedisModule_CreateDict(RedisModuleCtx *ctx);
</code></pre><p>Create a new dictionary. The &apos;ctx&apos; pointer can be the current module context
or NULL, depending on what you want. Please follow the following rules:</p>
<ol>
<li>Use a NULL context if you plan to retain a reference to this dictionary
that will survive the time of the module callback where you created it.</li>
<li>Use a NULL context if no context is available at the time you are creating
the dictionary (of course...).</li>
<li>However use the current callback context as &apos;ctx&apos; argument if the
dictionary time to live is just limited to the callback scope. In this
case, if enabled, you can enjoy the automatic memory management that will
reclaim the dictionary memory, as well as the strings returned by the
Next / Prev dictionary iterator calls.</li>
</ol>
<h2 id="redismodulefreedict"><code>RedisModule_FreeDict</code></h2>
<pre class="language-"><code>void RedisModule_FreeDict(RedisModuleCtx *ctx, RedisModuleDict *d);
</code></pre><p>Free a dictionary created with <code>RedisModule_CreateDict()</code>. You need to pass the
context pointer &apos;ctx&apos; only if the dictionary was created using the
context instead of passing NULL.</p>
<h2 id="redismoduledictsize"><code>RedisModule_DictSize</code></h2>
<pre class="language-"><code>uint64_t RedisModule_DictSize(RedisModuleDict *d);
</code></pre><p>Return the size of the dictionary (number of keys).</p>
<h2 id="redismoduledictsetc"><code>RedisModule_DictSetC</code></h2>
<pre class="language-"><code>int RedisModule_DictSetC(RedisModuleDict *d, void *key, size_t keylen, void *ptr);
</code></pre><p>Store the specified key into the dictionary, setting its value to the
pointer &apos;ptr&apos;. If the key was added with success, since it did not
already exist, <code>REDISMODULE_OK</code> is returned. Otherwise if the key already
exists the function returns <code>REDISMODULE_ERR</code>.</p>
<h2 id="redismoduledictreplacec"><code>RedisModule_DictReplaceC</code></h2>
<pre class="language-"><code>int RedisModule_DictReplaceC(RedisModuleDict *d, void *key, size_t keylen, void *ptr);
</code></pre><p>Like <code>RedisModule_DictSetC()</code> but will replace the key with the new
value if the key already exists.</p>
<h2 id="redismoduledictset"><code>RedisModule_DictSet</code></h2>
<pre class="language-"><code>int RedisModule_DictSet(RedisModuleDict *d, RedisModuleString *key, void *ptr);
</code></pre><p>Like <code>RedisModule_DictSetC()</code> but takes the key as a <code>RedisModuleString</code>.</p>
<h2 id="redismoduledictreplace"><code>RedisModule_DictReplace</code></h2>
<pre class="language-"><code>int RedisModule_DictReplace(RedisModuleDict *d, RedisModuleString *key, void *ptr);
</code></pre><p>Like <code>RedisModule_DictReplaceC()</code> but takes the key as a <code>RedisModuleString</code>.</p>
<h2 id="redismoduledictgetc"><code>RedisModule_DictGetC</code></h2>
<pre class="language-"><code>void *RedisModule_DictGetC(RedisModuleDict *d, void *key, size_t keylen, int *nokey);
</code></pre><p>Return the value stored at the specified key. The function returns NULL
both in the case the key does not exist, or if you actually stored
NULL at key. So, optionally, if the &apos;nokey&apos; pointer is not NULL, it will
be set by reference to 1 if the key does not exist, or to 0 if the key
exists.</p>
<h2 id="redismoduledictget"><code>RedisModule_DictGet</code></h2>
<pre class="language-"><code>void *RedisModule_DictGet(RedisModuleDict *d, RedisModuleString *key, int *nokey);
</code></pre><p>Like <code>RedisModule_DictGetC()</code> but takes the key as a <code>RedisModuleString</code>.</p>
<h2 id="redismoduledictdelc"><code>RedisModule_DictDelC</code></h2>
<pre class="language-"><code>int RedisModule_DictDelC(RedisModuleDict *d, void *key, size_t keylen, void *oldval);
</code></pre><p>Remove the specified key from the dictionary, returning <code>REDISMODULE_OK</code> if
the key was found and delted, or <code>REDISMODULE_ERR</code> if instead there was
no such key in the dictionary. When the operation is successful, if
&apos;oldval&apos; is not NULL, then &apos;*oldval&apos; is set to the value stored at the
key before it was deleted. Using this feature it is possible to get
a pointer to the value (for instance in order to release it), without
having to call <code>RedisModule_DictGet()</code> before deleting the key.</p>
<h2 id="redismoduledictdel"><code>RedisModule_DictDel</code></h2>
<pre class="language-"><code>int RedisModule_DictDel(RedisModuleDict *d, RedisModuleString *key, void *oldval);
</code></pre><p>Like <code>RedisModule_DictDelC()</code> but gets the key as a <code>RedisModuleString</code>.</p>
<h2 id="redismoduledictiteratorstartc"><code>RedisModule_DictIteratorStartC</code></h2>
<pre class="language-"><code>RedisModuleDictIter *RedisModule_DictIteratorStartC(RedisModuleDict *d, const char *op, void *key, size_t keylen);
</code></pre><p>Return an iterator, setup in order to start iterating from the specified
key by applying the operator &apos;op&apos;, which is just a string specifying the
comparison operator to use in order to seek the first element. The
operators available are:</p>
<ul>
<li><code>^</code>   -- Seek the first (lexicographically smaller) key.</li>
<li><code>$</code>   -- Seek the last  (lexicographically biffer) key.</li>
<li><code>&gt;</code>   -- Seek the first element greater than the specified key.</li>
<li><code>&gt;=</code>  -- Seek the first element greater or equal than the specified key.</li>
<li><code>&lt;</code>   -- Seek the first element smaller than the specified key.</li>
<li><code>&lt;=</code>  -- Seek the first element smaller or equal than the specified key.</li>
<li><code>==</code>  -- Seek the first element matching exactly the specified key.</li>
</ul>
<p>Note that for <code>^</code> and <code>$</code> the passed key is not used, and the user may
just pass NULL with a length of 0.</p>
<p>If the element to start the iteration cannot be seeked based on the
key and operator passed, <code>RedisModule_DictNext()</code> / Prev() will just return
<code>REDISMODULE_ERR</code> at the first call, otherwise they&apos;ll produce elements.</p>
<h2 id="redismoduledictiteratorstart"><code>RedisModule_DictIteratorStart</code></h2>
<pre class="language-"><code>RedisModuleDictIter *RedisModule_DictIteratorStart(RedisModuleDict *d, const char *op, RedisModuleString *key);
</code></pre><p>Exactly like <code>RedisModule_DictIteratorStartC</code>, but the key is passed as a
<code>RedisModuleString</code>.</p>
<h2 id="redismoduledictiteratorstop"><code>RedisModule_DictIteratorStop</code></h2>
<pre class="language-"><code>void RedisModule_DictIteratorStop(RedisModuleDictIter *di);
</code></pre><p>Release the iterator created with <code>RedisModule_DictIteratorStart()</code>. This call
is mandatory otherwise a memory leak is introduced in the module.</p>
<h2 id="redismoduledictiteratorreseekc"><code>RedisModule_DictIteratorReseekC</code></h2>
<pre class="language-"><code>int RedisModule_DictIteratorReseekC(RedisModuleDictIter *di, const char *op, void *key, size_t keylen);
</code></pre><p>After its creation with <code>RedisModule_DictIteratorStart()</code>, it is possible to
change the currently selected element of the iterator by using this
API call. The result based on the operator and key is exactly like
the function <code>RedisModule_DictIteratorStart()</code>, however in this case the
return value is just <code>REDISMODULE_OK</code> in case the seeked element was found,
or <code>REDISMODULE_ERR</code> in case it was not possible to seek the specified
element. It is possible to reseek an iterator as many times as you want.</p>
<h2 id="redismoduledictiteratorreseek"><code>RedisModule_DictIteratorReseek</code></h2>
<pre class="language-"><code>int RedisModule_DictIteratorReseek(RedisModuleDictIter *di, const char *op, RedisModuleString *key);
</code></pre><p>Like <code>RedisModule_DictIteratorReseekC()</code> but takes the key as as a
<code>RedisModuleString</code>.</p>
<h2 id="redismoduledictnextc"><code>RedisModule_DictNextC</code></h2>
<pre class="language-"><code>void *RedisModule_DictNextC(RedisModuleDictIter *di, size_t *keylen, void **dataptr);
</code></pre><p>Return the current item of the dictionary iterator <code>di</code> and steps to the
next element. If the iterator already yield the last element and there
are no other elements to return, NULL is returned, otherwise a pointer
to a string representing the key is provided, and the <code>*keylen</code> length
is set by reference (if keylen is not NULL). The <code>*dataptr</code>, if not NULL
is set to the value of the pointer stored at the returned key as auxiliary
data (as set by the <code>RedisModule_DictSet</code> API).</p>
<p>Usage example:</p>
<pre class="language-"><code> ... create the iterator here ...
 char *key;
 void *data;
 while((key = RedisModule_DictNextC(iter,&amp;keylen,&amp;data)) != NULL) {
     printf(&quot;%.*s %p\n&quot;, (int)keylen, key, data);
 }
</code></pre><p>The returned pointer is of type void because sometimes it makes sense
to cast it to a <code>char*</code> sometimes to an unsigned <code>char*</code> depending on the
fact it contains or not binary data, so this API ends being more
comfortable to use.</p>
<p>The validity of the returned pointer is until the next call to the
next/prev iterator step. Also the pointer is no longer valid once the
iterator is released.</p>
<h2 id="redismoduledictprevc"><code>RedisModule_DictPrevC</code></h2>
<pre class="language-"><code>void *RedisModule_DictPrevC(RedisModuleDictIter *di, size_t *keylen, void **dataptr);
</code></pre><p>This function is exactly like <code>RedisModule_DictNext()</code> but after returning
the currently selected element in the iterator, it selects the previous
element (laxicographically smaller) instead of the next one.</p>
<h2 id="redismoduledictnext"><code>RedisModule_DictNext</code></h2>
<pre class="language-"><code>RedisModuleString *RedisModule_DictNext(RedisModuleCtx *ctx, RedisModuleDictIter *di, void **dataptr);
</code></pre><p>Like <code>RedisModuleNextC()</code>, but instead of returning an internally allocated
buffer and key length, it returns directly a module string object allocated
in the specified context &apos;ctx&apos; (that may be NULL exactly like for the main
API <code>RedisModule_CreateString</code>).</p>
<p>The returned string object should be deallocated after use, either manually
or by using a context that has automatic memory management active.</p>
<h2 id="redismoduledictprev"><code>RedisModule_DictPrev</code></h2>
<pre class="language-"><code>RedisModuleString *RedisModule_DictPrev(RedisModuleCtx *ctx, RedisModuleDictIter *di, void **dataptr);
</code></pre><p>Like <code>RedisModule_DictNext()</code> but after returning the currently selected
element in the iterator, it selects the previous element (laxicographically
smaller) instead of the next one.</p>
<h2 id="redismoduledictcomparec"><code>RedisModule_DictCompareC</code></h2>
<pre class="language-"><code>int RedisModule_DictCompareC(RedisModuleDictIter *di, const char *op, void *key, size_t keylen);
</code></pre><p>Compare the element currently pointed by the iterator to the specified
element given by key/keylen, according to the operator &apos;op&apos; (the set of
valid operators are the same valid for <code>RedisModule_DictIteratorStart</code>).
If the comparision is successful the command returns <code>REDISMODULE_OK</code>
otherwise <code>REDISMODULE_ERR</code> is returned.</p>
<p>This is useful when we want to just emit a lexicographical range, so
in the loop, as we iterate elements, we can also check if we are still
on range.</p>
<p>The function return <code>REDISMODULE_ERR</code> if the iterator reached the
end of elements condition as well.</p>
<h2 id="redismoduledictcompare"><code>RedisModule_DictCompare</code></h2>
<pre class="language-"><code>int RedisModule_DictCompare(RedisModuleDictIter *di, const char *op, RedisModuleString *key);
</code></pre><p>Like <code>RedisModule_DictCompareC</code> but gets the key to compare with the current
iterator key as a <code>RedisModuleString</code>.</p>
<h2 id="redismoduleinfoaddsection"><code>RedisModule_InfoAddSection</code></h2>
<pre class="language-"><code>int RedisModule_InfoAddSection(RedisModuleInfoCtx *ctx, char *name);
</code></pre><p>Used to start a new section, before adding any fields. the section name will
be prefixed by <code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>modulename</span><span class="token punctuation">&gt;</span></span>_</code> and must only include A-Z,a-z,0-9.
NULL or empty string indicates the default section (only <code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>modulename</span><span class="token punctuation">&gt;</span></span></code>) is used.
When return value is <code>REDISMODULE_ERR</code>, the section should and will be skipped.</p>
<h2 id="redismoduleinfobegindictfield"><code>RedisModule_InfoBeginDictField</code></h2>
<pre class="language-"><code>int RedisModule_InfoBeginDictField(RedisModuleInfoCtx *ctx, char *name);
</code></pre><p>Starts a dict field, similar to the ones in INFO KEYSPACE. Use normal
<code>RedisModule_InfoAddField</code>* functions to add the items to this field, and
terminate with <code>RedisModule_InfoEndDictField</code>.</p>
<h2 id="redismoduleinfoenddictfield"><code>RedisModule_InfoEndDictField</code></h2>
<pre class="language-"><code>int RedisModule_InfoEndDictField(RedisModuleInfoCtx *ctx);
</code></pre><p>Ends a dict field, see <code>RedisModule_InfoBeginDictField</code></p>
<h2 id="redismoduleinfoaddfieldstring"><code>RedisModule_InfoAddFieldString</code></h2>
<pre class="language-"><code>int RedisModule_InfoAddFieldString(RedisModuleInfoCtx *ctx, char *field, RedisModuleString *value);
</code></pre><p>Used by <code>RedisModuleInfoFunc</code> to add info fields.
Each field will be automatically prefixed by <code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>modulename</span><span class="token punctuation">&gt;</span></span>_</code>.
Field names or values must not include <code>\r\n</code> or <code>:</code>.</p>
<h2 id="redismoduleinfoaddfieldcstring"><code>RedisModule_InfoAddFieldCString</code></h2>
<pre class="language-"><code>int RedisModule_InfoAddFieldCString(RedisModuleInfoCtx *ctx, char *field, char *value);
</code></pre><p>See <code>RedisModule_InfoAddFieldString()</code>.</p>
<h2 id="redismoduleinfoaddfielddouble"><code>RedisModule_InfoAddFieldDouble</code></h2>
<pre class="language-"><code>int RedisModule_InfoAddFieldDouble(RedisModuleInfoCtx *ctx, char *field, double value);
</code></pre><p>See <code>RedisModule_InfoAddFieldString()</code>.</p>
<h2 id="redismoduleinfoaddfieldlonglong"><code>RedisModule_InfoAddFieldLongLong</code></h2>
<pre class="language-"><code>int RedisModule_InfoAddFieldLongLong(RedisModuleInfoCtx *ctx, char *field, long long value);
</code></pre><p>See <code>RedisModule_InfoAddFieldString()</code>.</p>
<h2 id="redismoduleinfoaddfieldulonglong"><code>RedisModule_InfoAddFieldULongLong</code></h2>
<pre class="language-"><code>int RedisModule_InfoAddFieldULongLong(RedisModuleInfoCtx *ctx, char *field, unsigned long long value);
</code></pre><p>See <code>RedisModule_InfoAddFieldString()</code>.</p>
<h2 id="redismoduleregisterinfofunc"><code>RedisModule_RegisterInfoFunc</code></h2>
<pre class="language-"><code>int RedisModule_RegisterInfoFunc(RedisModuleCtx *ctx, RedisModuleInfoFunc cb);
</code></pre><p>Registers callback for the INFO command. The callback should add INFO fields
by calling the <code>RedisModule_InfoAddField*()</code> functions.</p>
<h2 id="redismodulegetserverinfo"><code>RedisModule_GetServerInfo</code></h2>
<pre class="language-"><code>RedisModuleServerInfoData *RedisModule_GetServerInfo(RedisModuleCtx *ctx, const char *section);
</code></pre><p>Get information about the server similar to the one that returns from the
INFO command. This function takes an optional &apos;section&apos; argument that may
be NULL. The return value holds the output and can be used with
<code>RedisModule_ServerInfoGetField</code> and alike to get the individual fields.
When done, it needs to be freed with <code>RedisModule_FreeServerInfo</code> or with the
automatic memory management mechanism if enabled.</p>
<h2 id="redismodulefreeserverinfo"><code>RedisModule_FreeServerInfo</code></h2>
<pre class="language-"><code>void RedisModule_FreeServerInfo(RedisModuleCtx *ctx, RedisModuleServerInfoData *data);
</code></pre><p>Free data created with <code>RedisModule_GetServerInfo()</code>. You need to pass the
context pointer &apos;ctx&apos; only if the dictionary was created using the
context instead of passing NULL.</p>
<h2 id="redismoduleserverinfogetfield"><code>RedisModule_ServerInfoGetField</code></h2>
<pre class="language-"><code>RedisModuleString *RedisModule_ServerInfoGetField(RedisModuleCtx *ctx, RedisModuleServerInfoData *data, const char* field);
</code></pre><p>Get the value of a field from data collected with <code>RedisModule_GetServerInfo()</code>. You
need to pass the context pointer &apos;ctx&apos; only if you want to use auto memory
mechanism to release the returned string. Return value will be NULL if the
field was not found.</p>
<h2 id="redismoduleserverinfogetfieldc"><code>RedisModule_ServerInfoGetFieldC</code></h2>
<pre class="language-"><code>const char *RedisModule_ServerInfoGetFieldC(RedisModuleServerInfoData *data, const char* field);
</code></pre><p>Similar to <code>RedisModule_ServerInfoGetField</code>, but returns a char* which should not be freed but the caller.</p>
<h2 id="redismoduleserverinfogetfieldsigned"><code>RedisModule_ServerInfoGetFieldSigned</code></h2>
<pre class="language-"><code>long long RedisModule_ServerInfoGetFieldSigned(RedisModuleServerInfoData *data, const char* field, int *out_err);
</code></pre><p>Get the value of a field from data collected with <code>RedisModule_GetServerInfo()</code>. If the
field is not found, or is not numerical or out of range, return value will be
0, and the optional <code>out_err</code> argument will be set to <code>REDISMODULE_ERR</code>.</p>
<h2 id="redismoduleserverinfogetfieldunsigned"><code>RedisModule_ServerInfoGetFieldUnsigned</code></h2>
<pre class="language-"><code>unsigned long long RedisModule_ServerInfoGetFieldUnsigned(RedisModuleServerInfoData *data, const char* field, int *out_err);
</code></pre><p>Get the value of a field from data collected with <code>RedisModule_GetServerInfo()</code>. If the
field is not found, or is not numerical or out of range, return value will be
0, and the optional <code>out_err</code> argument will be set to <code>REDISMODULE_ERR</code>.</p>
<h2 id="redismoduleserverinfogetfielddouble"><code>RedisModule_ServerInfoGetFieldDouble</code></h2>
<pre class="language-"><code>double RedisModule_ServerInfoGetFieldDouble(RedisModuleServerInfoData *data, const char* field, int *out_err);
</code></pre><p>Get the value of a field from data collected with <code>RedisModule_GetServerInfo()</code>. If the
field is not found, or is not a double, return value will be 0, and the
optional <code>out_err</code> argument will be set to <code>REDISMODULE_ERR</code>.</p>
<h2 id="redismodulegetrandombytes"><code>RedisModule_GetRandomBytes</code></h2>
<pre class="language-"><code>void RedisModule_GetRandomBytes(unsigned char *dst, size_t len);
</code></pre><p>Return random bytes using SHA1 in counter mode with a /dev/urandom
initialized seed. This function is fast so can be used to generate
many bytes without any effect on the operating system entropy pool.
Currently this function is not thread safe.</p>
<h2 id="redismodulegetrandomhexchars"><code>RedisModule_GetRandomHexChars</code></h2>
<pre class="language-"><code>void RedisModule_GetRandomHexChars(char *dst, size_t len);
</code></pre><p>Like <code>RedisModule_GetRandomBytes()</code> but instead of setting the string to
random bytes the string is set to random characters in the in the
hex charset [0-9a-f].</p>
<h2 id="redismoduleexportsharedapi"><code>RedisModule_ExportSharedAPI</code></h2>
<pre class="language-"><code>int RedisModule_ExportSharedAPI(RedisModuleCtx *ctx, const char *apiname, void *func);
</code></pre><p>This function is called by a module in order to export some API with a
given name. Other modules will be able to use this API by calling the
symmetrical function <code>RedisModule_GetSharedAPI()</code> and casting the return value to
the right function pointer.</p>
<p>The function will return <code>REDISMODULE_OK</code> if the name is not already taken,
otherwise <code>REDISMODULE_ERR</code> will be returned and no operation will be
performed.</p>
<p>IMPORTANT: the apiname argument should be a string literal with static
lifetime. The API relies on the fact that it will always be valid in
the future.</p>
<h2 id="redismodulegetsharedapi"><code>RedisModule_GetSharedAPI</code></h2>
<pre class="language-"><code>void *RedisModule_GetSharedAPI(RedisModuleCtx *ctx, const char *apiname);
</code></pre><p>Request an exported API pointer. The return value is just a void pointer
that the caller of this function will be required to cast to the right
function pointer, so this is a private contract between modules.</p>
<p>If the requested API is not available then NULL is returned. Because
modules can be loaded at different times with different order, this
function calls should be put inside some module generic API registering
step, that is called every time a module attempts to execute a
command that requires external APIs: if some API cannot be resolved, the
command should return an error.</p>
<p>Here is an example:</p>
<pre class="language-"><code>int ... myCommandImplementation() {
   if (getExternalAPIs() == 0) {
        reply with an error here if we cannot have the APIs
   }
   // Use the API:
   myFunctionPointer(foo);
}
</code></pre><p>And the function registerAPI() is:</p>
<pre class="language-"><code>int getExternalAPIs(void) {
    static int api_loaded = 0;
    if (api_loaded != 0) return 1; // APIs already resolved.

    myFunctionPointer = RedisModule_GetOtherModuleAPI(&quot;...&quot;);
    if (myFunctionPointer == NULL) return 0;

    return 1;
}
</code></pre><h2 id="redismoduleunregistercommandfilter"><code>RedisModule_UnregisterCommandFilter</code></h2>
<pre class="language-"><code>int RedisModule_UnregisterCommandFilter(RedisModuleCtx *ctx, RedisModuleCommandFilter *filter);
</code></pre><p>Unregister a command filter.</p>
<h2 id="redismodulecommandfilterargscount"><code>RedisModule_CommandFilterArgsCount</code></h2>
<pre class="language-"><code>int RedisModule_CommandFilterArgsCount(RedisModuleCommandFilterCtx *fctx);
</code></pre><p>Return the number of arguments a filtered command has.  The number of
arguments include the command itself.</p>
<h2 id="redismodulecommandfilterargget"><code>RedisModule_CommandFilterArgGet</code></h2>
<pre class="language-"><code>const RedisModuleString *RedisModule_CommandFilterArgGet(RedisModuleCommandFilterCtx *fctx, int pos);
</code></pre><p>Return the specified command argument.  The first argument (position 0) is
the command itself, and the rest are user-provided args.</p>
<h2 id="redismodulecommandfilterarginsert"><code>RedisModule_CommandFilterArgInsert</code></h2>
<pre class="language-"><code>int RedisModule_CommandFilterArgInsert(RedisModuleCommandFilterCtx *fctx, int pos, RedisModuleString *arg);
</code></pre><p>Modify the filtered command by inserting a new argument at the specified
position.  The specified <code>RedisModuleString</code> argument may be used by Redis
after the filter context is destroyed, so it must not be auto-memory
allocated, freed or used elsewhere.</p>
<h2 id="redismodulecommandfilterargreplace"><code>RedisModule_CommandFilterArgReplace</code></h2>
<pre class="language-"><code>int RedisModule_CommandFilterArgReplace(RedisModuleCommandFilterCtx *fctx, int pos, RedisModuleString *arg);
</code></pre><p>Modify the filtered command by replacing an existing argument with a new one.
The specified <code>RedisModuleString</code> argument may be used by Redis after the
filter context is destroyed, so it must not be auto-memory allocated, freed
or used elsewhere.</p>
<h2 id="redismodulecommandfilterargdelete"><code>RedisModule_CommandFilterArgDelete</code></h2>
<pre class="language-"><code>int RedisModule_CommandFilterArgDelete(RedisModuleCommandFilterCtx *fctx, int pos);
</code></pre><p>Modify the filtered command by deleting an argument at the specified
position.</p>
<h2 id="redismodulemallocsize"><code>RedisModule_MallocSize</code></h2>
<pre class="language-"><code>size_t RedisModule_MallocSize(void* ptr);
</code></pre><p>For a given pointer allocated via <code>RedisModule_Alloc()</code> or
<code>RedisModule_Realloc()</code>, return the amount of memory allocated for it.
Note that this may be different (larger) than the memory we allocated
with the allocation calls, since sometimes the underlying allocator
will allocate more memory.</p>
<h2 id="redismodulegetusedmemoryratio"><code>RedisModule_GetUsedMemoryRatio</code></h2>
<pre class="language-"><code>float RedisModule_GetUsedMemoryRatio();
</code></pre><p>Return the a number between 0 to 1 indicating the amount of memory
currently used, relative to the Redis &quot;maxmemory&quot; configuration.</p>
<ul>
<li>0 - No memory limit configured.</li>
<li>Between 0 and 1 - The percentage of the memory used normalized in 0-1 range.</li>
<li>Exactly 1 - Memory limit reached.</li>
<li>Greater 1 - More memory used than the configured limit.</li>
</ul>
<h2 id="redismodulescancursorcreate"><code>RedisModule_ScanCursorCreate</code></h2>
<pre class="language-"><code>RedisModuleScanCursor *RedisModule_ScanCursorCreate();
</code></pre><p>Create a new cursor to be used with <code>RedisModule_Scan</code></p>
<h2 id="redismodulescancursorrestart"><code>RedisModule_ScanCursorRestart</code></h2>
<pre class="language-"><code>void RedisModule_ScanCursorRestart(RedisModuleScanCursor *cursor);
</code></pre><p>Restart an existing cursor. The keys will be rescanned.</p>
<h2 id="redismodulescancursordestroy"><code>RedisModule_ScanCursorDestroy</code></h2>
<pre class="language-"><code>void RedisModule_ScanCursorDestroy(RedisModuleScanCursor *cursor);
</code></pre><p>Destroy the cursor struct.</p>
<h2 id="redismodulescan"><code>RedisModule_Scan</code></h2>
<pre class="language-"><code>int RedisModule_Scan(RedisModuleCtx *ctx, RedisModuleScanCursor *cursor, RedisModuleScanCB fn, void *privdata);
</code></pre><p>Scan API that allows a module to scan all the keys and value in
the selected db.</p>
<p>Callback for scan implementation.</p>
<pre class="language-"><code>void scan_callback(RedisModuleCtx *ctx, RedisModuleString *keyname,
                   RedisModuleKey *key, void *privdata);
</code></pre><ul>
<li><code>ctx</code>: the redis module context provided to for the scan.</li>
<li><code>keyname</code>: owned by the caller and need to be retained if used after this
function.</li>
<li><code>key</code>: holds info on the key and value, it is provided as best effort, in
some cases it might be NULL, in which case the user should (can) use
<code>RedisModule_OpenKey()</code> (and CloseKey too).
when it is provided, it is owned by the caller and will be free when the
callback returns.</li>
<li><code>privdata</code>: the user data provided to <code>RedisModule_Scan()</code>.</li>
</ul>
<p>The way it should be used:</p>
<pre class="language-"><code> RedisModuleCursor *c = RedisModule_ScanCursorCreate();
 while(RedisModule_Scan(ctx, c, callback, privateData));
 RedisModule_ScanCursorDestroy(c);
</code></pre><p>It is also possible to use this API from another thread while the lock
is acquired during the actuall call to <code>RedisModule_Scan</code>:</p>
<pre class="language-"><code> RedisModuleCursor *c = RedisModule_ScanCursorCreate();
 RedisModule_ThreadSafeContextLock(ctx);
 while(RedisModule_Scan(ctx, c, callback, privateData)){
     RedisModule_ThreadSafeContextUnlock(ctx);
     // do some background job
     RedisModule_ThreadSafeContextLock(ctx);
 }
 RedisModule_ScanCursorDestroy(c);
</code></pre><p>The function will return 1 if there are more elements to scan and
0 otherwise, possibly setting errno if the call failed.</p>
<p>It is also possible to restart an existing cursor using <code>RedisModule_ScanCursorRestart</code>.</p>
<p>IMPORTANT: This API is very similar to the Redis SCAN command from the
point of view of the guarantees it provides. This means that the API
may report duplicated keys, but guarantees to report at least one time
every key that was there from the start to the end of the scanning process.</p>
<p>NOTE: If you do database changes within the callback, you should be aware
that the internal state of the database may change. For instance it is safe
to delete or modify the current key, but may not be safe to delete any
other key.
Moreover playing with the Redis keyspace while iterating may have the
effect of returning more duplicates. A safe pattern is to store the keys
names you want to modify elsewhere, and perform the actions on the keys
later when the iteration is complete. However this can cost a lot of
memory, so it may make sense to just operate on the current key when
possible during the iteration, given that this is safe.</p>
<h2 id="redismodulescankey"><code>RedisModule_ScanKey</code></h2>
<pre class="language-"><code>int RedisModule_ScanKey(RedisModuleKey *key, RedisModuleScanCursor *cursor, RedisModuleScanKeyCB fn, void *privdata);
</code></pre><p>Scan api that allows a module to scan the elements in a hash, set or sorted set key</p>
<p>Callback for scan implementation.</p>
<pre class="language-"><code>void scan_callback(RedisModuleKey *key, RedisModuleString* field, RedisModuleString* value, void *privdata);
</code></pre><ul>
<li>key - the redis key context provided to for the scan.</li>
<li>field - field name, owned by the caller and need to be retained if used
after this function.</li>
<li>value - value string or NULL for set type, owned by the caller and need to
be retained if used after this function.</li>
<li>privdata - the user data provided to <code>RedisModule_ScanKey</code>.</li>
</ul>
<p>The way it should be used:</p>
<pre class="language-"><code> RedisModuleCursor *c = RedisModule_ScanCursorCreate();
 RedisModuleKey *key = RedisModule_OpenKey(...)
 while(RedisModule_ScanKey(key, c, callback, privateData));
 RedisModule_CloseKey(key);
 RedisModule_ScanCursorDestroy(c);
</code></pre><p>It is also possible to use this API from another thread while the lock is acquired during
the actuall call to <code>RedisModule_ScanKey</code>, and re-opening the key each time:</p>
<pre class="language-"><code> RedisModuleCursor *c = RedisModule_ScanCursorCreate();
 RedisModule_ThreadSafeContextLock(ctx);
 RedisModuleKey *key = RedisModule_OpenKey(...)
 while(RedisModule_ScanKey(ctx, c, callback, privateData)){
     RedisModule_CloseKey(key);
     RedisModule_ThreadSafeContextUnlock(ctx);
     // do some background job
     RedisModule_ThreadSafeContextLock(ctx);
     RedisModuleKey *key = RedisModule_OpenKey(...)
 }
 RedisModule_CloseKey(key);
 RedisModule_ScanCursorDestroy(c);
</code></pre><p>The function will return 1 if there are more elements to scan and 0 otherwise,
possibly setting errno if the call failed.
It is also possible to restart an existing cursor using <code>RedisModule_ScanCursorRestart</code>.</p>
<p>NOTE: Certain operations are unsafe while iterating the object. For instance
while the API guarantees to return at least one time all the elements that
are present in the data structure consistently from the start to the end
of the iteration (see HSCAN and similar commands documentation), the more
you play with the elements, the more duplicates you may get. In general
deleting the current element of the data structure is safe, while removing
the key you are iterating is not safe.</p>
<h2 id="redismodulefork"><code>RedisModule_Fork</code></h2>
<pre class="language-"><code>int RedisModule_Fork(RedisModuleForkDoneHandler cb, void *user_data);
</code></pre><p>Create a background child process with the current frozen snaphost of the
main process where you can do some processing in the background without
affecting / freezing the traffic and no need for threads and GIL locking.
Note that Redis allows for only one concurrent fork.
When the child wants to exit, it should call <code>RedisModule_ExitFromChild</code>.
If the parent wants to kill the child it should call <code>RedisModule_KillForkChild</code>
The done handler callback will be executed on the parent process when the
child existed (but not when killed)
Return: -1 on failure, on success the parent process will get a positive PID
of the child, and the child process will get 0.</p>
<h2 id="redismodulesendchildheartbeat"><code>RedisModule_SendChildHeartbeat</code></h2>
<pre class="language-"><code>void RedisModule_SendChildHeartbeat(double progress);
</code></pre><p>The module is advised to call this function from the fork child once in a while,
so that it can report progress and COW memory to the parent which will be
reported in INFO.
The <code>progress</code> argument should between 0 and 1, or -1 when not available.</p>
<h2 id="redismoduleexitfromchild"><code>RedisModule_ExitFromChild</code></h2>
<pre class="language-"><code>int RedisModule_ExitFromChild(int retcode);
</code></pre><p>Call from the child process when you want to terminate it.
retcode will be provided to the done handler executed on the parent process.</p>
<h2 id="redismodulekillforkchild"><code>RedisModule_KillForkChild</code></h2>
<pre class="language-"><code>int RedisModule_KillForkChild(int child_pid);
</code></pre><p>Can be used to kill the forked child process from the parent process.
<code>child_pid</code> would be the return value of <code>RedisModule_Fork</code>.</p>
<h2 id="redismodulesubscribetoserverevent"><code>RedisModule_SubscribeToServerEvent</code></h2>
<pre class="language-"><code>int RedisModule_SubscribeToServerEvent(RedisModuleCtx *ctx, RedisModuleEvent event, RedisModuleEventCallback callback);
</code></pre><p>Register to be notified, via a callback, when the specified server event
happens. The callback is called with the event as argument, and an additional
argument which is a void pointer and should be cased to a specific type
that is event-specific (but many events will just use NULL since they do not
have additional information to pass to the callback).</p>
<p>If the callback is NULL and there was a previous subscription, the module
will be unsubscribed. If there was a previous subscription and the callback
is not null, the old callback will be replaced with the new one.</p>
<p>The callback must be of this type:</p>
<pre class="language-"><code>int (*RedisModuleEventCallback)(RedisModuleCtx *ctx,
                                RedisModuleEvent eid,
                                uint64_t subevent,
                                void *data);
</code></pre><p>The &apos;ctx&apos; is a normal Redis module context that the callback can use in
order to call other modules APIs. The &apos;eid&apos; is the event itself, this
is only useful in the case the module subscribed to multiple events: using
the &apos;id&apos; field of this structure it is possible to check if the event
is one of the events we registered with this callback. The &apos;subevent&apos; field
depends on the event that fired.</p>
<p>Finally the &apos;data&apos; pointer may be populated, only for certain events, with
more relevant data.</p>
<p>Here is a list of events you can use as &apos;eid&apos; and related sub events:</p>
<ul>
<li><p><code>RedisModuleEvent_ReplicationRoleChanged</code>:</p>
<p>  This event is called when the instance switches from master
  to replica or the other way around, however the event is
  also called when the replica remains a replica but starts to
  replicate with a different master.</p>
<p>  The following sub events are available:</p>
<ul>
<li><code>REDISMODULE_SUBEVENT_REPLROLECHANGED_NOW_MASTER</code></li>
<li><p><code>REDISMODULE_SUBEVENT_REPLROLECHANGED_NOW_REPLICA</code></p>
<p>The &apos;data&apos; field can be casted by the callback to a
<code>RedisModuleReplicationInfo</code> structure with the following fields:</p>
<p>  int master; // true if master, false if replica
  char <em>masterhost; // master instance hostname for NOW_REPLICA
  int masterport; // master instance port for NOW_REPLICA
  char </em>replid1; // Main replication ID
  char *replid2; // Secondary replication ID
  uint64_t repl1_offset; // Main replication offset
  uint64_t repl2_offset; // Offset of replid2 validity</p>
</li>
</ul>
</li>
<li><p><code>RedisModuleEvent_Persistence</code></p>
<p>  This event is called when RDB saving or AOF rewriting starts
  and ends. The following sub events are available:</p>
<ul>
<li><code>REDISMODULE_SUBEVENT_PERSISTENCE_RDB_START</code></li>
<li><code>REDISMODULE_SUBEVENT_PERSISTENCE_AOF_START</code></li>
<li><code>REDISMODULE_SUBEVENT_PERSISTENCE_SYNC_RDB_START</code></li>
<li><code>REDISMODULE_SUBEVENT_PERSISTENCE_ENDED</code></li>
<li><p><code>REDISMODULE_SUBEVENT_PERSISTENCE_FAILED</code></p>
<p>The above events are triggered not just when the user calls the
relevant commands like BGSAVE, but also when a saving operation
or AOF rewriting occurs because of internal server triggers.
The SYNC_RDB_START sub events are happening in the forground due to
SAVE command, FLUSHALL, or server shutdown, and the other RDB and
AOF sub events are executed in a background fork child, so any
action the module takes can only affect the generated AOF or RDB,
but will not be reflected in the parent process and affect connected
clients and commands. Also note that the AOF_START sub event may end
up saving RDB content in case of an AOF with rdb-preamble.</p>
</li>
</ul>
</li>
<li><p><code>RedisModuleEvent_FlushDB</code></p>
<p>  The FLUSHALL, FLUSHDB or an internal flush (for instance
  because of replication, after the replica synchronization)
  happened. The following sub events are available:</p>
<ul>
<li><code>REDISMODULE_SUBEVENT_FLUSHDB_START</code></li>
<li><p><code>REDISMODULE_SUBEVENT_FLUSHDB_END</code></p>
<p>The data pointer can be casted to a RedisModuleFlushInfo
structure with the following fields:</p>
<p>  int32_t async;  // True if the flush is done in a thread.</p>
<pre class="language-"><code>              // See for instance FLUSHALL ASYNC.
              // In this case the END callback is invoked
              // immediately after the database is put
              // in the free list of the thread.
</code></pre><p>  int32_t dbnum;  // Flushed database number, -1 for all the DBs</p>
<pre class="language-"><code>              // in the case of the FLUSHALL operation.
</code></pre><p>The start event is called <em>before</em> the operation is initated, thus
allowing the callback to call DBSIZE or other operation on the
yet-to-free keyspace.</p>
</li>
</ul>
</li>
<li><p><code>RedisModuleEvent_Loading</code></p>
<p>  Called on loading operations: at startup when the server is
  started, but also after a first synchronization when the
  replica is loading the RDB file from the master.
  The following sub events are available:</p>
<ul>
<li><code>REDISMODULE_SUBEVENT_LOADING_RDB_START</code></li>
<li><code>REDISMODULE_SUBEVENT_LOADING_AOF_START</code></li>
<li><code>REDISMODULE_SUBEVENT_LOADING_REPL_START</code></li>
<li><code>REDISMODULE_SUBEVENT_LOADING_ENDED</code></li>
<li><p><code>REDISMODULE_SUBEVENT_LOADING_FAILED</code></p>
<p>Note that AOF loading may start with an RDB data in case of
rdb-preamble, in which case you&apos;ll only receive an AOF_START event.</p>
</li>
</ul>
</li>
<li><p><code>RedisModuleEvent_ClientChange</code></p>
<p>  Called when a client connects or disconnects.
  The data pointer can be casted to a RedisModuleClientInfo
  structure, documented in RedisModule_GetClientInfoById().
  The following sub events are available:</p>
<ul>
<li><code>REDISMODULE_SUBEVENT_CLIENT_CHANGE_CONNECTED</code></li>
<li><code>REDISMODULE_SUBEVENT_CLIENT_CHANGE_DISCONNECTED</code></li>
</ul>
</li>
<li><p><code>RedisModuleEvent_Shutdown</code></p>
<p>  The server is shutting down. No subevents are available.</p>
</li>
<li><p><code>RedisModuleEvent_ReplicaChange</code></p>
<p>  This event is called when the instance (that can be both a
  master or a replica) get a new online replica, or lose a
  replica since it gets disconnected.
  The following sub events are available:</p>
<ul>
<li><code>REDISMODULE_SUBEVENT_REPLICA_CHANGE_ONLINE</code></li>
<li><p><code>REDISMODULE_SUBEVENT_REPLICA_CHANGE_OFFLINE</code></p>
<p>No additional information is available so far: future versions
of Redis will have an API in order to enumerate the replicas
connected and their state.</p>
</li>
</ul>
</li>
<li><p><code>RedisModuleEvent_CronLoop</code></p>
<p>  This event is called every time Redis calls the serverCron()
  function in order to do certain bookkeeping. Modules that are
  required to do operations from time to time may use this callback.
  Normally Redis calls this function 10 times per second, but
  this changes depending on the &quot;hz&quot; configuration.
  No sub events are available.</p>
<p>  The data pointer can be casted to a RedisModuleCronLoop
  structure with the following fields:</p>
<pre class="language-"><code>  int32_t hz;  // Approximate number of events per second.
</code></pre></li>
<li><p><code>RedisModuleEvent_MasterLinkChange</code></p>
<p>  This is called for replicas in order to notify when the
  replication link becomes functional (up) with our master,
  or when it goes down. Note that the link is not considered
  up when we just connected to the master, but only if the
  replication is happening correctly.
  The following sub events are available:</p>
<ul>
<li><code>REDISMODULE_SUBEVENT_MASTER_LINK_UP</code></li>
<li><code>REDISMODULE_SUBEVENT_MASTER_LINK_DOWN</code></li>
</ul>
</li>
<li><p><code>RedisModuleEvent_ModuleChange</code></p>
<p>  This event is called when a new module is loaded or one is unloaded.
  The following sub events are available:</p>
<ul>
<li><code>REDISMODULE_SUBEVENT_MODULE_LOADED</code></li>
<li><p><code>REDISMODULE_SUBEVENT_MODULE_UNLOADED</code></p>
<p>The data pointer can be casted to a RedisModuleModuleChange
structure with the following fields:</p>
<p>  const char* module_name;  // Name of module loaded or unloaded.
  int32_t module_version;  // Module version.</p>
</li>
</ul>
</li>
<li><p><code>RedisModuleEvent_LoadingProgress</code></p>
<p>  This event is called repeatedly called while an RDB or AOF file
  is being loaded.
  The following sub events are availble:</p>
<ul>
<li><code>REDISMODULE_SUBEVENT_LOADING_PROGRESS_RDB</code></li>
<li><p><code>REDISMODULE_SUBEVENT_LOADING_PROGRESS_AOF</code></p>
<p>The data pointer can be casted to a RedisModuleLoadingProgress
structure with the following fields:</p>
<p>  int32_t hz;  // Approximate number of events per second.
  int32_t progress;  // Approximate progress between 0 and 1024,</p>
<pre class="language-"><code>                 // or -1 if unknown.
</code></pre></li>
</ul>
</li>
<li><p><code>RedisModuleEvent_SwapDB</code></p>
<p>  This event is called when a SWAPDB command has been successfully
  Executed.
  For this event call currently there is no subevents available.</p>
<p>  The data pointer can be casted to a RedisModuleSwapDbInfo
  structure with the following fields:</p>
<pre class="language-"><code>  int32_t dbnum_first;    // Swap Db first dbnum
  int32_t dbnum_second;   // Swap Db second dbnum
</code></pre></li>
<li><p><code>RedisModuleEvent_ReplBackup</code></p>
<p>  Called when diskless-repl-load config is set to swapdb,
  And redis needs to backup the the current database for the
  possibility to be restored later. A module with global data and
  maybe with aux_load and aux_save callbacks may need to use this
  notification to backup / restore / discard its globals.
  The following sub events are available:</p>
<ul>
<li><code>REDISMODULE_SUBEVENT_REPL_BACKUP_CREATE</code></li>
<li><code>REDISMODULE_SUBEVENT_REPL_BACKUP_RESTORE</code></li>
<li><code>REDISMODULE_SUBEVENT_REPL_BACKUP_DISCARD</code></li>
</ul>
</li>
<li><p><code>RedisModuleEvent_ForkChild</code></p>
<p>  Called when a fork child (AOFRW, RDBSAVE, module fork...) is born/dies
  The following sub events are available:</p>
<ul>
<li><code>REDISMODULE_SUBEVENT_FORK_CHILD_BORN</code></li>
<li><code>REDISMODULE_SUBEVENT_FORK_CHILD_DIED</code></li>
</ul>
</li>
</ul>
<p>The function returns <code>REDISMODULE_OK</code> if the module was successfully subscribed
for the specified event. If the API is called from a wrong context or unsupported event
is given then <code>REDISMODULE_ERR</code> is returned.</p>
<h2 id="redismoduleissubeventsupported"><code>RedisModule_IsSubEventSupported</code></h2>
<pre class="language-"><code>int RedisModule_IsSubEventSupported(RedisModuleEvent event, int64_t subevent);
</code></pre><p>For a given server event and subevent, return zero if the
subevent is not supported and non-zero otherwise.</p>
<h2 id="redismodulesetlru"><code>RedisModule_SetLRU</code></h2>
<pre class="language-"><code>int RedisModule_SetLRU(RedisModuleKey *key, mstime_t lru_idle);
</code></pre><p>Set the key last access time for LRU based eviction. not relevant if the
servers&apos;s maxmemory policy is LFU based. Value is idle time in milliseconds.
returns <code>REDISMODULE_OK</code> if the LRU was updated, <code>REDISMODULE_ERR</code> otherwise.</p>
<h2 id="redismodulegetlru"><code>RedisModule_GetLRU</code></h2>
<pre class="language-"><code>int RedisModule_GetLRU(RedisModuleKey *key, mstime_t *lru_idle);
</code></pre><p>Gets the key last access time.
Value is idletime in milliseconds or -1 if the server&apos;s eviction policy is
LFU based.
returns <code>REDISMODULE_OK</code> if when key is valid.</p>
<h2 id="redismodulesetlfu"><code>RedisModule_SetLFU</code></h2>
<pre class="language-"><code>int RedisModule_SetLFU(RedisModuleKey *key, long long lfu_freq);
</code></pre><p>Set the key access frequency. only relevant if the server&apos;s maxmemory policy
is LFU based.
The frequency is a logarithmic counter that provides an indication of
the access frequencyonly (must be &lt;= 255).
returns <code>REDISMODULE_OK</code> if the LFU was updated, <code>REDISMODULE_ERR</code> otherwise.</p>
<h2 id="redismodulegetlfu"><code>RedisModule_GetLFU</code></h2>
<pre class="language-"><code>int RedisModule_GetLFU(RedisModuleKey *key, long long *lfu_freq);
</code></pre><p>Gets the key access frequency or -1 if the server&apos;s eviction policy is not
LFU based.
returns <code>REDISMODULE_OK</code> if when key is valid.</p>
<h2 id="redismodulegetcontextflagsall"><code>RedisModule_GetContextFlagsAll</code></h2>
<pre class="language-"><code>int RedisModule_GetContextFlagsAll();
</code></pre><p>Returns the full ContextFlags mask, using the return value
the module can check if a certain set of flags are supported
by the redis server version in use.
Example:</p>
<pre class="language-"><code>   int supportedFlags = RM_GetContextFlagsAll();
   if (supportedFlags &amp; REDISMODULE_CTX_FLAGS_MULTI) {
         // REDISMODULE_CTX_FLAGS_MULTI is supported
   } else{
         // REDISMODULE_CTX_FLAGS_MULTI is not supported
   }
</code></pre><h2 id="redismodulegetkeyspacenotificationflagsall"><code>RedisModule_GetKeyspaceNotificationFlagsAll</code></h2>
<pre class="language-"><code>int RedisModule_GetKeyspaceNotificationFlagsAll();
</code></pre><p>Returns the full KeyspaceNotification mask, using the return value
the module can check if a certain set of flags are supported
by the redis server version in use.
Example:</p>
<pre class="language-"><code>   int supportedFlags = RM_GetKeyspaceNotificationFlagsAll();
   if (supportedFlags &amp; REDISMODULE_NOTIFY_LOADED) {
         // REDISMODULE_NOTIFY_LOADED is supported
   } else{
         // REDISMODULE_NOTIFY_LOADED is not supported
   }
</code></pre><h2 id="redismodulegetserverversion"><code>RedisModule_GetServerVersion</code></h2>
<pre class="language-"><code>int RedisModule_GetServerVersion();
</code></pre><p>Return the redis version in format of 0x00MMmmpp.
Example for 6.0.7 the return value will be 0x00060007.</p>
<h2 id="redismodulegettypemethodversion"><code>RedisModule_GetTypeMethodVersion</code></h2>
<pre class="language-"><code>int RedisModule_GetTypeMethodVersion();
</code></pre><p>Return the current redis-server runtime value of <code>REDISMODULE_TYPE_METHOD_VERSION</code>.
You can use that when calling <code>RedisModule_CreateDataType</code> to know which fields of
<code>RedisModuleTypeMethods</code> are gonna be supported and which will be ignored.</p>
<h2 id="redismodulemoduletypereplacevalue"><code>RedisModule_ModuleTypeReplaceValue</code></h2>
<pre class="language-"><code>int RedisModule_ModuleTypeReplaceValue(RedisModuleKey *key, moduleType *mt, void *new_value, void **old_value);
</code></pre><p>Replace the value assigned to a module type.</p>
<p>The key must be open for writing, have an existing value, and have a moduleType
that matches the one specified by the caller.</p>
<p>Unlike <code>RedisModule_ModuleTypeSetValue()</code> which will free the old value, this function
simply swaps the old value with the new value.</p>
<p>The function returns <code>REDISMODULE_OK</code> on success, <code>REDISMODULE_ERR</code> on errors
such as:</p>
<ol>
<li>Key is not opened for writing.</li>
<li>Key is not a module data type key.</li>
<li>Key is a module datatype other than &apos;mt&apos;.</li>
</ol>
<p>If <code>old_value</code> is non-NULL, the old value is returned by reference.</p>
<h2 id="redismodulegetcommandkeys"><code>RedisModule_GetCommandKeys</code></h2>
<pre class="language-"><code>int *RedisModule_GetCommandKeys(RedisModuleCtx *ctx, RedisModuleString **argv, int argc, int *num_keys);
</code></pre><p>For a specified command, parse its arguments and return an array that
contains the indexes of all key name arguments. This function is
essnetially a more efficient way to do COMMAND GETKEYS.</p>
<p>A NULL return value indicates the specified command has no keys, or
an error condition. Error conditions are indicated by setting errno
as folllows:</p>
<ul>
<li>ENOENT: Specified command does not exist.</li>
<li>EINVAL: Invalid command arity specified.</li>
</ul>
<p>NOTE: The returned array is not a Redis Module object so it does not
get automatically freed even when auto-memory is used. The caller
must explicitly call <code>RedisModule_Free()</code> to free it.</p>
<h2 id="redismoduleregisterdefragfunc"><code>RedisModule_RegisterDefragFunc</code></h2>
<pre class="language-"><code>int RedisModule_RegisterDefragFunc(RedisModuleCtx *ctx, RedisModuleDefragFunc cb);
</code></pre><p>Register a defrag callback for global data, i.e. anything that the module
may allocate that is not tied to a specific data type.</p>
<h2 id="redismoduledefragshouldstop"><code>RedisModule_DefragShouldStop</code></h2>
<pre class="language-"><code>int RedisModule_DefragShouldStop(RedisModuleDefragCtx *ctx);
</code></pre><p>When the data type defrag callback iterates complex structures, this
function should be called periodically. A zero (false) return
indicates the callback may continue its work. A non-zero value (true)
indicates it should stop.</p>
<p>When stopped, the callback may use <code>RedisModule_DefragCursorSet()</code> to store its
position so it can later use <code>RedisModule_DefragCursorGet()</code> to resume defragging.</p>
<p>When stopped and more work is left to be done, the callback should
return 1. Otherwise, it should return 0.</p>
<p>NOTE: Modules should consider the frequency in which this function is called,
so it generally makes sense to do small batches of work in between calls.</p>
<h2 id="redismoduledefragcursorset"><code>RedisModule_DefragCursorSet</code></h2>
<pre class="language-"><code>int RedisModule_DefragCursorSet(RedisModuleDefragCtx *ctx, unsigned long cursor);
</code></pre><p>Store an arbitrary cursor value for future re-use.</p>
<p>This should only be called if <code>RedisModule_DefragShouldStop()</code> has returned a non-zero
value and the defrag callback is about to exit without fully iterating its
data type.</p>
<p>This behavior is reserved to cases where late defrag is performed. Late
defrag is selected for keys that implement the <code>free_effort</code> callback and
return a <code>free_effort</code> value that is larger than the defrag
&apos;active-defrag-max-scan-fields&apos; configuration directive.</p>
<p>Smaller keys, keys that do not implement <code>free_effort</code> or the global
defrag callback are not called in late-defrag mode. In those cases, a
call to this function will return <code>REDISMODULE_ERR</code>.</p>
<p>The cursor may be used by the module to represent some progress into the
module&apos;s data type. Modules may also store additional cursor-related
information locally and use the cursor as a flag that indicates when
traversal of a new key begins. This is possible because the API makes
a guarantee that concurrent defragmentation of multiple keys will
not be performed.</p>
<h2 id="redismoduledefragcursorget"><code>RedisModule_DefragCursorGet</code></h2>
<pre class="language-"><code>int RedisModule_DefragCursorGet(RedisModuleDefragCtx *ctx, unsigned long *cursor);
</code></pre><p>Fetch a cursor value that has been previously stored using <code>RedisModule_DefragCursorSet()</code>.</p>
<p>If not called for a late defrag operation, <code>REDISMODULE_ERR</code> will be returned and
the cursor should be ignored. See <code>RedisModule_DefragCursorSet()</code> for more details on
defrag cursors.</p>
<h2 id="redismoduledefragalloc"><code>RedisModule_DefragAlloc</code></h2>
<pre class="language-"><code>void *RedisModule_DefragAlloc(RedisModuleDefragCtx *ctx, void *ptr);
</code></pre><p>Defrag a memory allocation previously allocated by <code>RedisModule_Alloc</code>, <code>RedisModule_Calloc</code>, etc.
The defragmentation process involves allocating a new memory block and copying
the contents to it, like <code>realloc()</code>.</p>
<p>If defragmentation was not necessary, NULL is returned and the operation has
no other effect.</p>
<p>If a non-NULL value is returned, the caller should use the new pointer instead
of the old one and update any reference to the old pointer, which must not
be used again.</p>
<h2 id="redismoduledefragredismodulestring"><code>RedisModule_DefragRedisModuleString</code></h2>
<pre class="language-"><code>RedisModuleString *RedisModule_DefragRedisModuleString(RedisModuleDefragCtx *ctx, RedisModuleString *str);
</code></pre><p>Defrag a <code>RedisModuleString</code> previously allocated by <code>RedisModule_Alloc</code>, <code>RedisModule_Calloc</code>, etc.
See <code>RedisModule_DefragAlloc()</code> for more information on how the defragmentation process
works.</p>
<p>NOTE: It is only possible to defrag strings that have a single reference.
Typically this means strings retained with <code>RedisModule_RetainString</code> or <code>RedisModule_HoldString</code>
may not be defragmentable. One exception is command argvs which, if retained
by the module, will end up with a single reference (because the reference
on the Redis side is dropped as soon as the command callback returns).</p>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="memory-optimization.html" class="navigation navigation-prev " aria-label="Previous page: Memory Optimization">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="modules-blocking-ops.html" class="navigation navigation-next " aria-label="Next page: Modules Blocking Ops">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"Modules Api Ref","level":"1.3.31","depth":2,"next":{"title":"Modules Blocking Ops","level":"1.3.32","depth":2,"path":"topics/modules-blocking-ops.md","ref":"topics/modules-blocking-ops.md","articles":[]},"previous":{"title":"Memory Optimization","level":"1.3.30","depth":2,"path":"topics/memory-optimization.md","ref":"topics/memory-optimization.md","articles":[]},"dir":"ltr"},"config":{"plugins":["-sharing","-highlight","-livereload","prism"],"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"pluginsConfig":{"prism":{"css":["prismjs/themes/prism-solarizedlight.css"]},"search":{},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"fontsettings":{"theme":"white","family":"sans","size":2},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false}},"theme":"default","pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"variables":{},"title":"Redis 英文文档","language":"us-en","links":{"sidebar":{"Home":"https://docs.khs1994.com"}},"gitbook":"*"},"file":{"path":"topics/modules-api-ref.md","mtime":"2021-03-03T00:55:16.000Z","type":"markdown"},"gitbook":{"version":"3.2.3","time":"2021-03-03T01:00:54.363Z"},"basePath":"..","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="../gitbook/gitbook.js"></script>
    <script src="../gitbook/theme.js"></script>
    
        
        <script src="../gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

